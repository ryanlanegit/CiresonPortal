/*
 RequireJS 2.1.11 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/

/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

//This function is called also from software asset "copy license assignment" task

var profileMainBuilder;!function(){if(!profileMainBuilder||!profileMainBuilder.requirejs){profileMainBuilder?require=profileMainBuilder:profileMainBuilder={};var requirejs,require,define;!function(ca){function G(e){return"[object Function]"===M.call(e)}function H(e){return"[object Array]"===M.call(e)}function v(e,t){if(e){var i;for(i=0;i<e.length&&(!e[i]||!t(e[i],i,e));i+=1);}}function U(e,t){if(e){var i;for(i=e.length-1;-1<i&&(!e[i]||!t(e[i],i,e));i-=1);}}function s(e,t){return ga.call(e,t)}function j(e,t){return s(e,t)&&e[t]}function B(e,t){for(var i in e)if(s(e,i)&&t(e[i],i))break}function V(e,t,i,n){return t&&B(t,function(t,a){!i&&s(e,a)||(!n||"object"!=typeof t||!t||H(t)||G(t)||t instanceof RegExp?e[a]=t:(e[a]||(e[a]={}),V(e[a],t,i,n)))}),e}function t(e,t){return function(){return t.apply(e,arguments)}}function da(e){throw e}function ea(e){if(!e)return e;var t=ca;return v(e.split("."),function(e){t=t[e]}),t}function C(e,t,i,n){return t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e),t.requireType=e,t.requireModules=n,i&&(t.originalError=i),t}function ha(e){function i(e,t,i){var n,a,r,o,l,s,d,c=t&&t.split("/");a=c;var u=D.map,p=u&&u["*"];if(e&&"."===e.charAt(0))if(t){for(a=c.slice(0,c.length-1),e=e.split("/"),t=e.length-1,D.nodeIdCompat&&R.test(e[t])&&(e[t]=e[t].replace(R,"")),a=e=a.concat(e),o=a.length,t=0;t<o;t++)if("."===(r=a[t]))a.splice(t,1),t-=1;else if(".."===r){if(1===t&&(".."===a[2]||".."===a[0]))break;0<t&&(a.splice(t-1,2),t-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if(i&&u&&(c||p)){a=e.split("/"),t=a.length;e:for(;0<t;t-=1){if(o=a.slice(0,t).join("/"),c)for(r=c.length;0<r;r-=1)if((i=j(u,c.slice(0,r).join("/")))&&(i=j(i,o))){n=i,l=t;break e}!s&&p&&j(p,o)&&(s=j(p,o),d=t)}!n&&s&&(n=s,l=d),n&&(a.splice(0,l,n),e=a.join("/"))}return(n=j(D.pkgs,e))?n:e}function n(e){z&&v(document.getElementsByTagName("script"),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===k.contextName)return t.parentNode.removeChild(t),!0})}function a(e){var t=j(D.paths,e);if(t&&H(t)&&1<t.length)return t.shift(),k.require.undef(e),k.require([e]),!0}function r(e){var t,i=e?e.indexOf("!"):-1;return-1<i&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function o(e,t,n,a){var o,l,s=null,d=t?t.name:null,c=e,u=!0,p="";return e||(u=!1,e="_@r"+($+=1)),e=r(e),s=e[0],e=e[1],s&&(s=i(s,d,a),l=j(F,s)),e&&(s?p=l&&l.normalize?l.normalize(e,function(e){return i(e,d,a)}):i(e,d,a):(p=i(e,d,a),e=r(p),s=e[0],p=e[1],n=!0,o=k.nameToUrl(p))),n=!s||l||n?"":"_unnormalized"+(E+=1),{prefix:s,name:p,parentMap:t,unnormalized:!!n,url:o,originalName:c,isDefine:u,id:(s?s+"!"+p:p)+n}}function l(e){var t=e.id,i=j(T,t);return i||(i=T[t]=new k.Module(e)),i}function d(e,t,i){var n=e.id,a=j(T,n);!s(F,n)||a&&!a.defineEmitComplete?(a=l(e),a.error&&"error"===t?i(a.error):a.on(t,i)):"defined"===t&&i(F[n])}function c(e,t){var i=e.requireModules,n=!1;t?t(e):(v(i,function(t){(t=j(T,t))&&(t.error=e,t.events.error&&(n=!0,t.emit("error",e)))}),n||h.onError(e))}function u(){S.length&&(ia.apply(_,[_.length,0].concat(S)),S=[])}function p(e){delete T[e],delete N[e]}function f(e,t,i){var n=e.map.id;e.error?e.emit("error",e.error):(t[n]=!0,v(e.depMaps,function(n,a){var r=n.id,o=j(T,r);o&&!e.depMatched[a]&&!i[r]&&(j(t,r)?(e.defineDep(a,F[r]),e.check()):f(o,t,i))}),i[n]=!0)}function m(){var e,t,i=(e=1e3*D.waitSeconds)&&k.startTime+e<(new Date).getTime(),r=[],o=[],l=!1,s=!0;if(!y){if(y=!0,B(N,function(e){var d=e.map,c=d.id;if(e.enabled&&(d.isDefine||o.push(e),!e.error))if(!e.inited&&i)a(c)?l=t=!0:(r.push(c),n(c));else if(!e.inited&&e.fetched&&d.isDefine&&(l=!0,!d.prefix))return s=!1}),i&&r.length)return e=C("timeout","Load timeout for modules: "+r,null,r),e.contextName=k.contextName,c(e);s&&v(o,function(e){f(e,{},{})}),i&&!t||!l||!z&&!fa||M||(M=setTimeout(function(){M=0,m()},50)),y=!1}}function b(e){s(F,e[0])||l(o(e[0],null,!0)).init(e[1],e[2])}function g(e){var e=e.currentTarget||e.srcElement,t=k.onScriptLoad;return e.detachEvent&&!Z?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=k.onScriptError,(!e.detachEvent||Z)&&e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function w(){var e;for(u();_.length;){if(e=_.shift(),null===e[0])return c(C("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));b(e)}}var y,x,k,I,M,D={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},T={},N={},A={},_=[],F={},q={},L={},$=1,E=1;return I={require:function(e){return e.require?e.require:e.require=k.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?F[e.map.id]=e.exports:e.exports=F[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return j(D.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},x=function(e){this.events=j(A,e.id)||{},this.map=e,this.shim=j(D.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},x.prototype={init:function(e,i,n,a){a=a||{},this.inited||(this.factory=i,n?this.on("error",n):this.events.error&&(n=t(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=a.ignore,a.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,k.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();k.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],t(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;q[e]||(q[e]=!0,k.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,i=this.map.id;t=this.depExports;var n=this.exports,a=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(G(a)){if(this.events.error&&this.map.isDefine||h.onError!==da)try{n=k.execCb(i,a,t,n)}catch(t){e=t}else n=k.execCb(i,a,t,n);if(this.map.isDefine&&void 0===n&&((t=this.module)?n=t.exports:this.usingExports&&(n=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else n=a;this.exports=n,this.map.isDefine&&!this.ignore&&(F[i]=n,h.onResourceLoad)&&h.onResourceLoad(k,this.map,this.depMaps),p(i),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,n=e.id,a=o(e.prefix);this.depMaps.push(a),d(a,"defined",t(this,function(a){var r,u;u=j(L,this.map.id);var f=this.map.name,m=this.map.parentMap?this.map.parentMap.name:null,v=k.makeRequire(e.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(a.normalize&&(f=a.normalize(f,function(e){return i(e,m,!0)})||""),a=o(e.prefix+"!"+f,this.map.parentMap),d(a,"defined",t(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),(u=j(T,a.id))&&(this.depMaps.push(a),this.events.error&&u.on("error",t(this,function(e){this.emit("error",e)})),u.enable())):u?(this.map.url=k.nameToUrl(u),this.load()):(r=t(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),r.error=t(this,function(e){this.inited=!0,this.error=e,e.requireModules=[n],B(T,function(e){0===e.map.id.indexOf(n+"_unnormalized")&&p(e.map.id)}),c(e)}),r.fromText=t(this,function(t,i){var a=e.name,d=o(a),u=O;i&&(t=i),u&&(O=!1),l(d),s(D.config,n)&&(D.config[a]=D.config[n]);try{h.exec(t)}catch(e){return c(C("fromtexteval","fromText eval for "+n+" failed: "+e,e,[n]))}u&&(O=!0),this.depMaps.push(d),k.completeLoad(a),v([a],r)}),a.load(e.name,v,r,D))})),k.enable(a,this),this.pluginMaps[a.id]=a},enable:function(){N[this.map.id]=this,this.enabling=this.enabled=!0,v(this.depMaps,t(this,function(e,i){var n,a;if("string"==typeof e){if(e=o(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[i]=e,n=j(I,e.id))return void(this.depExports[i]=n(this));this.depCount+=1,d(e,"defined",t(this,function(e){this.defineDep(i,e),this.check()})),this.errback&&d(e,"error",t(this,this.errback))}n=e.id,a=T[n],!s(I,n)&&a&&!a.enabled&&k.enable(e,this)})),B(this.pluginMaps,t(this,function(e){var t=j(T,e.id);t&&!t.enabled&&k.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var i=this.events[e];i||(i=this.events[e]=[]),i.push(t)},emit:function(e,t){v(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},k={config:D,contextName:e,registry:T,defined:F,urlFetched:q,defQueue:_,Module:x,makeModuleMap:o,nextTick:h.nextTick,onError:c,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=D.shim,i={paths:!0,bundles:!0,config:!0,map:!0};B(e,function(e,t){i[t]?(D[t]||(D[t]={}),V(D[t],e,!0,!0)):D[t]=e}),e.bundles&&B(e.bundles,function(e,t){v(e,function(e){e!==t&&(L[e]=t)})}),e.shim&&(B(e.shim,function(e,i){H(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=k.makeShimExports(e)),t[i]=e}),D.shim=t),e.packages&&v(e.packages,function(e){var t,e="string"==typeof e?{name:e}:e;t=e.name,e.location&&(D.paths[t]=e.location),D.pkgs[t]=e.name+"/"+(e.main||"main").replace(ja,"").replace(R,"")}),B(T,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=o(t))}),(e.deps||e.callback)&&k.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(ca,arguments)),t||e.exports&&ea(e.exports)}},makeRequire:function(t,a){function r(i,n,d){var u,p;return a.enableBuildCallback&&n&&G(n)&&(n.__requireJsBuild=!0),"string"==typeof i?G(n)?c(C("requireargs","Invalid require call"),d):t&&s(I,i)?I[i](T[t.id]):h.get?h.get(k,i,t,r):(u=o(i,t,!1,!0),u=u.id,s(F,u)?F[u]:c(C("notloaded",'Module name "'+u+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(w(),k.nextTick(function(){w(),p=l(o(null,t)),p.skipMap=a.skipMap,p.init(i,n,d,{enabled:!0}),m()}),r)}return a=a||{},V(r,{isBrowser:z,toUrl:function(e){var n,a=e.lastIndexOf("."),r=e.split("/")[0];return-1!==a&&("."!==r&&".."!==r||1<a)&&(n=e.substring(a,e.length),e=e.substring(0,a)),k.nameToUrl(i(e,t&&t.id,!0),n,!0)},defined:function(e){return s(F,o(e,t,!1,!0).id)},specified:function(e){return e=o(e,t,!1,!0).id,s(F,e)||s(T,e)}}),t||(r.undef=function(e){u();var i=o(e,t,!0),a=j(T,e);n(e),delete F[e],delete q[i.url],delete A[e],U(_,function(t,i){t[0]===e&&_.splice(i,1)}),a&&(a.events.defined&&(A[e]=a.events),p(e))}),r},enable:function(e){j(T,e.id)&&l(e).enable()},completeLoad:function(e){var t,i,n=j(D.shim,e)||{},r=n.exports;for(u();_.length;){if(i=_.shift(),null===i[0]){if(i[0]=e,t)break;t=!0}else i[0]===e&&(t=!0);b(i)}if(i=j(T,e),!t&&!s(F,e)&&i&&!i.inited){if(D.enforceDefine&&(!r||!ea(r)))return a(e)?void 0:c(C("nodefine","No define call for "+e,null,[e]));b([e,n.deps||[],n.exportsFn])}m()},nameToUrl:function(e,t,i){var n,a,r;if((n=j(D.pkgs,e))&&(e=n),n=j(L,e))return k.nameToUrl(n,t,i);if(h.jsExtRegExp.test(e))n=e+(t||"");else{for(n=D.paths,e=e.split("/"),a=e.length;0<a;a-=1)if(r=e.slice(0,a).join("/"),r=j(n,r)){H(r)&&(r=r[0]),e.splice(0,a,r);break}n=e.join("/"),n+=t||(/^data\:|\?/.test(n)||i?"":".js"),n=("/"===n.charAt(0)||n.match(/^[\w\+\.\-]+:/)?"":D.baseUrl)+n}return D.urlArgs?n+(-1===n.indexOf("?")?"?":"&")+D.urlArgs:n},load:function(e,t){h.load(k,e,t)},execCb:function(e,t,i,n){return t.apply(n,i)},onScriptLoad:function(e){("load"===e.type||ka.test((e.currentTarget||e.srcElement).readyState))&&(P=null,e=g(e),k.completeLoad(e.id))},onScriptError:function(e){var t=g(e);if(!a(t.id))return c(C("scripterror","Script error for: "+t.id,e,[t.id]))}},k.require=k.makeRequire(),k}var h,x,y,D,K,E,P,L,q,Q,la=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,ma=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,R=/\.js$/,ja=/^\.\//;x=Object.prototype;var M=x.toString,ga=x.hasOwnProperty,ia=Array.prototype.splice,z=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),fa=!z&&"undefined"!=typeof importScripts,ka=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Z="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},r={},S=[],O=!1;if(void 0===define){if(void 0!==requirejs){if(G(requirejs))return;r=requirejs,requirejs=void 0}void 0!==require&&!G(require)&&(r=require,require=void 0),h=requirejs=function(e,t,i,n){var a,r="_";return!H(e)&&"string"!=typeof e&&(a=e,H(t)?(e=t,t=i,i=n):e=[]),a&&a.context&&(r=a.context),(n=j(F,r))||(n=F[r]=h.s.newContext(r)),a&&n.configure(a),n.require(e,t,i)},h.config=function(e){return h(e)},h.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=h),h.version="2.1.11",h.jsExtRegExp=/^\/|:|\?|\.js$/,h.isBrowser=z,x=h.s={contexts:F,newContext:ha},h({}),v(["toUrl","undef","defined","specified"],function(e){h[e]=function(){var t=F._;return t.require[e].apply(t,arguments)}}),z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(y=x.head=D.parentNode),h.onError=da,h.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},h.load=function(e,t,i){var n=e&&e.config||{};if(z)return n=h.createNode(n,t,i),n.setAttribute("data-requirecontext",e.contextName),n.setAttribute("data-requiremodule",t),!n.attachEvent||n.attachEvent.toString&&0>n.attachEvent.toString().indexOf("[native code")||Z?(n.addEventListener("load",e.onScriptLoad,!1),n.addEventListener("error",e.onScriptError,!1)):(O=!0,n.attachEvent("onreadystatechange",e.onScriptLoad)),n.src=i,L=n,D?y.insertBefore(n,D):y.appendChild(n),L=null,n;if(fa)try{importScripts(i),e.completeLoad(t)}catch(n){e.onError(C("importscripts","importScripts failed for "+t+" at "+i,n,[t]))}},z&&!r.skipDataMain&&U(document.getElementsByTagName("script"),function(e){if(y||(y=e.parentNode),K=e.getAttribute("data-main"))return q=K,r.baseUrl||(E=q.split("/"),q=E.pop(),Q=E.length?E.join("/")+"/":"./",r.baseUrl=Q),q=q.replace(R,""),h.jsExtRegExp.test(q)&&(q=K),r.deps=r.deps?r.deps.concat(q):[q],!0}),define=function(e,t,i){var n,a;"string"!=typeof e&&(i=t,t=e,e=null),H(t)||(i=t,t=null),!t&&G(i)&&(t=[],i.length&&(i.toString().replace(la,"").replace(ma,function(e,i){t.push(i)}),t=(1===i.length?["require"]:["require","exports","module"]).concat(t))),O&&((n=L)||(P&&"interactive"===P.readyState||U(document.getElementsByTagName("script"),function(e){if("interactive"===e.readyState)return P=e}),n=P),n&&(e||(e=n.getAttribute("data-requiremodule")),a=F[n.getAttribute("data-requirecontext")])),(a?a.defQueue:S).push([e,t,i])},define.amd={jQuery:!0},h.exec=function(b){return eval(b)},h(r)}}(this),profileMainBuilder.requirejs=requirejs,profileMainBuilder.require=require,profileMainBuilder.define=define}}(),profileMainBuilder.define("requireLib",function(){}),profileMainBuilder.define("text",["module"],function(e){"use strict";var t,i,n,a,r,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],l=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d="undefined"!=typeof location&&location.href,c=d&&location.protocol&&location.protocol.replace(/\:/,""),u=d&&location.hostname,p=d&&(location.port||void 0),f={},m=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){e=e.replace(l,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){i=o[t];try{e=new ActiveXObject(i)}catch(e){}if(e){o=[i];break}}return e},parseName:function(e){var t,i,n,a=!1,r=e.indexOf("."),o=0===e.indexOf("./")||0===e.indexOf("../");return-1!==r&&(!o||r>1)?(t=e.substring(0,r),i=e.substring(r+1,e.length)):t=e,n=i||t,r=n.indexOf("!"),-1!==r&&(a="strip"===n.substring(r+1),n=n.substring(0,r),i?i=n:t=n),{moduleName:t,ext:i,strip:a}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,i,n,a){var r,o,l,s=t.xdRegExp.exec(e);return!s||(r=s[2],o=s[3],o=o.split(":"),l=o[1],o=o[0],!(r&&r!==i||o&&o.toLowerCase()!==n.toLowerCase()||(l||o)&&l!==a))},finishLoad:function(e,i,n,a){n=i?t.strip(n):n,m.isBuild&&(f[e]=n),a(n)},load:function(e,i,n,a){if(a.isBuild&&!a.inlineText)return void n();m.isBuild=a.isBuild;var r=t.parseName(e),o=r.moduleName+(r.ext?"."+r.ext:""),l=i.toUrl(o),s=m.useXhr||t.useXhr;if(0===l.indexOf("empty:"))return void n();!d||s(l,c,u,p)?t.get(l,function(i){t.finishLoad(e,r.strip,i,n)},function(e){n.error&&n.error(e)}):i([o],function(e){t.finishLoad(r.moduleName+"."+r.ext,r.strip,e,n)})},write:function(e,i,n,a){if(f.hasOwnProperty(i)){var r=t.jsEscape(f[i]);n.asModule(e+"!"+i,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,i,n,a,r){var o=t.parseName(i),l=o.ext?"."+o.ext:"",s=o.moduleName+l,d=n.toUrl(o.moduleName+l)+".js";t.load(s,n,function(i){var n=function(e){return a(d,e)};n.asModule=function(e,t){return a.asModule(e,d,t)},t.write(e,s,n,r)},r)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(i=require.nodeRequire("fs"),t.get=function(e,t,n){try{var a=i.readFileSync(e,"utf8");0===a.indexOf("\ufeff")&&(a=a.substring(1)),t(a)}catch(e){n(e)}}):"xhr"===m.env||!m.env&&t.createXhr()?t.get=function(e,i,n,a){var r,o=t.createXhr();if(o.open("GET",e,!0),a)for(r in a)a.hasOwnProperty(r)&&o.setRequestHeader(r.toLowerCase(),a[r]);m.onXhr&&m.onXhr(o,e),o.onreadystatechange=function(t){var a,r;4===o.readyState&&(a=o.status,a>399&&a<600?(r=new Error(e+" HTTP status: "+a),r.xhr=o,n(r)):i(o.responseText),m.onXhrComplete&&m.onXhrComplete(o,e))},o.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var i,n,a=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(a),"utf-8")),l="";try{for(i=new java.lang.StringBuffer,n=o.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=o.readLine());)i.append(r),i.append(n);l=String(i.toString())}finally{o.close()}t(l)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(n=Components.classes,a=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in n,t.get=function(e,t){var i,o,l,s={};r&&(e=e.replace(/\//g,"\\")),l=new FileUtils.File(e);try{i=n["@mozilla.org/network/file-input-stream;1"].createInstance(a.nsIFileInputStream),i.init(l,1,0,!1),o=n["@mozilla.org/intl/converter-input-stream;1"].createInstance(a.nsIConverterInputStream),o.init(i,"utf-8",i.available(),a.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(i.available(),s),o.close(),i.close(),t(s.value)}catch(e){throw new Error((l&&l.path||"")+": "+e)}}),t}),profileMainBuilder.define("text!forms/header/status/view.html",[],function(){return'<h1 class="page_title">\r\n    <span data-bind="text: view.title"></span><span>-</span><span class="uppercase" data-bind="text: view.id"></span>\r\n    <span class="cursor-pointer" id="viewAttachments" data-bind="click: view.viewAttachments, visible: view.filesCount > 0"><i class="fa fa-paperclip text-primary" style="font-size: inherit"></i></span>\r\n    <span class="label label-info label-heading" id="statusname" data-bind="visible: view.statusVisible, text: viewModel.Status.Name"></span>\r\n    <span class="label label-heading" data-bind="visible: viewModel.IsParent"><img src="/Content/Images/Icons/WorkItemsStatus/workitem-parent-icon.svg"></span>\r\n</h2>\r\n\r\n\r\n'}),profileMainBuilder.define("text!forms/flyout/fileAttachmentsFlyout/mobile_view.html",[],function(){return'<div class="cireson-window defined-form task-window hide">\r\n    <div class="cireson-window--wrapper">\r\n        <div class="cireson-window--body">\r\n            <div>\r\n                <div class="fileattachment-list"></div>\r\n                <div class="fileattachment-img-modal"></div>\r\n            </div>\r\n\r\n            <script type="text/x-kendo-template" id="filesTemplate">\r\n                <div class="thumbnail-file">\r\n                    <div class="cursor-pointer thumbnail-img">\r\n                        # if (DisplayName.toLowerCase().match(/\\.(jpg|jpeg|png|gif)$/)) { #\r\n                        <img src="data:image/png;base64,#= Content.data #" onerror="this.onerror = null; this.src = \'/Content/Images/Icons/FileUpload/document.svg\';" alt="#: DisplayName # image" />\r\n                        # } else{ #\r\n                        <img class="default-icon" src="/Content/Images/Icons/FileUpload/document.svg" onerror="this.onerror = null; this.src = \'/Content/Images/Icons/FileUpload/document.svg\'">\r\n                        # } #\r\n                    </div>\r\n                    <div class="thumbnail-caption">\r\n                        <span>#: DisplayName #</span>\r\n                        <div class="overlay">\r\n                            # if (DisplayName.toLowerCase().match(/\\.(jpg|jpeg|png|gif)$/)) { #\r\n                            <span class="label">\r\n                                <a class="icon custom-click" title="View Image" action="view">\r\n                                    <i class="fa fa-eye"></i>\r\n                                </a>\r\n                            </span>\r\n                            <span class="label">\r\n                                <a class="icon custom-click" title="Open in New Tab" action="opennewtab">\r\n                                    <i class="fa fa-external-link"></i>\r\n                                </a>\r\n                            </span>\r\n                            # } #\r\n                            <span class="label">\r\n                                <a class="icon custom-click" title="Download" action="download">\r\n                                    <i class="fa fa-download"></i>\r\n                                </a>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            <\/script>\r\n            <script>\r\n                function selectFile(el, action) {\r\n                    //var listView = $(".fileattachment-list").data("kendoListView");\r\n                    //var item = $(el).closest("[role=\'option\']");\r\n                    //var dataItem = listView.dataSource.getByUid(item.data("uid"));\r\n\r\n                    //if (action === "download") {\r\n                    //    var downloadUrl = app.config.rootURL + "FileAttachment/ViewFile/";\r\n                    //    location.href = downloadUrl + dataItem.BaseId;\r\n                    //} else if (action === "opennewtab") {\r\n                    //    var win = window.open(\'about:blank\');\r\n                    //    setTimeout(function () { //FireFox seems to require a setTimeout for this to work.\r\n                    //        win.document.body.appendChild(win.document.createElement(\'img\')).src = el.closest(".thumbnail-file").find(".thumbnail-img img")[0].src;\r\n                    //        win.href = el.closest(".thumbnail-file").find(".thumbnail-img img")[0].src;\r\n                    //        win.focus();\r\n                    //    }, 0);\r\n\r\n\r\n                    //} else {\r\n                    //    var dialog = $(\'.fileattachment-img-modal\');\r\n                    //    dialog.kendoDialog({\r\n                    //        modal: true,\r\n                    //        title: dataItem.DisplayName,\r\n                    //        content: "<div class=\'file-img-container\'><img src=\\"data:image/png;base64," + dataItem.Content.data + "\\" onerror=\\"this.onerror = null; this.src = \'/Content/Images/Icons/FileUpload/document.svg\';\\" alt=\\"" + dataItem.DisplayName + "\\" /></div>",\r\n                    //        animation: {\r\n                    //            open: {\r\n                    //                effects: "fade:in"\r\n                    //            }\r\n                    //        }\r\n                    //    });\r\n                    //    $(\'.k-window.k-widget\').addClass(\'acivity-popup-window\');\r\n                    //    dialog.data("kendoDialog").open();\r\n                    //}\r\n                }\r\n\r\n            <\/script>\r\n        </div>\r\n        <div class="window-buttons cireson-window--footer">\r\n            <button data-role="button"\r\n                    class="btn btn-primary"\r\n                    data-bind="events: { click: save }, visible: saveCancelBtn">\r\n                <%= localization.OK %>\r\n            </button>\r\n            <button data-role="button"\r\n                    class="btn btn-default"\r\n                    data-bind="events: { click: cancel }, visible: saveCancelBtn">\r\n                <%= localization.Cancel %>\r\n            </button>\r\n            <button data-role="button"\r\n                    class="btn btn-default"\r\n                    data-bind="events: { click: cancel}, visible: closeBtn ">\r\n                <%= localization.Close %>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>'}),profileMainBuilder.define("text!forms/flyout/fileAttachmentsFlyout/view.html",[],function(){return'<div tabindex="-1" role="dialog" class="modal right fade">\r\n    <div class="modal-dialog">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h4 class="modal-title"><%= localization.FileAttachments %></h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div>\r\n                    <div class="fileattachment-list"></div>\r\n                    <div class="fileattachment-img-modal"></div>\r\n                </div>\r\n\r\n                <script type="text/x-kendo-template" id="filesTemplate">\r\n                    <div class="thumbnail-file">\r\n                        <div class="cursor-pointer thumbnail-img">\r\n                            # if (DisplayName.toLowerCase().match(/\\.(jpg|jpeg|png|gif)$/)) { #\r\n                            <img src="data:image/png;base64,#= Content.data #" onerror="this.onerror = null; this.src = \'/Content/Images/Icons/FileUpload/document.svg\';" alt="#: DisplayName # image" />\r\n                            # } else{ #\r\n                            <img class="default-icon" src="/Content/Images/Icons/FileUpload/document.svg" action="download" onerror="    this.onerror = null; this.src = \'/Content/Images/Icons/FileUpload/document.svg\'">\r\n                            # } #\r\n                        </div>\r\n                        <div class="thumbnail-caption">\r\n                            <span>#: DisplayName #</span>\r\n                            <div class="overlay">\r\n                                # if (DisplayName.toLowerCase().match(/\\.(jpg|jpeg|png|gif)$/)) { #\r\n                                <span class="label">\r\n                                    <a class="icon custom-click" view-image action="view" title="View Image">\r\n                                        <i class="fa fa-eye"></i>\r\n                                    </a>\r\n                                </span>\r\n                                <span class="label">\r\n                                    <a class="icon custom-click" title="Open in New Tab" action="opennewtab">\r\n                                        <i class="fa fa-external-link"></i>\r\n                                    </a>\r\n                                </span>\r\n                                # } #\r\n                                # if (BaseId!=null) { #\r\n                                <span class="label">\r\n                                    <a class="icon custom-click" title="Download" action="download">\r\n                                        <i class="fa fa-download"></i>\r\n                                    </a>\r\n                                </span>\r\n                                # } #\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                <\/script>\r\n                \r\n            </div>\r\n            <div class="modal-footer">\r\n                <button data-role="button"\r\n                        class="btn btn-primary"\r\n                        data-bind="events: { click: save }, visible: saveCancelBtn">\r\n                    <%= localization.OK %>\r\n                </button>\r\n                <button data-role="button"\r\n                        class="btn btn-default"\r\n                        data-bind="events: { click: cancel }, visible: saveCancelBtn">\r\n                    <%= localization.Cancel %>\r\n                </button>\r\n                <button data-role="button"\r\n                        class="btn btn-default"\r\n                        data-bind="events: { click: cancel}, visible: closeBtn ">\r\n                    <%= localization.Close %>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n\r\n</div>'});var __fileAttachmentsPopupSingleton;profileMainBuilder.define("forms/flyout/fileAttachmentsFlyout/controller",["require","text!forms/flyout/fileAttachmentsFlyout/mobile_view.html","text!forms/flyout/fileAttachmentsFlyout/view.html"],function(e){var t=e(app.isMobile()?"text!forms/flyout/fileAttachmentsFlyout/mobile_view.html":"text!forms/flyout/fileAttachmentsFlyout/view.html"),i=function(e,t,i){var n,a,r=this,o=t;this.setSaveCallback=function(e){$(r).unbind("save").bind("save",function(t,i){e(i)})},this.setCancelCallback=function(e){$(r).unbind("cancel").bind("cancel",function(t,i){e(i)})};!function(){app.isMobile()&&(a=o.kendoCiresonWindow({title:localization.FileAttachments,width:650,height:740,actions:[]}).data("kendoWindow")),n=kendo.observable({save:function(){$(r).trigger("save",{selectedFiles:n.selectedFiles}),n.closeModal()},cancel:function(){$(r).trigger("cancel"),n.closeModal()},isDesktopView:!app.isMobileDevice(),isMobileView:app.isMobileDevice(),selectedFiles:[],onOpenFile:function(e){var t=this.dataSource.view();n.selectedFiles=$.map(this.select(),function(e){return t[$(e).index()]})},saveCancelBtn:i,closeBtn:!i,openModal:function(){app.isMobile()?(o.removeClass("hide"),o.show(),a.open()):o.modal("show")},closeModal:function(){app.isMobile()?a.close():o.modal("hide")},selectFile:function(e,t){var n=o.find(".fileattachment-list").data("kendoListView"),a=e.closest("[role='option']"),r=n.dataSource.getByUid(a.data("uid"));if(!t||"sendEmail"!=i)if(action=e.attr("action"),"download"===action){var l=app.config.rootURL+"FileAttachment/ViewFile/";location.href=l+r.BaseId}else if("opennewtab"===action){var s=window.open("about:blank");setTimeout(function(){s.document.body.appendChild(s.document.createElement("img")).src=e.closest(".thumbnail-file").find(".thumbnail-img img")[0].src,s.href=e.closest(".thumbnail-file").find(".thumbnail-img img")[0].src,s.focus()},0)}else{var d=$(".fileattachment-img-modal");if(d.length>1)for(var c=1;c<d.length;c++)$(d[c]).data("kendoDialog")&&$(d[c]).data("kendoDialog").destroy(),d.eq(c).remove();if(r){var u=$(".acivity-popup-window");if(u.length>1)for(var c=1;c<u.length;c++)u.eq(c).remove();d.kendoDialog({modal:!0,
title:r.DisplayName,content:"<div class='file-img-container'><img src=\"data:image/png;base64,"+r.Content.data+'" onerror="this.onerror = null; this.src = \'/Content/Images/Icons/FileUpload/document.svg\';" alt="'+r.DisplayName+'" /></div>',animation:{open:{effects:"fade:in"}}}),$(".k-window.k-widget").addClass("acivity-popup-window"),d.data("kendoDialog").open()}}}}),kendo.bind(o,n),app.isMobile()||(o.on("shown.bs.modal",function(){$(".modal-backdrop").each(function(e,t){o.before(t)}),$(document).off("focusin.modal")}),o.on("hidden.bs.modal",function(){$(".modal-backdrop").remove()})),r.open=n.openModal,r.close=n.closeModal,r.vm=n,o.find(".fileattachment-list").kendoListView({dataSource:e.viewModel.FileAttachment,template:kendo.template($("#filesTemplate").html()),selectable:i?"multiple":"single",change:n.onOpenFile,dataBound:function(){void 0==i&&"sendEmail"!=i&&o.find("a[view-image]").parent().hide(),o.find(".custom-click").on("click",function(){n.selectFile($(this),!1)}),app.isMobile()||o.find(".thumbnail-img img").on("click",function(){n.selectFile($(this),!0)})}})}()};return{template:t,getPopup:function(e,n){var a=_.template(t),r=$(a());return $("body").append(r),__fileAttachmentsPopupSingleton=new i(e,r,n)}}}),profileMainBuilder.define("forms/header/status/controller",["require","text!forms/header/status/view.html","forms/flyout/fileAttachmentsFlyout/controller"],function(e){var t=e("text!forms/header/status/view.html"),i=e("forms/flyout/fileAttachmentsFlyout/controller");return{template:t,build:function(e,n,a){var r=_.template(t);_.isUndefined(e.viewModel.FileAttachment)&&e.viewModel.set("FileAttachment",[]),e.view.viewAttachments=function(){i.getPopup(e).open()},e.view.filesCount=e.viewModel.FileAttachment.length,e.view.statusVisible=function(){return!e.newWI},document.title=e.view.title+" - "+e.view.id,a(new kendo.View(r(),{wrap:!1,model:e}).render())}}}),profileMainBuilder.define("text!forms/header/relationships/view.html",[],function(){return'<div class="parent-header-link" >\r\n    <label data-bind="text: view.controller.parentIncident"></label> :\r\n    <a data-bind="attr: { href: view.controller.editHref}, text: view.controller.editLink" target="_blank"></a>\r\n    <span class="fa fa-trash-o fa-lg cursor-pointer" data-bind="click: view.controller.unlinkParent"></span>\r\n</div>'}),profileMainBuilder.define("forms/header/relationships/controller",["require","text!forms/header/relationships/view.html"],function(e){var t=e("text!forms/header/relationships/view.html");return{template:t,build:function(e,i,n){var a=$("<div/>").attr("id","parent-header-space"),r=new kendo.View(a,{wrapper:!1});e.view.buildParentHeaderView=function(i){var n=_.template(t);e.view.controller={parentIncident:"ReleaseRecord"===e.type?localization.ParentRecord:localization.Parentincident,editHref:"/"+e.type+"/Edit/"+e.viewModel.ParentWorkItem.Id+"/",editLink:e.viewModel.ParentWorkItem.Id+"-"+e.viewModel.ParentWorkItem.Title,unlinkParent:function(){$.when(kendo.ui.ExtYesNoDialog.show({title:localization.UnlinkToParent,message:localization.SureUnlinkToParent})).done(function(t){"yes"===t.button&&(delete e.viewModel.ParentWorkItem,e.viewModel.set("isDirty",!0),r.content.hide())})}},i(n())},_.isNull(e.viewModel.ParentWorkItem)||_.isUndefined(e.viewModel.ParentWorkItem)?n(r.render()):e.view.buildParentHeaderView(function(t){r.destroy(),a.append(t),r=new kendo.View(a,{wrapper:!1,model:e}),n(r.render())})}}}),profileMainBuilder.define("text!forms/header/slo/view.html",[],function(){return'<div class="slo-container pull-right">\r\n\r\n</div>\r\n<script id="slo-template" type="text/x-kendo-template">\r\n        <li class="slo-timer"></li>\r\n        <li class="slo-icon fa #: imageClass # fa-lg"></li>\r\n        <li class="slo-title">#: Title #</li>\r\n<\/script>'}),profileMainBuilder.define("forms/header/slo/controller",["require","text!forms/header/slo/view.html"],function(require){var tpl=require("text!forms/header/slo/view.html"),definition={template:tpl,build:function(vm,node,callback){if(vm.isAnalyst){var built=_.template(tpl),view=new kendo.View(built(),{wrap:!1,init:function(){setTimeout(function(){DoWork()},100)},model:vm});view.render();var DoWork=function(){if(null!=vm.viewModel.SLO){var sloViewObj=view.element,sloObjects=vm.viewModel.SLO,sloActive="SLAInstance.Status.Active",sloPaused="SLAInstance.Status.Paused",sloMet="SLAInstance.Status.Met",sloWarning="SLAInstance.Status.Warning",sloBreached="SLAInstance.Status.Breached",sloNotReady="SLAInstance.Status.NotReady",sloContainer=$(".slo-container");for(var key in sloObjects)if(null!=sloObjects[key].DisplayName){var isMet=!1,isPaused=!1,sloTemplate=kendo.template($("#slo-template").html()),sloObj={};switch(sloObj.Id=sloObjects[key].DisplayName.replace(" ",""),sloObj.Title=sloObjects[key].DisplayName,sloObjects[key].Status){case sloActive:sloObj.imageClass="fa-clock-o text-primary";break;case sloPaused:case sloNotReady:isPaused=!0,sloObj.imageClass="fa-pause text-info";break;case sloMet:sloObj.imageClass="fa-check-circle-o text-success",isMet=!0;break;case sloWarning:sloObj.imageClass="fa-exclamation-circle text-warning";break;case sloBreached:sloObj.imageClass="fa-bell text-danger",isBreach=!0}var sloImg=sloObj.imageClass,clone=$("<ul/>").addClass("slo-status-item");clone.html(sloTemplate(sloObj)),SLOCoundown(clone,isMet,isPaused,sloObjects[key].Time.Hours,sloObjects[key].Time.Minutes,sloObjects[key].Time.Seconds,eval(sloObjects[key].WarningDate),eval(sloObjects[key].ServerDatetimeNow),!1),sloContainer.append(clone)}}},SLOCoundown=function(e,t,i,n,a,r,o,l,s){if(!t&&!s&&o<=l&&e.find(".slo-icon").attr("class","slo-icon fa fa-exclamation-circle text-warning fa-lg"),!t&&r<=0&&a<=0&&n<=0&&(s=!0,e.find(".slo-icon").attr("class","slo-icon fa fa-bell text-danger fa-lg"),e.find(".slo-timer").addClass("text-danger")),t)return void e.find(".slo-timer").html("&nbsp;");var d=Math.abs(r)<10?"0"+Math.abs(r):Math.abs(r),c=Math.abs(a)<10?"0"+Math.abs(a):Math.abs(a),u=Math.abs(n)<10?"0"+Math.abs(n):Math.abs(n);s?e.find(".slo-timer").html(""):e.find(".slo-timer").html((s?"-":"")+Math.abs(u)+":"+c+":"+d),i||(l.setSeconds(l.getSeconds()+1),r=parseInt(r)-1,r<=0&&a<=0&&n<=0?(r<=-60&&(r=0,a=parseInt(a)-1),a<=-60&&(a=0,n=parseInt(n)-1)):(a<0&&(a=59,n=parseInt(n)-1),r<0&&(r=59,a=parseInt(a)-1)),setTimeout(function(){SLOCoundown(e,t,i,n,a,r,o,l,s)},1e3))};callback(view.render())}}};return definition}),profileMainBuilder.define("text!forms/header/spacer/view.html",[],function(){return"<div></div>"}),profileMainBuilder.define("forms/header/spacer/controller",["require","text!forms/header/spacer/view.html"],function(e){var t=e("text!forms/header/spacer/view.html");return{template:t,build:function(e,i,n){var a=_.template(t);n(new kendo.View(a(),{model:e}).render())}}}),profileMainBuilder.define("text!forms/header/title/view.html",[],function(){return'<h1 class="page_title">\r\n    <span data-bind="html: title"></span>\r\n</h1>\r\n\r\n'}),profileMainBuilder.define("forms/header/title/controller",["require","text!forms/header/title/view.html"],function(e){var t=e("text!forms/header/title/view.html");return{template:t,build:function(e,i,n){var a=_.template(t);e.title=!_.isUndefined(localization[e.type])&&[e.type].length>0?localization[e.type]:e.type,document.title=e.title,n(new kendo.View(a(),{wrap:!1,model:e}).render())}}}),profileMainBuilder.define("text!forms/header/approval/view.html",[],function(){return'<div class="container-fluid" data-bind="visible: isDesktopView">\r\n    <div class="row">\r\n        <div class="col-md-6 col-xs-12">\r\n            <h1 class="page_title">\r\n                <span data-bind="text: title"></span><span>-</span><span class="uppercase" data-bind="text: workItemId"></span>\r\n                <span class="label label-info label-heading" id="statusName" data-bind="text: statusName"></span>\r\n                <span class="label label-heading" data-bind="visible: isParent"><img src="/Content/Images/Icons/WorkItemsStatus/workitem-parent-icon.svg"></span>\r\n            </h1>\r\n        </div>\r\n        <div class="col-md-6 col-xs-12">       \r\n            <div class="pull-right ra-approval-space">\r\n                \x3c!-- Support group --\x3e\r\n                <div class="pull-left">\r\n                    <div class="form-control-picker input-sm ra-input"\r\n                         data-url="/api/V3/Enum/GetList"\r\n                         data-combourl="/api/V3/Enum/GetFlatList/"\r\n                         data-bind="ciresonDropDownTree: SupportGroupEnumId, value: SupportGroupFieldValue, visible: SupportGroupVisible, click: onChangeSupportGroup, options: {disabled:disabledMAButtons}"\r\n                         data-role="SupportGroupField"\r\n                         data-placeholder="SupportGroup"></div>\r\n                </div>\r\n                <div class="pull-right">\r\n                    \x3c!--RA buttons--\x3e\r\n                    <button class="btn btn-success"\r\n                            data-bind="events: { click: onApproveClick }, disabled:disabledButtons, visible:isReviewActivity">\r\n                        <%= localization.Approve %>\r\n                    </button>\r\n                    <button class="btn btn-danger"\r\n                            data-bind="events: { click: onRejectClick }, disabled:disabledButtons, visible:isReviewActivity">\r\n                        <%= localization.Reject %>\r\n                    </button>\r\n                    \x3c!--RA buttons--\x3e\r\n                    \x3c!--MA buttons--\x3e\r\n                    <button class="btn btn-success"\r\n                            data-bind="events: { click: onCompleteClick }, disabled:disabledMAButtons, visible:isManualActivity">\r\n                        <%= localization.Completed %>\r\n                    </button>\r\n                    <button class="btn btn-danger"\r\n                            data-bind="events: { click: onFailClick }, disabled:disabledMAButtons, visible:isManualActivity">\r\n                        <%= localization.Failed %>\r\n                    </button>\r\n                    \x3c!--MA buttons--\x3e\r\n                    <span>\r\n                        <button class="btn-link" data-bind="disabled:disablePrevious, events:{click: previousClick}"><i class="fa fa-chevron-left"></i></button>\r\n                        <span data-bind="html: pageText"></span>\r\n                        <button class="btn-link" data-bind="disabled:disableNext, events:{click: nextClick}"><i class="fa fa-chevron-right"></i></button>\r\n                    </span>\r\n                </div>\r\n             </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="container-fluid" data-bind="visible: isMobileView">\r\n    <div class="row">\r\n        <div class="col-md-12 col-xs-12">\r\n            <div class="ra-approval-space pull-right">\r\n                <div>\r\n                    <button class="btn-link" data-bind="disabled:disablePrevious, events:{click: previousClick}"><i class="fa fa-chevron-left"></i></button>\r\n                    <span data-bind="html: pageText"></span>\r\n                    <button class="btn-link" data-bind="disabled:disableNext, events:{click: nextClick}"><i class="fa fa-chevron-right"></i></button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        \x3c!-- Support group --\x3e\r\n        <div class="col-md-12 col-xs-12">\r\n            <div class="form-control-picker ra-input"\r\n                 data-url="/api/V3/Enum/GetList"\r\n                 data-combourl="/api/V3/Enum/GetFlatList/"\r\n                 data-bind="ciresonDropDownTree: SupportGroupEnumId, value: SupportGroupFieldValue, visible: SupportGroupVisible, click: onChangeSupportGroup"\r\n                 data-role="SupportGroupField"\r\n                 data-placeholder="SupportGroup"></div>\r\n        </div>\r\n        \x3c!--RA buttons--\x3e\r\n        <div class="col-md-12 col-xs-12">\r\n            <div class="ra-approval-space">\r\n                <button class="btn btn-success"\r\n                        data-bind="events: { click: onApproveClick }, disabled:disabledButtons, visible:isReviewActivity">\r\n                    <%= localization.Approve %>\r\n                </button>\r\n            </div>\r\n        </div>\r\n        <div class="col-md-12 col-xs-12">\r\n            <div class="ra-approval-space">\r\n                <button class="btn btn-danger"\r\n                        data-bind="events: { click: onRejectClick }, disabled:disabledButtons, visible:isReviewActivity">\r\n                    <%= localization.Reject %>\r\n                </button>\r\n            </div>\r\n        </div>\r\n        \x3c!--RA buttons--\x3e\r\n\r\n        \x3c!--MA buttons--\x3e\r\n        <div class="col-md-12 col-xs-12">\r\n            <div class="ra-approval-space">\r\n                <button class="btn btn-success"\r\n                        data-bind="events: { click: onCompleteClick }, disabled:disabledMAButtons, visible:isManualActivity">\r\n                    <%= localization.Completed %>\r\n                </button>\r\n            </div>\r\n        </div>\r\n        <div class="col-md-12 col-xs-12">\r\n            <div class="ra-approval-space">\r\n                <button class="btn btn-danger"\r\n                        data-bind="events: { click: onFailClick }, disabled:disabledMAButtons, visible:isManualActivity">\r\n                    <%= localization.Failed %>\r\n                </button>\r\n            </div>\r\n        </div>\r\n        \x3c!--MA buttons--\x3e\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-md-6 col-xs-12">\r\n            <h1 class="page_title">\r\n                <span data-bind="text: title"></span><span>-</span><span class="uppercase" data-bind="text: workItemId"></span>\r\n                <span class="label label-info label-heading" id="statusname" data-bind="text: statusName"></span>\r\n                <span class="label label-heading" data-bind="visible: isParent"><img src="/Content/Images/Icons/WorkItemsStatus/workitem-parent-icon.svg"></span>\r\n            </h1>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n'}),profileMainBuilder.define("forms/header/approval/controller",["require","text!forms/header/approval/view.html"],function(e){var t=e("text!forms/header/approval/view.html");return{template:t,build:function(e,i,n){var a=_.template(t),r="107fc6bd-2bb3-0282-4425-f43b5b32ef13",o="0e856c6c-04e5-0a8e-6041-bc7715b4747e",l="dae75d12-89ac-a8d8-4fe3-516c2a6a26f7";e.view.approvalModel=new kendo.observable({decisionEnumId:null,comments:"",onRejectClick:function(){e.view.approvalModel.decisionEnumId=r,this.updateStatus()},onApproveClick:function(){e.view.approvalModel.decisionEnumId=o,this.updateStatus()},onCompleteClick:function(){var t={Id:app.constants.workItemStatuses.ManualActivity.Completed,Name:localization.Completed};e.view.approvalModel.updateManualActivity(t)},onFailClick:function(){var t={Id:app.constants.workItemStatuses.ManualActivity.Failed,Name:localization.Failed};e.view.approvalModel.updateManualActivity(t)},updateStatus:function(){e.view.approvalModel.isReviewActivity&&e.view.approvalModel.updateReviewActivity(),e.view.approvalModel.isManualActivity&&e.view.approvalModel.updateManualActivity()},updateReviewActivity:function(){$.when(kendo.ui.ExtYesNoTextAreaDialog.show({title:localization.Comments,message:localization.DoYouHaveComments,required:!0,height:250})).done(function(t){"yes"===t.button&&(e.view.approvalModel.comments=t.input),_.each(pageForm.viewModel.Reviewer,function(t){var i=_.find(pageForm.userGroup,function(e){return!_.isUndefined(t.User)&&t.User.BaseId==e.Id});if(t.Decision.Id==l&&(!_.isUndefined(t.User)&&t.User.BaseId==session.user.Id||!_.isUndefined(i))){var n="";n=_.isNull(t.Comments)?e.view.approvalModel.comments:t.Comments+" "+e.view.approvalModel.comments,t.VotedBy={},t.VotedBy.BaseId=session.user.Id,t.Decision.set("Id",e.view.approvalModel.decisionEnumId),t.set("Comments",n),t.set("DecisionDate",(new Date).toISOString())}}),pageForm.viewModel.ParentWorkItem&&delete pageForm.viewModel.ParentWorkItem,e.view.approvalModel.save()})},updateManualActivity:function(t){$.when(kendo.ui.ExtYesNoTextAreaDialog.show({title:session.consoleSetting.RequireImplementationNotes?localization.ImplementationdetailsRequired:localization.Implementationdetails,buttons:[{name:localization.Save,click:function(i){var n=$("#extInputDialog .k-ext-input-dialog-input"),a=$("#extInputDialog .k-ext-input-dialog-input").val(),r=_.isNull(pageForm.viewModel.Notes)?"":pageForm.viewModel.Notes;i.dialog.options.required&&0==n.val().length?n.addClass(i.dialog.options.requiredCss):(pageForm.viewModel.ParentWorkItem&&delete pageForm.viewModel.ParentWorkItem,pageForm.viewModel.set("Status",t),pageForm.viewModel.set("Notes",r+"\n"+a),e.view.approvalModel.save(),i.dialog.close())},cls:"btn-primary"},{name:localization.Cancel,click:function(e){e.dialog.close()}}],required:session.consoleSetting.RequireImplementationNotes,requiredCss:"k-ext-required"}))},save:function(){var t=encodeURIComponent(JSON.stringify({isDirty:!0,current:pageForm.viewModel.toJSON(),original:pageForm.jsonRaw}));$.ajax({type:"POST",dataType:"text",url:pageForm.saveUrl,data:"formJson="+t,success:function(t,i,n){if(location.reload(),t.search("loginForm")<0){var a="0e856c6c-04e5-0a8e-6041-bc7715b4747e"==e.view.approvalModel.decisionEnumId?localization.ReviewActivityApprovedMessage:localization.ReviewActivityRejectedMessage;"System.WorkItem.Activity.ManualActivity"==pageForm.viewModel.ClassName&&(a=pageForm.viewModel.Status.Id==app.constants.workItemStatuses.ManualActivity.Completed?localization.ManualActivityCompletedMessage:localization.ManualActivityFailedMessage),app.lib.message.add(a.replace("{0}",e.viewModel.Id),"success"),app.lib.handleMessages()}else window.location="/Login/Login?ReturnUrl="+window.location.pathname},error:function(e,t,i){if(409==e.status)$.when(kendo.ui.ExtYesNoDialog.show({title:localization.DataConflict,message:localization.DataConflictError+"<br/><br/><small>("+localization.DataConflictDescription+")</small>",icon:"fa fa-exchange text-danger",width:"500px",height:"175px"})).done(function(e){"yes"===e.button?window.open(window.location.pathname):location.href=window.location.pathname});else if(503==e.status){var n=e.responseText;app.lib.log(n);var a=localization.ReconnectRequired;n.exception&&n.exception.length>0&&(a=n.exception),kendo.ui.ExtAlertDialog.show({title:localization.Failed,message:a,icon:"fa fa-times-circle text-danger"})}else if(403==e.status){var n=e.responseText;app.lib.log(n);var a=localization.RequestFailed;n.exception&&n.exception.length>0&&(a=n.exception),kendo.ui.ExtAlertDialog.show({title:localization.Failed,message:a,icon:"fa fa-times-circle text-danger"})}else{console&&app.lib.log(localization.RequestFailed),app.lib.log(i);var n=e.responseText;app.lib.log(n);var a=localization.RequestFailed;n.exception&&n.exception.length>0&&(a=n.exception),kendo.ui.ExtAlertDialog.show({title:localization.ErrorDescription,message:a,icon:"fa fa-exclamation"})}},processData:!1,async:!1})},pageDataSource:new kendo.data.DataSource({serverFiltering:!0,serverSorting:!0,transport:{read:{url:"bfd90aaa-80dd-0fbb-6eaf-65d92c1d8e36"==pageForm.viewModel.ClassTypeId.toLowerCase()?"/api/V3/WorkItem/GetGridWorkItemsMyApprovals/":"/api/V3/WorkItem/GetGridWorkItemsMyManualActivities/",data:{userId:session.user.Id,isScoped:session.user.Security.IsWorkItemScoped,showInActives:!1},cache:!1}},requestEnd:function(t){e.view.approvalModel.updatePageDetails(t.response)}}),updatePageDetails:function(t){var i=1,n=t?t.length:0;_.find(t,function(t,n){t.Id==e.viewModel.Id&&(i=n)});var a=i+1+" / "+n;e.view.approvalModel.set("currentPage",i),e.view.approvalModel.set("toatPage",n),e.view.approvalModel.set("pageText",a),e.view.approvalModel.set("disablePrevious",0==i),e.view.approvalModel.set("disableNext",i==n-1);var s="11fc3cef-15e5-bca4-dee0-9c1155ec8d83"===e.viewModel.Status.Id;if(s&&(_.isUndefined(e.viewModel.reviewDetails)||e.viewModel.reviewDetails.fullDetails.Decision.Id!=o&&e.viewModel.reviewDetails.fullDetails.Decision.Id!=r||e.viewModel.reviewDetails.fullDetails.User.BaseId!=session.user.Id)){var d=_.find(pageForm.viewModel.Reviewer,function(e){if(_.isUndefined(e.User))return null;var t=_.find(pageForm.userGroup,function(t){return e.User.BaseId==t.Id});return!(_.isUndefined(e.User)||e.Decision.Id!=l||e.User.BaseId!=session.user.Id&&_.isUndefined(t))});if(!d)return;(!s||_.isUndefined(d)||_.isNull(d))&&e.view.approvalModel.set("disabledButtons",!0)}else e.view.approvalModel.set("disabledButtons",!0)},nextClick:function(){var t=e.view.approvalModel.get("currentPage")+1;e.view.approvalModel.navigate(t)},previousClick:function(){var t=e.view.approvalModel.get("currentPage")-1;e.view.approvalModel.navigate(t)},navigate:function(t){e.view.approvalModel.pageDataSource.read();var i=e.view.approvalModel.pageDataSource.data(),n=i[t],a=e.view.approvalModel.isReviewActivity?"/ReviewActivity/Approval/":"/ManualActivity/Complete/",r=a+n.Id;location.href=r},onChangeSupportGroup:function(){e.viewModel[pageForm.MASupportGroupField]=e.view.approvalModel.SupportGroupFieldValue},currentPage:0,toatPage:0,pageText:"",disablePrevious:!1,disableNext:!1,title:e.view.title,workItemId:e.viewModel.Id,statusVisible:e.view.statusVisible,statusName:e.viewModel.Status.Name,isParent:e.viewModel.IsParent,isDesktopView:!app.isMobile(),isMobileView:app.isMobile(),disabledButtons:!1,reviewResult:null,reviewId:0,SupportGroupVisible:""!==pageForm.MASupportGroupField,SupportGroupEnumId:pageForm.MASupportGroupGuid,SupportGroupFieldValue:e.viewModel[pageForm.MASupportGroupField],isManualActivity:"System.WorkItem.Activity.ManualActivity"==pageForm.viewModel.ClassName,isReviewActivity:"System.WorkItem.Activity.ReviewActivity"==pageForm.viewModel.ClassName,disabledMAButtons:pageForm.viewModel.Status.Id==app.constants.workItemStatuses.ManualActivity.Completed||pageForm.viewModel.Status.Id==app.constants.workItemStatuses.ManualActivity.Failed}),e.view.approvalModel.pageDataSource.read(),n(new kendo.View(a(),{wrap:!1,model:e.view.approvalModel}).render())}}}),profileMainBuilder.define("forms/headerBuilder",["forms/header/status/controller","forms/header/relationships/controller","forms/header/slo/controller","forms/header/spacer/controller","forms/header/title/controller","forms/header/approval/controller"],function(status,relationships,slo,spacer,title,approval){var definition={build:function(vm,callback){_.each(vm.headerTemplate.rows,function(row){var rowElm=$("<div/>").addClass("row");_.each(row.columns,function(column){var colElm=$("<div/>").addClass(column.Class);if(eval("var _obj = "+column.View+";"),!_obj)throw Exception(column.View+" is not part of the templating system");_obj.build(vm,column,function(e){colElm.append(e),colElm.appendTo(rowElm)})}),callback(rowElm)})}};return definition}),profileMainBuilder.define("text!forms/structure/formPanel/view.html",[],function(){return'<div class="form-panel">\r\n\r\n</div>'}),profileMainBuilder.define("forms/structure/formPanel/controller",["require","text!forms/structure/formPanel/view.html"],function(e){var t=e("text!forms/structure/formPanel/view.html");return{template:t,build:function(e){e(_.template(t)())}}}),profileMainBuilder.define("text!forms/structure/formPanelFull/view.html",[],function(){return'<div class="form-panel">\r\n\r\n</div>'}),profileMainBuilder.define("forms/structure/formPanelFull/controller",["require","text!forms/structure/formPanelFull/view.html"],function(e){var t=e("text!forms/structure/formPanelFull/view.html");return{template:t,build:function(e){e(_.template(t)())}}}),profileMainBuilder.define("text!forms/structure/customFieldGroup/view.html",[],function(){return'<div class="row">\r\n    <div class="panel panel-default no-shadow">\r\n        <div class="panel-heading"><%= name %></div>\r\n        <div class="panel-body append-here">\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),profileMainBuilder.define("forms/structure/customFieldGroup/controller",["require","text!forms/structure/customFieldGroup/view.html"],function(e){var t=e("text!forms/structure/customFieldGroup/view.html");return{template:t,build:function(e,i,n){var a=_.template(t);!_.isUndefined(localization[i.name])&&[i.name].length>0&&(i.name=localization[i.name]),(_.isUndefined(i.Visible)||i.Visible)&&n(a(i))}}}),profileMainBuilder.define("text!forms/structure/customFieldGroupRow/view.html",[],function(){return'<div class="row"></div>'}),profileMainBuilder.define("forms/structure/customFieldGroupRow/controller",["require","text!forms/structure/customFieldGroupRow/view.html"],function(e){var t=e("text!forms/structure/customFieldGroupRow/view.html");return{template:t,build:function(e,i,n){n(t)}}}),profileMainBuilder.define("text!forms/structure/columnField/view.html",[],function(){return'<div class="col-md-<%= ColSize %>"></div>'}),profileMainBuilder.define("forms/structure/columnField/controller",["require","text!forms/structure/columnField/view.html"],function(e){var t=e("text!forms/structure/columnField/view.html");return{template:t,build:function(e,i,n){n(_.template(t)(i))}}}),profileMainBuilder.define("text!forms/structure/tab/view.html",[],function(){return'<div class="tab-content"></div>'}),profileMainBuilder.define("forms/structure/tab/controller",["require","text!forms/structure/tab/view.html"],function(e){var t=e("text!forms/structure/tab/view.html");return{template:t,build:function(e,i,n){n(_.template(t)(i))}}}),profileMainBuilder.define("text!forms/structure/tabPane/view.html",[],function(){return'<div class="tab-pane <%= active %>" id="<%= tabId %>"></div>   '}),profileMainBuilder.define("forms/structure/tabPane/controller",["require","text!forms/structure/tabPane/view.html"],function(e){var t=e("text!forms/structure/tabPane/view.html");return{template:t,build:function(e,i,n){n(_.template(t)(i))}}}),profileMainBuilder.define("text!forms/structure/tabNavigation/view.html",[],function(){return'<ul class="nav nav-pills" id="myTab" data-bind="tabDrop:true"></ul>'}),profileMainBuilder.define("text!forms/structure/tabNavigation/mobile.html",[],function(){return'<div class="nav-dropdown">\r\n    <span class="nav-dropdown-default"></span>\r\n    <div class="nav-dropdown-trigger">\r\n        <i class="fa fa-sort-desc"></i>\r\n    </div>\r\n    <div class="nav-dropdown-content">\r\n        <ul id="myTab" data-bind="navDrop:true"></ul>\r\n    </div>\r\n</div>\r\n'}),profileMainBuilder.define("forms/structure/tabNavigation/controller",["require","text!forms/structure/tabNavigation/view.html","text!forms/structure/tabNavigation/mobile.html"],function(e){var t=e("text!forms/structure/tabNavigation/view.html"),i=e("text!forms/structure/tabNavigation/mobile.html"),n=app.isMobile()?i:t;return{template:n,build:function(e,t,i){i(_.template(n)())}}}),profileMainBuilder.define("text!forms/structure/tabData/view.html",[],function(){return'<li class="<%= active %>"><a href="#<%= tabId %>" data-toggle="tab" data-cid="<%= cid %>"><%= name %></a></li>'}),profileMainBuilder.define("text!forms/structure/tabData/mobile.html",[],function(){return'<li value="<%= tabId %>" data-cid="<%= cid %>" data-toggle="tab"\r\n      <% if ( active ){ %>\r\n         class="selected" \r\n       <% } %>\r\n         > <%= name %>\r\n</li>\r\n\r\n'}),profileMainBuilder.define("forms/structure/tabData/controller",["require","text!forms/structure/tabData/view.html","text!forms/structure/tabData/mobile.html"],function(e){var t=e("text!forms/structure/tabData/view.html"),i=e("text!forms/structure/tabData/mobile.html"),n=app.isMobile()?i:t;return{template:n,build:function(e,t,i){var a=_.template(n);t.cid=t.name,!_.isUndefined(localization[t.name])&&[t.name].length>0&&(t.name=localization[t.name]),i(a(t))}}}),profileMainBuilder.define("text!forms/predefined/actionLog/view.html",[],function(){
return'<div data-control="actionLog">\r\n    <div class="row" data-bind="visible:isDesktop">\r\n        <div class="col-md-12">\r\n            <div class="form-group">\r\n                <label for="commentBoxEditor" data-localize="Comment"></label>\r\n                <textarea id="commentBoxEditor" class="k-textbox form-control input-sm action-log-textarea" data-bind="value: commentBoxHTML"\r\n                <% if ( Disabled ){ %>\r\n                disabled\r\n                <% } %>>\r\n                    </textarea>\r\n            </div>\r\n        </div>\r\n        <div class="col-md-12">\r\n            <div class="pull-left">\r\n                <span data-bind="text: charactersRemaining"></span>\r\n                <span data-localize="CharactersRemaining"> </span>\r\n            </div>\r\n            <div class="pull-right">\r\n                <button type="button" data-bind="click: addComment, enabled: addEnabled" class="k-button btn btn-primary action-log-add-button" data-localize="Add"></button>\r\n            </div>\r\n            <div data-bind="visible: isAnalyst" class="pull-right checkbox action-log-private">\r\n                <input type="checkbox" data-bind="checked: isPrivate" id="actionLogisPrivate" \r\n                       <% if (Disabled) { %>\r\n                        disabled\r\n                    <% } %>>\r\n                </input>\r\n\r\n                <label class="label-middle-align checkbox-inline checkbox-label" data-localize="IsPrivate" for="actionLogisPrivate" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="row" data-bind="visible:isMobile">\r\n        <div class="action-log-mobile">\r\n            <textarea id="commentBoxEditorMobile" class="k-textbox form-control input-sm action-log-textarea" data-bind="value: commentBoxHTML"\r\n            <% if (Disabled) { %>disabled<% } %>></textarea>\r\n            <div class="action-log-mobile-buttons">\r\n                <button type="button" data-bind="click: addComment" data-localize="Add Comment" class="col-xs-7 btn btn-primary"></button>\r\n                <div data-bind="visible: isAnalyst" class="pull-left checkbox checkbox-inline action-log-mobile-private">\r\n                    <input type="checkbox" data-bind="checked: isPrivate" id="actionLogisPrivate"><% if (Disabled) { %>\r\n                    disabled\r\n                    <% } %>></input>\r\n                    <label class="label-middle-align control-label" data-localize="IsPrivate" for="actionLogisPrivate" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n\r\n        <div class="col-md-12" data-bind="visible:isDesktop">\r\n\r\n            <div data-control-grid="actionLogGrid" class="inline-spacing"></div>\r\n\r\n            \x3c!-- kendo details template used by action grid --\x3e\r\n            <script data-id="commentDetailTemplate" type="text/kendo-tmpl">\r\n                <p name="CommentBoxDetail" class="action-log-comment">#=DescriptionDisplay#</p>\r\n            <\/script>\r\n        </div>\r\n        <div data-bind="visible:isMobile">\r\n            <div data-role="listview" data-bind="source: actionLogSource" data-template="action-log-grid-mobile-template" class="action-log-mobile-grid "></div>\r\n            <script type="text/x-kendo-template" id="action-log-grid-mobile-template">\r\n                <div class="col-md-12 action-log-info">\r\n                    <div class="row">\r\n                        <div class="col-xs-2 action-log-icon">\r\n                            <img src="#:data.Image#" alt="#:data.Image#" />\r\n                        </div>\r\n                        <div class="col-xs-10 action-log-details">\r\n                            <p>\r\n                                #: EnteredBy # &middot; #: (EnteredDate) ? kendo.toString(new Date(EnteredDate), \'d\'):\'\' #\r\n                            </p>\r\n                            <p> #: Title #</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row">\r\n                        <div class="col-xs-offset-2 col-xs-10 action-log-content">\r\n                            #: Description #\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            <\/script>\r\n        </div>\r\n    </div>\r\n</div>'}),profileMainBuilder.define("forms/predefined/actionLog/controller",["require","text!forms/predefined/actionLog/view.html"],function(e){var t=e("text!forms/predefined/actionLog/view.html");return{template:t,build:function(e,i,n){var a=_.template(t),r={Disabled:i.disabled};$.extend(!0,r,i),n(a(r))}}}),profileMainBuilder.define("text!forms/predefined/fileAttachments/view.html",[],function(){return'<div class="row">\r\n    <div class="col-md-12 fileAttachmentGrid" data-control="fileAttachmentGrid" data-control-bind="FileAttachment"\r\n\r\n        <% if ( Disabled ){ %>\r\n        disabled\r\n        <% } %>\r\n\r\n        >\r\n    </div>\r\n</div>\r\n'}),profileMainBuilder.define("forms/predefined/fileAttachments/controller",["require","text!forms/predefined/fileAttachments/view.html"],function(e){var t=e("text!forms/predefined/fileAttachments/view.html");return{template:t,build:function(e,i,n){var a=_.template(t);!_.isUndefined(localization[i.name])&&[i.name].length>0&&(i.name=localization[i.name]);var r={Disabled:i.disabled};$.extend(!0,r,i),n(a(r))}}}),profileMainBuilder.define("text!forms/predefined/affectedItems/view.html",[],function(){return'<div data-bind="templateResources:\'resources\'" style="display:none">\r\n    <div data-template-name="mobileGridTemplate" class="">\r\n        \x3c!-- repeated template content here --\x3e\r\n        <div class="gridcard gridcard--form">\r\n            <p class="gridcard__title">#: DisplayName #</p>\r\n            <div class="gridcard__detailblock">\r\n                <p>#: (AssetStatus.Name!=null) ? AssetStatus.Name : "" #</p>\r\n                <p># if (AssetStatus.Name!=null && AssetStatus.Name!="") { # &middot # } # </p>\r\n                <p>#: (Path!=null ) ? Path : "" # </p>\r\n                <p># if (Path!=null && Path!="") { # &middot # } # </p>\r\n\r\n            </div>\r\n            <div class="gridcard__detailblock">\r\n                <a class="k-delete-button">#: localization.Remove #</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="row">\r\n    <div class="col-md-12 affecteditems-grid">\r\n        <div class="row">\r\n            <div class="col-md-6">\r\n                <div class="form-group">\r\n                    <label class="control-label"><%= localization.Configurationitem %></label>\r\n                    <div class="two-action-input-group">\r\n                        <input data-role="combobox" class="search-combo"\r\n                               data-placeholder="<%= localization.ChooseOne %>"\r\n                               data-value-primitive="true"\r\n                               data-text-field="Text"\r\n                               data-value-field="Value"\r\n                               data-filter="contains"\r\n                               data-auto-bind="false"\r\n                               data-min-length="3"\r\n                               data-bind="value: view.affectedItemController.selectedConfigItem, source: view.affectedItemController.configItemDataSource, events:{change:view.affectedItemController.onConfigItemChange }"\r\n                               data-cid="ci-searchbox" />\r\n                        <span class="search"\r\n                              data-bind="events:{click: view.affectedItemController.searchConfigItem}"\r\n                              data-cid="affecteditemssearchicon">\r\n                            <i class="fa fa-search"></i>\r\n                        </span>\r\n                        <button data-role="button" class="search-button two-action-input-group__primary-action"\r\n                                data-bind="events:{click: view.affectedItemController.addConfigItem}"\r\n                                data-cid="affectedItemsSearchBoxAddButton">\r\n                            <%= localization.Add %>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-6">\r\n                <div class="form-group affected-user-item-search" data-bind="visible: view.affectedItemController.isUserCIVisible">\r\n                    <label class="control-label"><%= localization.AffectedUserItems %></label>\r\n                    <div class="two-action-input-group">\r\n                        <input data-role="combobox" class="search-combo"\r\n                               data-placeholder="<%= localization.ChooseOne %>"\r\n                               data-value-primitive="true"\r\n                               data-text-field="Text"\r\n                               data-value-field="Value"\r\n                               data-filter="contains"\r\n                               data-auto-bind="false"\r\n                               data-bind="value: view.affectedItemController.selectedUserConfigItem, source: view.affectedItemController.userConfigItemDataSource, events:{change:view.affectedItemController.onUserConfigItemChange }"\r\n                               data-cid="auitems-searchbox" />\r\n                        <button class="two-action-input-group__primary-action" data-role="button"\r\n                                data-bind="events:{click: view.affectedItemController.addUserConfigItem}"\r\n                                data-cid="affectedItemsComboBoxAddButton">\r\n                            <%= localization.Add %>\r\n\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div data-role="grid"\r\n             data-bind="visible: view.affectedItemController.isDesktopView, source: view.affectedItemController.dataSource, events:{dataBinding: view.affectedItemController.onDataBinding}"\r\n             data-selectable="false"\r\n             data-sortable="true"\r\n             data-filterable="true"\r\n             data-scrollable="false"\r\n             data-column-menu="true"\r\n             data-pageable="false"\r\n             data-editable="{mode: \'incell\', create: false, update: false}"\r\n             data-columns=\'[\r\n                    { title: "", width: "1%", template: "\\u003cdiv data-base-id=\\"#=BaseId#\\" class=\\"aci-context-menu open-modal pull-right\\" data-bind=\\"visible: view.affectedItemController.isSlideOut\\"\\u003e\\u003ci class=\\"fa fa-info-circle\\"\\u003e\\u003c/i\\u003e\\u003c/div\\u003e\\u003cdiv class=\\"open-modal pull-right\\" data-bind=\\"visible: view.affectedItemController.isMoreInfo, events:{click:view.affectedItemController.showMoreInfo }\\"\\u003e\\u003ci class=\\"fa fa-info-circle\\"/\\u003e\\u003c/i\\u003e\\u003c/div\\u003e"},\r\n                    { field: "DisplayName", title: localization.DisplayName, width: "50%"},\r\n                    { field: "BaseId", title: localization.BaseId, width: "25%", hidden: true },\r\n                    { field: "Path", title: localization.Path, width: "25%" },\r\n                    { field: "AssetStatus.Name", title: localization.Status, width: "25%" },\r\n                    { title: localization.Actions, width: "15%", command: [{ name: "destroy", buttonType: "ImageAndText", text: localization.Remove, className:"custom__grid-remove" }] }\r\n                ]\'>\r\n        </div>\r\n        <div data-bind="visible: view.affectedItemController.isMobileView">\r\n            <div data-bind="mobileGrid: HasRelatedWorkItems" data-template-name="mobileGridTemplate" class="mobile-grid-parent"></div>\r\n        </div>\r\n        \x3c!--context menu for info icon--\x3e\r\n        <ul id="tccmenu" data-role="contextmenu"\r\n            data-filter=".aci-context-menu"\r\n            data-show-on="click"\r\n            data-bind="events:{select:view.affectedItemController.onContextmenuSelect, activate:view.affectedItemController.onContextmenuActivate}">\r\n        </ul>\r\n   </div>\r\n</div>'}),profileMainBuilder.define("text!forms/popups/multipleObjectPickerPopup/view.html",[],function(){return'<div id="MultiObjectPickerWindow" class="cireson-window defined-form task-window" data-cid="MultiObjectPickerWindow">\r\n    <div class="cireson-window--wrapper">\r\n        <div class="cireson-window--body">\r\n            <div class="row">\r\n                <div class="col-md-5">\r\n                    <div class="form-group">\r\n                        <label><%= localization.SearchText %></label>\r\n                        <span class="k-textbox k-space-right object-picker-search">\r\n                            <input type="text" data-objectpicker-action="search" data-objectpicker-action-value="search" value="" data-cid="MultiObjectPickerWindowSearchBox" />\r\n                            <span data-objectpicker-action="search" class="fa fa-search text-primary cursor-pointer"></span>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div class="col-md-5">\r\n                    <div class="form-group">\r\n                        <label><%= localization.SearchObjectText %></label>\r\n                        <input type="text" data-objectpicker-control="comboBox">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <label><%= localization.SelectObjects %></label>\r\n\r\n            <div class="objectPicker-container">\r\n                <div class="k-widget k-grid k-secondary" data-objectpicker-control="objectPickerGrid"></div>\r\n            </div>\r\n\r\n            <div class="objectPicker-actions">\r\n                <button data-objectpicker-action="addObject" class="btn btn-primary k-button" data-cid="multiobject-picker-add-object-btn"><%= localization.Add %></button>\r\n                <button data-objectpicker-action="removeObject" class="btn btn-danger k-button" data-cid="multiobject-picker-remove-object-btn"><%= localization.Remove %></button>\r\n            </div>\r\n\r\n            <div class="k-widget k-grid k-secondary objectPicker-grid2-container" data-objectpicker-control="objectPickerGrid2"></div>\r\n        </div>\r\n        <div class="cireson-window--footer window-buttons">\r\n            <button data-role="button"\r\n                    class="btn btn-primary"\r\n                    data-bind="events: { click: save }"\r\n                    data-cid="multiobject-picker-ok-btn">\r\n                <%= localization.OK %>\r\n            </button>\r\n            <button data-role="button"\r\n                    class="btn btn-default"\r\n                    data-bind="events: { click: cancel }"\r\n                    data-cid="multiobject-picker-cancel-btn">\r\n                <%= localization.Cancel %>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>'}),profileMainBuilder.define("forms/popups/multipleObjectPickerPopup/controller",["require","text!forms/popups/multipleObjectPickerPopup/view.html"],function(e){var t=e("text!forms/popups/multipleObjectPickerPopup/view.html"),i=function(e,t,i,n,a,r){var o,l,s=this,d=e,t=t,i=i,c=n,u=a;this.setSaveCallback=function(e){$(s).unbind("save").bind("save",function(t,i){e(i)})},this.setCancelCallback=function(e){$(s).unbind("cancel").bind("cancel",function(t,i){e(i)})};var p=function(){},f=function(){var e=o.grid2.dataSource.data();e&&($.each(e,function(e,t){_.isUndefined(t.BaseId)&&(t.BaseId=t.Id),$(s).trigger("save",t)}),b())},m=function(){$(s).trigger("cancel"),b()},v=function(){o.actions.clearSearchText(),o.gridFunctions.clear(),o.kendoWindow.open()},b=function(){o.kendoWindow.close()},h=function(){o=new g},g=function(){var e,n,a,r,o,l=this,s=_.isUndefined(c)||_.isNull(c)?"/Search/GetSearchObjectsWithEnumObjectByClassId":c,p=new kendo.data.ObservableArray([]),o=new function(){this.addObject=function(){for(var e=n.select(),t=0,i=e.length;t<i;t++){var a=n.dataItem(e[t]);a&&m.addItem(a)}},this.removeObject=function(){for(var e=a.select(),t=0,i=e.length;t<i;t++)a.removeRow(e[t])},this.search=function(){var e=d.find('[data-objectpicker-action-value="search"]');r=e?e.val():"",n.dataSource.read(),_.isUndefined(u)||_.isNull(u)||n.dataSource.filter(u),n.dataSource.page(1)},this.clearSearchText=function(){d.find('[data-objectpicker-action-value="search"]').val(""),r=""}};l.actions=o;var f=new function(){this.searchFilter=function(){return{searchFilter:r,classId:v.getIdValue,columnNames:i}},this.onChange=function(){},this.onDataBound=function(){1==n.dataSource.totalPages()&&n.pager.element.hide()},this.clear=function(){for(l.grid.dataSource.data([]);0!=p.length;)$.each(l.grid2.items(),function(e,t){l.grid2.removeRow(t)})},this.dblClick=function(){m.addItem(n.dataItem($(this)))}};l.gridFunctions=f;var m=new function(){this.addItem=function(e){var t=!0;$.each(p,function(i,n){e.uid==n.uid&&(t=!1)}),t&&p.push(e)}},v=new function(){this.getIdValue=function(){var e=l.combo.value();return _.isNull(e)?t.toLowerCase():e}},b=function(){e=d.kendoCiresonWindow({title:localization.SelectObject,content:null,width:750,height:710,actions:["Close"],activate:function(){l.combo.value(t.toLowerCase())}}).data("kendoWindow")},h=function(){l.combo=d.find("[data-objectpicker-control='comboBox']").kendoComboBox({dataSource:{transport:{prefix:"",read:{url:"/Search/GetSearchClasses",data:{classId:t}}},schema:{errors:"Errors"}},dataTextField:"Item2",autoBind:!0,dataValueField:"Item1",filter:"contains"}).data("kendoComboBox")},g=function(){var e=d.find('[data-objectpicker-control="objectPickerGrid"]');n=e.kendoGrid(function(){var e={transport:{prefix:"",read:{url:s,data:f.searchFilter,type:"GET",cache:!1}},pageSize:5,type:"aspnetmvc-ajax",schema:{data:"Data",total:"Total",errors:"Errors"}},i=[{title:"Id",hidden:!0,field:"Id",filterable:{},encoded:!0},{title:localization.DisplayName,attributes:{class:"grid-highlight-column"},field:"DisplayName",filterable:{},encoded:!0},{title:localization.Class,field:"FullClassName",hidden:app.isMobile(),filterable:{},encoded:!0},{title:localization.Path,field:"Path",hidden:app.isMobile(),filterable:{},encoded:!0}],n=[{title:localization.FirstName,attributes:{class:"grid-highlight-column"},field:"FirstName",filterable:{},encoded:!0},{title:localization.LastName,attributes:{class:"grid-highlight-column"},field:"LastName",filterable:{},encoded:!0},{title:localization.Title,field:"Title",filterable:{},encoded:!0},{title:localization.UserName,field:"UserName",filterable:{},encoded:!0},{title:localization.Domain,field:"Domain",filterable:{},encoded:!0},{title:localization.Company,field:"Company",filterable:{},encoded:!0}];return{columns:"10a7f898-e672-ccf3-8881-360bfb6a8f9a"==t.toLowerCase()?n:i,sortable:{mode:"multiple"},selectable:"Multiple, Row",filterable:{operators:{string:{startswith:localization.Startswith,contains:localization.Contains,eq:localization.Isequalto,neq:localization.Isnotequalto}}},columnMenu:!1,autoBind:!1,dataSource:e,pageable:!0}}()).data("kendoGrid"),f.onDataBound(),e.on("dblclick","tbody>tr",f.dblClick),l.grid=n},w=function(){var e=d.find('[data-objectpicker-control="objectPickerGrid2"]'),i={transport:{prefix:"",read:{url:""}},pageSize:5,type:"aspnetmvc-ajax",data:{Data:p,Total:p.length},schema:{data:"Data",total:"Total",errors:"Errors"}},n=[{title:"Id",hidden:!0,field:"Id",filterable:{},encoded:!0},{title:localization.DisplayName,attributes:{class:"grid-highlight-column"},field:"DisplayName",filterable:{},encoded:!0},{title:localization.Class,field:"FullClassName",hidden:app.isMobile(),filterable:{},encoded:!0},{title:localization.Path,field:"Path",hidden:app.isMobile(),filterable:{},encoded:!0}],r=[{title:localization.FirstName,attributes:{class:"grid-highlight-column"},field:"FirstName",filterable:{},encoded:!0},{title:localization.LastName,attributes:{class:"grid-highlight-column"},field:"LastName",filterable:{},encoded:!0},{title:localization.Title,field:"Title",filterable:{},encoded:!0},{title:localization.UserName,field:"UserName",filterable:{},encoded:!0},{title:localization.Domain,field:"Domain",filterable:{},encoded:!0},{title:localization.Company,field:"Company",filterable:{},encoded:!0}];a=e.kendoGrid({columns:"10a7f898-e672-ccf3-8881-360bfb6a8f9a"==t.toLowerCase()?r:n,pageable:!0,dataSource:i,selectable:"Multiple, Row",filterable:{operators:{string:{startswith:localization.Startswith,contains:localization.contains,eq:localization.Isequalto,neq:localization.Isnotequalto}}},columnMenu:!1}).data("kendoGrid"),l.grid2=a},y=function(){d.find("[data-objectpicker-action]").each(function(e,t){var i=$(this).attr("data-objectpicker-action"),n=t.nodeName.toLowerCase();o[i]||app.lib.exception("The method action."+i+" does not exist"),"input"==n&&"text"==$(this).attr("type").toLowerCase()||"textarea"==n?$(this).bind("enter",o[i]):$(this).click(o[i])})};!function(){b(),h(),g(),w(),y(),l.kendoWindow=e}()};!function(){l=kendo.observable({save:f,cancel:m}),kendo.bind(d,l),h(),p(),s.open=v,s.close=b}()};return{template:t,getPopup:function(e,n,a,r,o){var l=_.template(t),s=$(l()),d=$('[datasingleton="objectPickerPopup"]'),c=d.data("objectPickerPopup");return d.length||(d=s,$("body").append(d),c=new i(d,e,n,a,r,o),d.data("objectPickerPopup",c)),c}}}),profileMainBuilder.define("forms/predefined/affectedItems/controller",["require","text!forms/predefined/affectedItems/view.html","forms/popups/multipleObjectPickerPopup/controller"],function(e){var t=e("text!forms/predefined/affectedItems/view.html"),i=e("forms/popups/multipleObjectPickerPopup/controller");return{template:t,build:function(e,n,a){var r=_.template(t),o={Disabled:!_.isUndefined(n.disabled)&&n.disabled};$.extend(!0,o,n);var l=(new kendo.View,!1);_.isUndefined(e.HasRelatedWorkItems)&&e.set("HasRelatedWorkItems",new kendo.data.ObservableArray([]));var s=e.get("HasRelatedWorkItems");e.view.affectedItemController=new kendo.observable({addConfigItem:function(e){_.isUndefined(this.selectedConfigItemId)||p(this.selectedConfigItemId)},searchConfigItem:function(){var e=i.getPopup("62F0BE9F-ECEA-E73C-F00D-3DD78A7422FC","DisplayName,Path,Status",null,null,!0);e.setSaveCallback(function(e){p(e.BaseId)}),e.open()},selectedConfigItemId:"",selectedConfigItem:"",configItemDataSource:new kendo.data.DataSource({serverFiltering:!0,transport:{read:{url:function(e){return"/api/V3/Config/GetAffectedItemsList?itemFilter="+(e.filter.filters.length>0?e.filter.filters[0].value:"")},dataType:"json"}}}),onConfigItemChange:function(e){var t=e.sender.dataItem(e.sender.selectedIndex);_.isUndefined(t)||(this.selectedConfigItemId=t.Id)},isUserCIVisible:!_.isUndefined(e.RequestedWorkItem),selectedUserConfigItemId:"",selectedUserConfigItem:"",addUserConfigItem:function(e){_.isUndefined(this.selectedUserConfigItemId)||p(this.selectedUserConfigItemId)},userConfigItemDataSource:new kendo.data.DataSource({serverFiltering:!0,transport:{read:{url:"/ConfigItems/GetAffectedUserConfigItemsList",data:{affectedUserId:function(){return _.isUndefined(e.RequestedWorkItem)||_.isNull(e.RequestedWorkItem.BaseId)?"":e.RequestedWorkItem.BaseId}},dataType:"json",type:"GET"}}}),onUserConfigItemChange:function(e){var t=e.sender.dataItem(e.sender.selectedIndex);_.isUndefined(t)||(this.selectedUserConfigItemId=t.Id)},dataSource:new kendo.data.DataSource({schema:{data:"Data",total:"Total",errors:"Errors",model:{id:"BaseId"}},data:{Data:s,Total:s.length}}),showMoreInfo:function(e){var t=$("<div>");t.appendTo("body");var i=t.kendoCiresonWindow({title:"",width:550,height:500,actions:["Close"]}).data("kendoWindow"),n=null,a="";null==e.data&&null!=e.BaseId?(n=e.BaseId,a=e.DisplayName):(n=e.data.BaseId,a=e.data.DisplayName),i.refresh({url:"/Search/ObjectViewer",data:{id:n}}),t.find(".k-content").html("<div style='padding: 55px'>Loading...</div>"),i.title(a).center().open()},onDataBinding:function(e){l=e.sender.table,_.each(s,function(e){e.AssetStatus=_.isUndefined(e.AssetStatus)||_.isNull(e.AssetStatus)?{Id:null,Name:null}:e.AssetStatus,e.Status=_.isUndefined(e.Status)||_.isNull(e.Status)?{Id:null,Name:null}:e.Status,e.Hidden=o.Disabled})},isDesktopView:!app.isMobileDevice(),isMobileView:app.isMobileDevice(),isWindowsComputer:!1,isConfigItemWindowsComputer:function(t){$.ajax({type:"GET",async:!1,url:"/ConfigItems/IsComputer",data:{objectId:t},success:function(t){e.view.affectedItemController.isWindowsComputer="true"===t.toLowerCase()}})},isUser:!1,isConfigItemUser:function(t){$.ajax({type:"GET",async:!1,url:"/ConfigItems/IsUser",data:{objectId:t},success:function(t){e.view.affectedItemController.isUser="true"===t.toLowerCase()}})},isMoreInfo:function(t){return!e.view.affectedItemController.isSlideOut(t)},isSlideOut:function(t){e.view.affectedItemController.isConfigItemWindowsComputer(t.BaseId),e.view.affectedItemController.isConfigItemUser(t.BaseId);var i=e.view.affectedItemController.isWindowsComputer,n=e.view.affectedItemController.isUser,a=!_.isNull(session.consoleSetting.TrueControlCenterURL)&&""!=session.consoleSetting.TrueControlCenterURL;return!(!i&&!n||!a)},showTCCInfo:function(t){var i=session.consoleSetting.TrueControlCenterURL,n=e.view.affectedItemController.isWindowsComputer,a=e.view.affectedItemController.isUser,r=localization.ComputerManagement;n?i=app.slideOutNav.getTCCSourceURL(t,"computer"):a&&(i=app.slideOutNav.getTCCSourceURL(t,"user"),r=localization.UserManagement);var o={url:i,tooltip:r};app.slideOutNav.show(o)},onContextmenuSelect:function(t){var i=t.item.attributes.custom.value,n=t.target.attributes["data-base-id"].value,a=_.find(t.data.HasRelatedWorkItems,function(e){return e.BaseId==n});"slideout"==i?e.view.affectedItemController.showTCCInfo(a):e.view.affectedItemController.showMoreInfo(a)},onContextmenuActivate:function(t){var i=t.target.attributes["data-base-id"].value;e.view.affectedItemController.isConfigItemWindowsComputer(i),e.view.affectedItemController.isConfigItemUser(i);var n=localization.UserManagement;e.view.affectedItemController.isWindowsComputer&&(n=localization.ComputerManagement);var a=[{text:n,imageUrl:"/Content/Images/Icons/Other/control-center-launcher.png",imageAttr:{height:"16px",width:"16px"},attr:{custom:"slideout"}},{text:"<i class='fa fa-info-circle cursor-pointer'></i>"+localization.AdditionalDetails,encoded:!1,attr:{custom:"info"}}];$("#tccmenu").data("kendoContextMenu").setOptions({dataSource:a})}});var d=e.view.affectedItemController;d.dataSource.originalFilter=d.dataSource.filter,d.dataSource.filter=function(){var e=d.dataSource.originalFilter.apply(this,arguments);return arguments.length>0&&this.trigger("filterApplied",arguments),e},d.dataSource.bind("filterApplied",function(){if($.each($(l).find("th a.k-header-column-menu i"),function(){$(this).remove()}),d.dataSource.filter()){var e=d.dataSource.filter().filters||[],t=[];for(var i in e)if(e[i].filters){var n=e[i].filters;for(var a in n)t.push(n[a])}else t.push(e[i]);t=_.uniq(t,function(e){return e.field});for(var i in t)$(l).find("th[data-field="+t[i].field+"] a.k-header-column-menu").append('<i class="fa fa-filter"></i>')}});var c=r(o);new kendo.View(c,{wrap:!0,model:e.view.affectedtemController}),a(c),e.view.affectedItemController.isUserCIVisible&&e.RequestedWorkItem.bind("change",function(t){e.view.affectedItemController.userConfigItemDataSource.read()});var u=function(e){var t=!1;return $.each(s,function(i,n){n.BaseId==e&&(t=!0)}),t},p=function(e){u(e)||$.getJSON("/ConfigItems/GetAffectedItem",{id:e},function(t){var i={BaseId:e,DisplayName:t.DisplayName,Path:t.Path,AssetStatus:_.isUndefined(t.AssetStatus)?{Name:_.isUndefined(t.AssetStatus)?"":t.AssetStatus}:null!=t.AssetStatus?t.AssetStatus:"",Status:_.isUndefined(t.Status)?{Name:_.isUndefined(t.Status)?"":t.Status}:null!=t.Status?t.Status:""};s.push(i)})}}}}),profileMainBuilder.define("text!forms/predefined/relatedItems/view.html",[],function(){
return'<div id="relatedItemTemplate" data-bind="templateResources:\'resources\'" style="display:none">\r\n    <div data-template-name="mobileGridTemplate" class="">\r\n        \x3c!-- repeated template content here --\x3e\r\n        <div class="gridcard gridcard--form">\r\n            <p class="gridcard__title">#: DisplayName #</p>\r\n            <div class="gridcard__detailblock">\r\n                <p>#: (AssetStatus.Name!=null) ? AssetStatus.Name : "" #</p>\r\n                <p># if (AssetStatus.Name!=null && AssetStatus.Name!="") { # &middot # } # </p>\r\n                <p>#: (Path!=null ) ? Path : "" # </p>\r\n                <p># if (Path!=null && Path!="") { # &middot # } # </p>\r\n                \r\n            </div>\r\n            <div class="gridcard__detailblock">\r\n                <a class="k-delete-button">#: localization.Remove #</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="row">\r\n    <div class="col-md-12 relateditems-grid">\r\n        <div class="row">\r\n            <div class="col-md-6">\r\n                <div class="form-group">\r\n                    <label class="control-label"><%= localization.Configurationitem %></label>\r\n                    <div class="two-action-input-group">\r\n                        <input data-role="combobox" class="search-combo"\r\n                               data-placeholder="<%= localization.ChooseOne %>"\r\n                               data-value-primitive="true"\r\n                               data-text-field="Text"\r\n                               data-value-field="Value"\r\n                               data-filter="contains"\r\n                               data-auto-bind="false"\r\n                               data-bind="value: view.relatedItemController.selectedConfigItem, source: view.relatedItemController.configItemDataSource, events:{change:view.relatedItemController.onConfigItemChange }"\r\n                               <% if ( Disabled ){ %> disabled <% } %>/>\r\n\r\n                        <span data-bind="events:{click: view.relatedItemController.searchConfigItem}"\r\n                              data-cid="relatedItemsSearchIcon"\r\n                          <% if ( Disabled ){ %> disabled class="search search-disabled" <% } else{ %> class="search" <% } %>\r\n                          >\r\n                        <i class="fa fa-search"></i>\r\n                    </span>\r\n                        <button data-role="button" class="search-button two-action-input-group__primary-action"\r\n                                data-bind="events:{click: view.relatedItemController.addConfigItem}"\r\n                                data-cid="relatedItemSearchAddBbtn"\r\n                            <% if ( Disabled ){ %> disabled <% } %>\r\n                            >\r\n                        <%= localization.Add %>\r\n                    </button>\r\n                    </div>\r\n                 </div>\r\n            </div>\r\n            <div class="col-md-6">\r\n                <div class="form-group affected-user-item-search" data-bind="visible: view.relatedItemController.isUserCIVisible">\r\n                    <label class="control-label"><%= localization.AffectedUserItems %></label>\r\n                    <div class="two-action-input-group">\r\n                        <input data-role="combobox" class="search-combo"\r\n                               data-placeholder="<%= localization.ChooseOne %>"\r\n                               data-value-primitive="true"\r\n                               data-text-field="Text"\r\n                               data-value-field="Value"\r\n                               data-filter="contains"\r\n                               data-auto-bind="false"\r\n                               data-bind="value: view.relatedItemController.selectedUserConfigItem, source: view.relatedItemController.userConfigItemDataSource, events:{change:view.relatedItemController.onUserConfigItemChange }"\r\n                               data-cid="affectedItemsUserItemBox"\r\n                               <% if ( Disabled ){ %> disabled <% } %> />\r\n\r\n                        <button class="two-action-input-group__primary-action"\r\n                                data-role="button"\r\n                                data-bind="events:{click: view.relatedItemController.addUserConfigItem}"\r\n                            <% if ( Disabled ){ %> disabled <% } %>\r\n                            >\r\n                        <%= localization.Add %>\r\n                    </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div data-role="grid"\r\n             data-bind="visible: view.relatedItemController.isDesktopView, source: view.relatedItemController.dataSource, events:{dataBinding: view.relatedItemController.onDataBinding}"\r\n             data-selectable="false"\r\n             data-sortable="true"\r\n             data-filterable="true"\r\n             data-scrollable="false"\r\n             data-column-menu="true"\r\n             data-pageable="false"\r\n             data-editable="{mode: \'incell\', create: false, update: false}"\r\n             data-columns=\'[\r\n                    { title: "", width: "1%", template: "\\u003cdiv data-base-id=\\"#=BaseId#\\" class=\\"ci-context-menu open-modal pull-right\\" data-bind=\\"visible: view.relatedItemController.isSlideOut\\"\\u003e\\u003ci class=\\"fa fa-info-circle\\"\\u003e\\u003c/i\\u003e\\u003c/div\\u003e\\u003cdiv class=\\"open-modal pull-right\\" data-bind=\\"visible: view.relatedItemController.isMoreInfo, events:{click:view.relatedItemController.showMoreInfo }\\"\\u003e\\u003ci class=\\"fa fa-info-circle\\"/\\u003e\\u003c/i\\u003e\\u003c/div\\u003e"},\r\n                    { field: "DisplayName", title: localization.DisplayName, width: "50%"},\r\n                    { field: "BaseId", title: localization.BaseId, width: "25%", hidden: true },\r\n                    { field: "Path", title: localization.Path, width: "25%" },\r\n                    { field: "AssetStatus.Name", title: localization.Status, width: "25%" },\r\n                    { title: localization.Actions, width: "15%", command: [{ name: "destroy", buttonType: "ImageAndText", text: localization.Remove, className:"custom__grid-remove" }] }\r\n                ]\'>\r\n        </div>\r\n        <div data-bind="visible: view.relatedItemController.isMobileView">\r\n            <div data-bind="mobileGrid: RelatesToConfigItem" data-template-name="mobileGridTemplate" class="mobile-grid-parent"></div>\r\n        </div>\r\n        \x3c!--context menu for info icon--\x3e\r\n        <ul id="tccmenu-related-ci" data-role="contextmenu" \r\n            data-filter=".ci-context-menu"\r\n            data-show-on="click"\r\n            data-bind="events:{select:view.relatedItemController.onContextmenuSelect, activate:view.relatedItemController.onContextmenuActivate}">\r\n        </ul>\r\n    </div>\r\n</div>'}),profileMainBuilder.define("forms/predefined/relatedItems/controller",["require","text!forms/predefined/relatedItems/view.html","forms/popups/multipleObjectPickerPopup/controller"],function(e){var t=e("text!forms/predefined/relatedItems/view.html"),i=e("forms/popups/multipleObjectPickerPopup/controller");return{template:t,build:function(e,n,a){var r=_.template(t),o={Disabled:!_.isUndefined(n.disabled)&&n.disabled};$.extend(!0,o,n);var l=new kendo.View,s=!1;_.isUndefined(e.RelatesToConfigItem)&&e.set("RelatesToConfigItem",new kendo.data.ObservableArray([]));var d=e.get("RelatesToConfigItem");e.view.relatedItemController=new kendo.observable({addConfigItem:function(e){_.isUndefined(this.selectedConfigItemId)||f(this.selectedConfigItemId)},searchConfigItem:function(){var e=i.getPopup("62F0BE9F-ECEA-E73C-F00D-3DD78A7422FC","DisplayName,Path,Status",null,null,!0);e.setSaveCallback(function(e){f(e.BaseId)}),e.open()},selectedConfigItemId:"",selectedConfigItem:"",configItemDataSource:new kendo.data.DataSource({serverFiltering:!0,transport:{read:{url:function(e){return"/api/V3/Config/GetAffectedItemsList?itemFilter="+(e.filter.filters.length>0?e.filter.filters[0].value:"")},dataType:"json"}}}),onConfigItemChange:function(e){var t=e.sender.dataItem(e.sender.selectedIndex);_.isUndefined(t)||(this.selectedConfigItemId=t.Id)},isUserCIVisible:!_.isUndefined(e.RequestedWorkItem),selectedUserConfigItemId:"",selectedUserConfigItem:"",addUserConfigItem:function(e){_.isUndefined(this.selectedUserConfigItemId)||f(this.selectedUserConfigItemId)},userConfigItemDataSource:new kendo.data.DataSource({serverFiltering:!0,transport:{read:{url:"/ConfigItems/GetAffectedUserConfigItemsList",data:{affectedUserId:function(){return _.isUndefined(e.RequestedWorkItem)||_.isNull(e.RequestedWorkItem.BaseId)?"":e.RequestedWorkItem.BaseId}},dataType:"json",type:"GET"}}}),onUserConfigItemChange:function(e){var t=e.sender.dataItem(e.sender.selectedIndex);_.isUndefined(t)||(this.selectedUserConfigItemId=t.Id)},dataSource:new kendo.data.DataSource({schema:{data:"Data",total:"Total",errors:"Errors",model:{id:"BaseId"}},data:{Data:d,Total:d.length}}),showMoreInfo:function(e){var t=$("<div>");t.appendTo("body");var i=t.kendoCiresonWindow({title:"",width:550,height:500,actions:["Close"]}).data("kendoWindow"),n=null,a="";null==e.data&&null!=e.BaseId?(n=e.BaseId,a=e.DisplayName):(n=e.data.BaseId,a=e.data.DisplayName),i.refresh({url:"/Search/ObjectViewer",data:{id:n}}),t.find(".k-content").html("<div style='padding: 55px'>Loading...</div>"),i.title(a).center().open()},onDataBinding:function(e){s=e.sender.table,_.each(d,function(e){e.AssetStatus=_.isUndefined(e.AssetStatus)?{Id:null,Name:null}:e.AssetStatus,e.Status=_.isUndefined(e.Status)?{Id:null,Name:null}:e.Status})},isDesktopView:!app.isMobileDevice(),isMobileView:app.isMobileDevice(),isEnabled:!o.Disabled,isWindowsComputer:!1,isConfigItemWindowsComputer:function(t){$.ajax({type:"GET",async:!1,url:"/ConfigItems/IsComputer",data:{objectId:t},success:function(t){e.view.relatedItemController.isWindowsComputer="true"===t.toLowerCase()}})},isUser:!1,isConfigItemUser:function(t){$.ajax({type:"GET",async:!1,url:"/ConfigItems/IsUser",data:{objectId:t},success:function(t){e.view.relatedItemController.isUser="true"===t.toLowerCase()}})},isMoreInfo:function(t){return!e.view.relatedItemController.isSlideOut(t)},isSlideOut:function(t){e.view.relatedItemController.isConfigItemWindowsComputer(t.BaseId),e.view.relatedItemController.isConfigItemUser(t.BaseId);var i=e.view.relatedItemController.isWindowsComputer,n=e.view.relatedItemController.isUser,a=!_.isNull(session.consoleSetting.TrueControlCenterURL)&&""!=session.consoleSetting.TrueControlCenterURL;return!(!i&&!n||!a)},showTCCInfo:function(t){var i=session.consoleSetting.TrueControlCenterURL,n=e.view.relatedItemController.isWindowsComputer,a=e.view.relatedItemController.isUser,r=localization.ComputerManagement;n?i=app.slideOutNav.getTCCSourceURL(t,"computer"):a&&(i=app.slideOutNav.getTCCSourceURL(t,"user"),r=localization.UserManagement);var o={url:i,tooltip:r};app.slideOutNav.show(o)},onContextmenuSelect:function(t){var i=t.item.attributes.custom.value,n=t.target.attributes["data-base-id"].value,a=_.find(t.data.RelatesToConfigItem,function(e){return e.BaseId==n});"slideout"==i?e.view.relatedItemController.showTCCInfo(a):e.view.relatedItemController.showMoreInfo(a)},onContextmenuActivate:function(t){var i=t.target.attributes["data-base-id"].value;e.view.relatedItemController.isConfigItemWindowsComputer(i),e.view.relatedItemController.isConfigItemUser(i);var n=localization.UserManagement;e.view.relatedItemController.isWindowsComputer&&(n=localization.ComputerManagement);var a=[{text:n,imageUrl:"/Content/Images/Icons/Other/control-center-launcher.png",imageAttr:{height:"16px",width:"16px"},attr:{custom:"slideout"}},{text:"<i class='fa fa-info-circle cursor-pointer'></i>"+localization.AdditionalDetails,encoded:!1,attr:{custom:"info"}}];$("#tccmenu-related-ci").data("kendoContextMenu").setOptions({dataSource:a})}});var c=e.view.relatedItemController;c.dataSource.originalFilter=c.dataSource.filter,c.dataSource.filter=function(){var e=c.dataSource.originalFilter.apply(this,arguments);return arguments.length>0&&this.trigger("filterApplied",arguments),e},c.dataSource.bind("filterApplied",function(e){if($.each($(s).find("th a.k-header-column-menu i"),function(){$(this).remove()}),c.dataSource.filter()){var t=c.dataSource.filter().filters||[],i=[];for(var n in t)if(t[n].filters){var a=t[n].filters;for(var r in a)i.push(a[r])}else i.push(t[n]);i=_.uniq(i,function(e){return e.field});for(var n in i)$(s).find("th[data-field="+i[n].field+"] a.k-header-column-menu").append('<i class="fa fa-filter"></i>')}});var u=r(o);if(l=new kendo.View(u,{wrap:!0,model:e.view.relatedItemController}),a(u),o.Disabled){$(l.content).find(".search").addClass("search-disabled")}e.view.relatedItemController.isUserCIVisible&&e.RequestedWorkItem.bind("change",function(t){e.view.relatedItemController.userConfigItemDataSource.read()});var p=function(e){var t=!1;return $.each(d,function(i,n){n.BaseId==e&&(t=!0)}),t},f=function(e){p(e)||$.getJSON("/ConfigItems/GetAffectedItem",{id:e},function(t){var i={BaseId:e,DisplayName:t.DisplayName,Path:t.Path,AssetStatus:_.isUndefined(t.AssetStatus)?{Name:_.isUndefined(t.AssetStatus)?"":t.AssetStatus}:null!=t.AssetStatus?t.AssetStatus:"",Status:_.isUndefined(t.Status)?{Name:_.isUndefined(t.Status)?"":t.Status}:null!=t.Status?t.Status:""};d.push(i)})}}}}),profileMainBuilder.define("text!forms/predefined/childWorkItems/view.html",[],function(){return'<div data-bind="templateResources:\'resources\'" style="display:none">\r\n    <div data-template-name="mobileGridTemplate" class="mobile-grid">\r\n        \x3c!-- repeated template content here --\x3e\r\n        <div class="gridcard gridcard--form">\r\n            <p class="gridcard__title">${Id}: ${Title}</p>\r\n            <div class="gridcard__detailblock">\r\n                <p>#: localizationHelper.localize("Status") #: #: Status # </p>\r\n                <p>#: localizationHelper.localize("LastModified") #: #: kendo.toString(kendo.parseDate(LastModified), "g") # </p>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n<div class="row">\r\n    <div class="col-md-12 file-attachments"\r\n         data-control="childWorkItems"\r\n         data-control-bind="ChildWorkItem"\r\n         data-control-show="IsParent"\r\n        <% if ( Disabled ){ %>\r\n        disabled\r\n        <% } %>>\r\n\r\n    <div >\r\n        <button class="btn btn-primary" data-role="button" data-click="addClick"><%= localization.Add %> </button>\r\n    </div>\r\n    \r\n    <% if ( IsMobileView == false ){ %>\r\n        <div data-control-grid="objectGrid" class="inline-spacing"></div>\r\n    <% } %>\r\n    \r\n    <% if ( IsMobileView ){ %>\r\n        <div data-template-name="mobileGridTemplate" class="mobile-grid-parent" data-bind="mobileGrid: ChildWorkItem"></div>\r\n    <% } %>\r\n    \r\n    </div>\r\n</div>\r\n'}),profileMainBuilder.define("forms/predefined/childWorkItems/controller",["require","text!forms/predefined/childWorkItems/view.html","forms/popups/multipleObjectPickerPopup/controller"],function(e){var t=e("text!forms/predefined/childWorkItems/view.html"),i=e("forms/popups/multipleObjectPickerPopup/controller"),n=function(e,t,i,n,a){_.isUndefined(t[i])&&t.set(i,new kendo.data.ObservableArray([]));var r=t.get(i),o=function(){},l=function(){var t={addClick:function(){a.setSaveCallback(function(e){d(e.BaseId)||r.push(e)}),a.open()}};e.find("[data-click]").each(function(){t[$(this).attr("data-click")]&&$(this).click(t[$(this).attr("data-click")])})},s=function(){var t=e.find("[data-control-grid]"),i=t.kendoGrid({columns:[{field:"Id",title:localization.Id,attributes:{class:"grid-highlight-column"}},{field:"Title",title:localization.Title},{field:"Status",title:localization.Status,template:"#= (Status.Name)?Status.Name:Status #"},{field:"LastModified",title:localization.LastModified,type:"date",template:"#= (LastModified) ? kendo.toString(new Date(LastModified), 'g'):'' #"},{field:"BaseId",title:"BaseId",hidden:"true"},{width:"105px",command:[{name:"destroy",text:localization.Remove}]}],scrollable:!1,filterable:{extra:!1,messages:{info:localization.Showitemswithvaluethat,and:localization.And,or:localization.Or,filter:localization.Filter,clear:localization.Clear},operators:{string:{startswith:localization.Startswith,contains:localization.Contains,eq:localization.Isequalto,neq:localization.Isnotequalto}}},reorderable:!0,sortable:!0,columnMenu:{messages:{columns:localization.ChooseColumns,filter:localization.Filter,sortAscending:localization.SortAscending,sortDescending:localization.SortDescending}},editable:{confirmDelete:"Delete",cancelDelete:"Cancel",mode:"incell",template:null,create:!0,update:!1,destroy:!0},toolbar:{},dataSource:{transport:{prefix:"",read:{url:""}},type:"aspnetmvc-ajax",schema:{data:"Data",total:"Total",errors:"Errors",model:{id:"BaseId"}},data:{Data:r,Total:r.length}},selectable:!0});t.on("click","td",function(e){if($(e.currentTarget).hasClass("grid-highlight-column")){var t=i.data("kendoGrid"),n=t.dataItem($(e.currentTarget).closest("tr")),a=n.ClassName.split(/[\s.]+/),r=a[a.length-1];window.open("/"+r+"/Edit/"+n.Id+"/","_blank")}})},d=function(e){var t=!1;return $.each(r,function(i,n){n.BaseId==e&&(t=!0)}),t};!function(){l(),o(),s()}()};return{template:t,build:function(e,a,r){boundObj=e;var o={Disabled:!1,PropertyName:"ChildWorkItem",ClassId:"System.WorkItem.ReleaseRecord"===e.ClassName?"d02dc3b6-d709-46f8-cb72-452fa5e082b8":"a604b942-4c7b-2fb2-28dc-61dc6f465c68",PropertyToDisplay:"Id,Title,Status,LastModified",ControllerUrl:"/Search/GetChildWorkItems",IsMobileView:app.isMobileDevice()};$.extend(!0,o,a);var l=_.template(t),s=$(l(o)),d=i.getPopup(o.ClassId,o.PropertyToDisplay,o.ControllerUrl),c=(new n(s.find("[data-control='childWorkItems']"),boundObj,o.PropertyName,o,d),s.find("[data-control='childWorkItems']").attr("data-control-show"));s.find("[data-control='childWorkItems']").attr("data-control","childWorkItemsBound"),r(s),(!1===boundObj[c]||_.isNull(boundObj[c]))&&s.parents(".row").hide()}}}),profileMainBuilder.define("text!forms/predefined/userInput/view.html",[],function(){return'<div>\r\n    <div class="editor-label">\r\n        <label><%= localization.UserInputs %></label>\r\n    </div>\r\n    <div class="editor-field">\r\n        <div data-control="userInputs" data-control-bind="UserInput">\r\n            <div data-control-grid="userInputsGrid" class="inline-spacing"></div>\r\n        </div>    \r\n    </div>\r\n</div>\r\n'}),profileMainBuilder.define("forms/predefined/userInput/controller",["require","text!forms/predefined/userInput/view.html"],function(e){var t=e("text!forms/predefined/userInput/view.html");return{template:t,build:function(e,i,n){n(_.template(t)(i))}}}),profileMainBuilder.define("text!forms/predefined/activities/view.html",[],function(){return'<div data-control="activityDisplay" data-control-bind="Activity" class="activity-list-container"\r\n\r\n    <% if ( Disabled ){ %>\r\n    disabled\r\n    <% } %>\r\n\r\n    >\r\n</div>\r\n'}),profileMainBuilder.define("forms/predefined/activities/controller",["require","text!forms/predefined/activities/view.html"],function(e){var t=e("text!forms/predefined/activities/view.html");return{template:t,build:function(e,i,n){var a=_.template(t),r={Disabled:i.disabled};$.extend(!0,r,i),n(a(r))}}}),profileMainBuilder.define("text!forms/predefined/multipleObjectPicker/view.html",[],function(){return'<div data-bind="templateResources:\'resources\'" style="display:none">\r\n    <div data-template-name="mobileGridTemplate" class="mobile-grid">\r\n        \x3c!-- repeated template content here --\x3e\r\n        <div class="gridcard gridcard--form">\r\n            <p class="gridcard__title">${title}</p>\r\n            <div class="gridcard__detailblock">\r\n                # $.each(details, function (index, item) {\r\n                # <p>${item}</p>  #\r\n                });\r\n                #\r\n            </div>\r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n<div class="row">\r\n    <div class="col-md-12">\r\n    <div data-control="multipleObjectPicker"\r\n         data-control-bind="HasRelatedWorkItems"\r\n         id="<%= PropertyName %>"\r\n        <% if ( Disabled ){ %>\r\n        disabled\r\n    <% } %>\r\n    >\r\n\r\n        <button data-role="button" class="btn btn-primary" data-click="addClick"><%= localization.Add %> </button>\r\n        <div class="grid-container">\r\n            <% if ( IsMobileView == false ){ %>\r\n            <div data-control-grid="objectGrid" class="inline-spacing"></div>\r\n            <% } %>\r\n\r\n            <% if ( IsMobileView ){ %>\r\n            <div data-template-name="mobileGridTemplate" class="mobile-grid-parent" data-bind="mobileGrid: <%= PropertyName %>" multiple-picker data-columns="<%= ClassProperties %>"></div>\r\n            <% } %>\r\n        </div>\r\n        </div>\r\n    </div>\r\n</div>'}),profileMainBuilder.define("forms/predefined/multipleObjectPicker/controller",["require","text!forms/predefined/multipleObjectPicker/view.html","forms/popups/multipleObjectPickerPopup/controller"],function(e){var t=e("text!forms/predefined/multipleObjectPicker/view.html"),i=e("forms/popups/multipleObjectPickerPopup/controller"),n=function(e,t,i,n,a){_.isUndefined(t[i])&&t.set(i,new kendo.data.ObservableArray([]));var r=_.isUndefined(t[i].length)?new kendo.data.ObservableArray([t.get(i)]):t.get(i);r.properties=n;var o=function(){var e=[];for(var t in n.PropertyToDisplay){var i=t.split(".");i.length>1&&e.push(i)}_.each(r,function(t){_.each(e,function(e){var i=e[0],n=e[1];_.isUndefined(t[i])&&(t[i]={},t[i][n]="")})})};r.addItem=function(e){if(!d(e.BaseId))if(_boundArray=this,_.isUndefined(_boundArray.properties.ProjectionId)||_.isNull(_boundArray.properties.ProjectionId)||""==_boundArray.properties.ProjectionId)_boundArray.push(e);else{var t="",i=[];for(var n in _boundArray.properties.PropertyToDisplay){var a=n.split(".");a.length>1&&(i.push(a),t=""==t?n:t+","+n)}$.post("/Search/GetObjectProjectionByCriteria",{baseId:e.BaseId,projectionId:_boundArray.properties.ProjectionId,columnNames:t},function(t){for(index in t.Data)for(propIndex in i){var n=t.Data[index][i[propIndex][0]];_.isUndefined(n[i[propIndex][1]])||(e[i[propIndex][0]]=n)}_boundArray.push(e)})}};var l=function(){var o={addClick:function(){a.setSaveCallback(function(e){r.addItem(e),_.isUndefined(t[i].length)&&(r.shift(),t.set(i,r[0]))}),a.open()}};e.find("[data-click]").each(function(){o[$(this).attr("data-click")]&&$(this).click(o[$(this).attr("data-click")])}),(!n.ShowAddButton||n.Disabled||n.vm.isDisabled)&&e.find("[data-click]").each(function(){$(this).hide()})},s=function(){var t=e.find("[data-control-grid]"),i="WatchList"!==n.PropertyName&&(!n.ShowRemoveButton||n.Disabled||n.vm.isDisabled),a=m(n.PropertyToDisplay),o=c(a,i),l=t.kendoGrid({columns:o,scrollable:!1,filterable:{extra:!1,messages:{info:localization.Showitemswithvaluethat,and:localization.And,or:localization.Or,filter:localization.Filter,clear:localization.Clear},operators:{string:{startswith:localization.Startswith,contains:localization.Contains,eq:localization.Isequalto,neq:localization.Isnotequalto}}},reorderable:!0,sortable:!0,columnMenu:{messages:{columns:localization.ChooseColumns,filter:localization.Filter,sortAscending:localization.SortAscending,sortDescending:localization.SortDescending}},editable:{confirmDelete:"Delete",cancelDelete:"Cancel",mode:"incell",template:null,create:!0,update:!1,destroy:!0},toolbar:{},dataSource:{transport:{prefix:"",read:{url:""}},type:"aspnetmvc-ajax",schema:{data:"Data",total:"Total",errors:"Errors",model:{id:"BaseId",fields:a}},data:{Data:r,Total:r.length}},dataBinding:function(e){!_.isUndefined(e.items)&&e.items.length>0&&u(e,n.ClassProperties)},dataBound:function(e){n.Scoped&&p(this,n.ClassId,n.ClassProperties)},selectable:!!n.SelectableRow&&"multiple row"});t.on("click","td",function(e){if($(e.currentTarget).hasClass("grid-highlight-column")){var t=l.data("kendoGrid"),i=t.dataItem($(e.currentTarget).closest("tr"));f(i)}}),app.isMobile()||(l.data("kendoGrid").dataSource.originalFilter=l.data("kendoGrid").dataSource.filter,l.data("kendoGrid").dataSource.filter=function(){var e=l.data("kendoGrid").dataSource.originalFilter.apply(this,arguments);return arguments.length>0&&this.trigger("filterApplied",arguments),e},l.data("kendoGrid").dataSource.bind("filterApplied",function(){if($.each($(l).find("th a.k-header-column-menu i"),function(){$(this).remove()}),l.data("kendoGrid").dataSource.filter()){var e=l.data("kendoGrid").dataSource.filter().filters||[];for(var t in e)$(l).find("th[data-field="+e[t].field+"] a.k-header-column-menu").append('<i class="fa fa-filter"></i>')}}))},d=function(e){var t=!1;return $.each(r,function(i,n){n.BaseId==e&&(t=!0)}),t},c=function(e,t){var i=[];for(var a in n.PropertyToDisplay){var r=a,o=n.PropertyToDisplay[a],l=!_.isUndefined(localization[o])&&[o].length>0?localization[o]:o,s=n.SelectableRow&&r===n.SelectProperty?"grid-highlight-column":"",d="date"==e[r].type?"{0:"+kendo.culture().calendar.patterns.g+"}":null;i.push({title:l,width:"210px",field:r,filterable:{},encoded:!0,attributes:{class:s},format:d})}return i.push({title:localization.BaseId,width:"210px",field:"BaseId",filterable:{},encoded:!0,hidden:!0}),i.push({width:"105px",command:[{name:"destroy",text:localization.Remove}],hidden:t}),i},u=function(e,t){var i=e.items[0];$.each(t.split(","),function(t,n){$.each(r,function(t,a){if(n.indexOf(".")>0){var o=n.split(".")[0];_.isUndefined(a[o])&&(r[t][o]={Id:"",Name:""})}i.BaseId!=a.BaseId&&"add"==e.action||_.isUndefined(a[n])||_.isNull(a[n])||_.isBoolean(a[n])||_.isNumber(a[n])||_.isUndefined(a[n].Name)||(r[t][n]=a[n].Name)})})},p=function(e,t,i){""!==t&&$.ajax({url:"/Search/GetSearchObjectsByClassId",data:{searchFilter:"",classId:t,columnNames:i},async:!1,timeout:3e3,success:function(t){var i=[];$.each(t.Data,function(e,t){i.push(t.BaseId)}),$.each(e._data,function(t,n){if(!_.contains(i,this.BaseId)){e.tbody.find("tr[data-uid='"+this.uid+"']").hide()}})}})},f=function(e){var t=e.ClassName.split(/[\s.]+/),i=t[t.length-1];switch(i){case"HardwareAsset":case"SoftwareAsset":window.open("/AssetManagement/"+i+"/Edit/"+e.BaseId+"/","_blank");break;case"Lease":case"Warranty":window.open("/AssetManagement/Contract/"+i+"/Edit/"+e.BaseId+"/","_blank");break;case"SupportContract":window.open("/AssetManagement/Contract/SupportandMaintenance/Edit/"+e.BaseId+"/","_blank");break;case"Location":case"NoticeEvent":case"Organization":case"Standard":case"Subnet":case"Vendor":case"CatalogItem":case"CostCenter":case"Invoice":case"PurchaseOrder":case"Purchase":window.open("/AssetManagement/Administration/"+i+"/Edit/"+e.BaseId+"/","_blank");break;case"Licence":window.open("/AssetManagement/Administration/License/Edit/"+e.BaseId+"/","_blank");break;case"Consumable":window.open("/AssetManagement/Administration/Consumables/Edit/"+e.BaseId+"/","_blank");break;case"ManualActivity":case"ReviewActivity":case"SequentialActivity":case"ParallelActivity":case"DependentActivity":window.open("/Activity/Edit/"+e.Id,"_blank");break;case"Incident":case"ServiceRequest":case"ChangeRequest":case"Problem":case"ReleaseRecord":window.open("/"+i+"/Edit/"+e.Id+"/","_blank")}},m=function(e){var t;t="{";for(var i in e){t+='"'+i+'":{"type":"'+(i.indexOf("Date")>-1||"LastModified"==i?"date":"string")+'"},'}return t=t.replace(/,([^,]*)$/,"$1"),t+="}",JSON.parse(t)};!function(){o(),l(),s()}()};return{template:t,build:function(e,a,r){boundObj=a.vm,name=a.PropertyName,!_.isUndefined(localization[a.name])&&[a.name].length>0&&(a.name=localization[a.name]);var o={Disabled:!1,ClassId:"",PropertyToDisplay:[],PropertyName:"",ShowAddButton:!0,ShowRemoveButton:!0,Scoped:!1,ClassProperties:"",SelectableRow:!1,SelectProperty:"Id",ProjectionId:"",HiddenProperty:null,IsMobileView:app.isMobileDevice()};$.extend(!0,o,a),o.PropertyToDisplay.length<=0&&(o.PropertyToDisplay={DisplayName:"DisplayName",Path:"Path",Status:"Status"});for(var l in o.PropertyToDisplay)o.ClassProperties=o.ClassProperties.concat(l).concat(",");"HasRelatedWorkItems"===o.PropertyName&&o.ClassProperties.indexOf("AssetStatus")<0&&(o.ClassProperties=o.ClassProperties.concat("AssetStatus")),_.isNull(o.HiddenProperty)||(o.ClassProperties+=o.HiddenProperty.concat(",")),"WatchList"===o.PropertyName&&(session.consoleSetting.DashboardsLicense.IsValid&&session.enableWatchlist||(o.Visible=!1),session.user.Analyst||void 0===boundObj.RequestedWorkItem||session.user.Id==boundObj.RequestedWorkItem.BaseId||(o.ShowAddButton=!1,o.ShowRemoveButton=!1));var s=_.template(t),d=$(s(o)),c={field:"BaseId",operator:"neq",value:boundObj.BaseId},u="RelatesToWorkItem"===o.PropertyName?i.getPopup(o.ClassId,o.ClassProperties,null,c):i.getPopup(o.ClassId,o.ClassProperties);new n(d.find("[data-control='multipleObjectPicker']"),boundObj,name,o,u);d.find("[data-control='multipleObjectPicker']").attr("data-control","multipleObjectPickerBound"),r(d)},openObject:function(e){var t=e.ClassName.split(/[\s.]+/),i=t[t.length-1];switch(i){case"HardwareAsset":case"SoftwareAsset":window.open("/AssetManagement/"+i+"/Edit/"+e.BaseId+"/","_blank");break;case"Lease":case"Warranty":window.open("/AssetManagement/Contract/"+i+"/Edit/"+e.BaseId+"/","_blank");break;case"SupportContract":window.open("/AssetManagement/Contract/SupportandMaintenance/Edit/"+e.BaseId+"/","_blank");break;case"Location":case"NoticeEvent":case"Organization":case"Standard":case"Subnet":case"Vendor":case"CatalogItem":case"CostCenter":case"Invoice":case"PurchaseOrder":case"Purchase":window.open("/AssetManagement/Administration/"+i+"/Edit/"+e.BaseId+"/","_blank");break;case"Licence":window.open("/AssetManagement/Administration/License/Edit/"+e.BaseId+"/","_blank");break;case"Consumable":window.open("/AssetManagement/Administration/Consumables/Edit/"+e.BaseId+"/","_blank");break;case"ManualActivity":case"ReviewActivity":case"SequentialActivity":case"ParallelActivity":case"DependentActivity":window.open("/Activity/Edit/"+e.Id,"_blank");break;case"Incident":case"ServiceRequest":case"ChangeRequest":case"Problem":case"ReleaseRecord":window.open("/"+i+"/Edit/"+e.Id+"/","_blank")}}}}),profileMainBuilder.define("text!forms/predefined/history/view.html",[],function(){
return'<div>\r\n    <div class="row">\r\n        <div class="col-md-12">\r\n            <div class="form-group">\r\n                <div class="input-group">\r\n                    <div id="showHistoryDropDown"\r\n                        data-role="dropdownlist"\r\n                        data-text-field="text"\r\n                        data-value-field="value"\r\n                        data-template="dropDownHistoryTemplate"\r\n                    ></div>\r\n                    <span class="input-group-btn">\r\n                        <button data-role="button" class="btn btn-primary k-button" data-bind="events: {click: view.history.loadHistory}">\r\n                            <span class="fa cursor-pointer"></span><%= localization.ShowHistory %>\r\n                        </button>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div class="editor-label">\r\n                <label id="showHistoryTitle" data-bind="source: historyLabel" data-template="labelHistoryTemplate">PRE TEMPLATE</label>\r\n            </div>\r\n            <div id="historyView" data-bind="visible: showHistory"></div>  \r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\x3c!--kendo templates--\x3e\r\n<script type="text/x-kendo-template" id="labelHistoryTemplate">\r\n    # if (type == "loading") { #\r\n        <span class=\'k-icon k-loading\'></span>\r\n    # } else if (type == "error") { #\r\n        <span class=\'fa fa-warning\'></span> Unable to load history. Please try again.\r\n    # } else if (type == "info") { #\r\n        #: text #\r\n    # } #\r\n<\/script>\r\n<script type="text/x-kendo-template" id="dropDownHistoryTemplate">\r\n    <span style=\'white-space: pre;\'>#= data.text #</span>\r\n<\/script>\r\n<script type="text/x-kendo-template" id="viewHistoryTemplate">\r\n    <ul class=\'timeline\' data-template=\'propertyHistoryTemplate\' data-bind=\'source: nodes\'></ul>\r\n<\/script>\r\n<script type="text/x-kendo-template" id="propertyHistoryTemplate">\r\n    # if ((!_.isUndefined(ClassHistory) && ClassHistory.length > 0) || RelationshipHistory.length > 0) { #\r\n    <li>\r\n\r\n        # if (RelationshipHistory.length > 0) { #\r\n        <div class="timeline-badge primary">\r\n            <i class="fa fa-code-fork"></i>\r\n        </div>\r\n        # } else{ #\r\n        <div class="timeline-badge">\r\n            <i class="fa"></i>\r\n        </div>\r\n        # } #\r\n        <div class="timeline-panel">\r\n            <div class="timeline-heading">\r\n                <a><h4 class="timeline-title">#: UserName #</h4></a>\r\n                <p><small class="text-muted"><i class="fa fa-clock-o"></i>#: kendo.toString(new Date(DateOccurred),\'g\') #</small></p>\r\n            </div>\r\n            <div class="timeline-body">\r\n                # if ((!_.isUndefined(ClassHistory) && ClassHistory.length > 0)) { #\r\n                <h5><%= localization.PropertyChanges %>:</h5>\r\n                <div class="table-responsive">\r\n                    <table class="table">\r\n                        <thead>\r\n                            <tr>\r\n                                <th><%= localization.Property %></th>\r\n                                <th><%= localization.OldValue %></th>\r\n                                <th><%= localization.NewValue %></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            # for (var i = 0; i < ClassHistory.length; i++) { #\r\n                            <tr>\r\n                                <td>#: localizationHelper.localize(ClassHistory[i].Key.replace(/ /g,""), ClassHistory[i].Key) #</td>\r\n                                <td>#: ClassHistory[i].BeforeValue && ClassHistory[i].IsDate ? kendo.toString(new Date(ClassHistory[i].BeforeValue),\'g\') : localizationHelper.localize(ClassHistory[i].BeforeValue.replace(/ /g,""), ClassHistory[i].BeforeValue) #</td>\r\n                                <td>#: ClassHistory[i].AfterValue && ClassHistory[i].IsDate ? kendo.toString(new Date(ClassHistory[i].AfterValue),\'g\') : localizationHelper.localize(ClassHistory[i].AfterValue.replace(/ [0-9]/g,""), ClassHistory[i].AfterValue) #</td>\r\n                            </tr>\r\n                            # } #\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n                # } #\r\n                # if (RelationshipHistory.length > 0) { #\r\n                <h5><%= localization.RelationshipChanges %>:</h5>\r\n                <div class="table-responsive">\r\n                    <table class="table">\r\n                        <thead>\r\n                            <tr>\r\n                                <th></th>\r\n                                <th><%= localization.RelationshipClass %></th>\r\n                                <th><%= localization.Item %></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            # for (var i = 0; i < RelationshipHistory.length; i++) { #\r\n                            <tr>\r\n                                # if (RelationshipHistory[i].ChangeType === "Insert") { #\r\n                                <td><i class="fa fa-plus text-success"></i></td>\r\n                                <td>#: localizationHelper.localize(RelationshipHistory[i].RelationshipName.replace(/\\./g,". ").replace(/ /g,""), RelationshipHistory[i].RelationshipName.replace(/\\./g,". ")) #</td>\r\n                                <td>#: localizationHelper.localize(RelationshipHistory[i].Item.replace(/ /g,""), RelationshipHistory[i].Item) #</td>\r\n                                # } #\r\n\r\n                                # if (RelationshipHistory[i].ChangeType === "Delete") { #\r\n                                <td><i class="fa fa-minus text-danger"></i></td>\r\n                                <td>#: localizationHelper.localize(RelationshipHistory[i].RelationshipName.replace(/\\./g,". ").replace(/ /g,""), RelationshipHistory[i].RelationshipName.replace(/\\./g,". ")) #</td>\r\n                                <td>#: localizationHelper.localize(RelationshipHistory[i].Item.replace(/ /g,""), RelationshipHistory[i].Item) #</td>\r\n                                # } #\r\n\r\n                                # if (RelationshipHistory[i].ChangeType === "Update") { #\r\n                                <td><i class="fa fa-exchange text-info"></i></td>\r\n                                <td>#: localizationHelper.localize(RelationshipHistory[i].RelationshipName.replace(/\\./g,". ").replace(/ /g,""), RelationshipHistory[i].RelationshipName.replace(/\\./g,". ")) #</td>\r\n                                <td><strike class="text-danger">#: localizationHelper.localize(RelationshipHistory[i].PreviousItem.replace(/ /g,""), RelationshipHistory[i].PreviousItem) #</strike> <span class="text-success">#: localizationHelper.localize(RelationshipHistory[i].Item.replace(/ /g,""), RelationshipHistory[i].Item) #</span></td>\r\n                                # } #\r\n\r\n                            </tr>\r\n                            # } #\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n                # } #\r\n            </div>\r\n        </div>\r\n    </li>\r\n    # } #\r\n    # for (var i = 0; i < ActionLogHistory.length; i++) { #\r\n    <li class="timeline-inverted">\r\n        <div class="timeline-badge info"><i class="fa fa-user"></i></div>\r\n        <div class="timeline-panel">\r\n            <div class="timeline-heading">\r\n                <h4 class="timeline-title">#: localizationHelper.localize(ActionLogHistory[i].EnteredBy.replace(/ /g,""), ActionLogHistory[i].EnteredBy) #</h4>\r\n                <p><small class="text-muted"><i class="fa fa-clock-o"></i> #: kendo.toString(new Date(DateOccurred),\'g\') #</small></p>\r\n            </div>\r\n            <div class="timeline-body">\r\n                <h5>#: localizationHelper.localize(ActionLogHistory[i].ActionType.replace(/ /g,""), ActionLogHistory[i].ActionType) #</h5>\r\n                <blockquote>#: localizationHelper.localize(ActionLogHistory[i].Description.replace(/ /g,""), ActionLogHistory[i].Description) #</blockquote>\r\n            </div>\r\n        </div>\r\n    </li>\r\n    # } #\r\n<\/script>\r\n'}),profileMainBuilder.define("forms/predefined/history/controller",["require","text!forms/predefined/history/view.html"],function(e){var t=e("text!forms/predefined/history/view.html");return{template:t,build:function(e,i,n){var a=_.template(t),r=$(a(i));e.setWithNoDirty=function(t,i){var n=e.get("isDirty");e.set(t,i),e.set("isDirty",n)},r.find("#showHistoryDropDown").kendoDropDownList({dataSource:[{text:pageForm.viewModel.Id+" - "+pageForm.viewModel.Title,value:pageForm.viewModel.BaseId}],select:function(t){var i=this.dataItem(t.item);e.view.history.getObjectHistory(i.value,i.text)},open:function(t){e.view.history.dataSourceSet||(t.sender.setDataSource(e.view.history.getDropDownDataSource()),e.view.history.dataSourceSet=!0)}}).data("kendoDropDownList"),e.setWithNoDirty("historyLabel",{type:"info",text:""}),$.extend(e.view,{history:{loadHistory:function(){var t=$("#showHistoryDropDown").data("kendoDropDownList");e.view.history.getObjectHistory(t.value(),t.text())},dropDownDataSet:!1,getDropDownDataSource:function(){var e=[],t=function(i,n){n=n||"",e.push({text:n+i.Id+" - "+i.Title,value:i.BaseId}),void 0!==i.Activity&&i.Activity.length>0&&$.each(i.Activity,function(e,i){t(i,n+"    ")})};return t(pageForm.viewModel),e},getObjectHistory:function(t,i){e.setWithNoDirty("historyLabel",{type:"loading"}),e.setWithNoDirty("showHistory",!1),$.ajax({url:"/Search/GetObjectHistory",data:{id:t},type:"GET",cache:!1,success:function(t){e.setWithNoDirty("historyLabel",{type:"info",text:i});try{if(void 0===e.view.history.model){var n=kendo.observable({nodes:t});e.view.history.model=n,e.view.history.view=new kendo.View("viewHistoryTemplate",{model:n,wrap:!1,init:$.noop}),e.view.history.view.render($("#historyView"))}else e.view.history.model.set("nodes",t)}catch(e){}e.setWithNoDirty("showHistory",!0)},error:function(t){e.setWithNoDirty("historyLabel",{type:"error"})}})}}}),n(r)}}}),profileMainBuilder.define("text!forms/predefined/billableTime/view.html",[],function(){return'<div>\r\n    <div data-control="billableTime" data-control-bind="AppliesToWorkItem"\r\n        <% if ( Disabled ){ %>\r\n        disabled\r\n        <% } %>\r\n\r\n        >\r\n    <div class="row" data-bind="visible: view.billableTimeController.isVisible">\r\n        <div class="col-md-3">\r\n            <div class="form-group" data-cid="work-itemBillableTime" data-cid-propname="hours">\r\n                <label for="hourNumeric"><%= localization.hours %></label>\r\n                <div class="form-control form-control-picker input-sm">\r\n                    <input id="hourNumeric" data-role="numerictextbox"\r\n                           data-format="n0"\r\n                           data-min="0"\r\n                           data-bind="value: view.billableTimeController.btHour,\r\n                               events: {spin: view.billableTimeController.onHourSpin }"/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="col-md-3">\r\n            <div class="form-group" data-cid="work-itemBillableTime" data-cid-propname="minutes">\r\n                <label for="minuteNumeric"><%= localization.minutes %></label>\r\n                <div class="form-control form-control-picker input-sm">\r\n                    <input id="minuteNumeric" data-role="numerictextbox"\r\n                           data-format="n0"\r\n                           data-min="0"\r\n                           data-bind="value: view.billableTimeController.btMinute,\r\n                               events: {spin: view.billableTimeController.onMinuteSpin }"/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="col-md-6 margin-t30">\r\n            <button class="btn btn-primary" data-role="button" data-bind="events: {click: view.billableTimeController.onAddClick}" data-cid="billableTimeAddButton"><%= localization.Add %> </button>\r\n            <button class="btn btn-default" data-role="button" data-bind="events: {click: view.billableTimeController.onSubtractClick}" data-cid="billableTimeSubtractButton"><%= localization.Subtract %> </button>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-md-12">\r\n            <div data-control="grid"></div>\r\n            <div data-role="grid" class="billable-time-grid"\r\n                 data-bind="source: view.billableTimeController.dataSource, events:{dataBinding: view.billableTimeController.onDataBinding, dataBound: view.billableTimeController.onDataBound}"\r\n                 data-selectable="false"\r\n                 data-sortable="true"\r\n                 data-filterable="true"\r\n                 data-scrollable="false"\r\n                 data-column-menu="true"\r\n                 data-pageable="false"\r\n                 data-editable="{mode: \'incell\'}"\r\n                 data-columns=\'[\r\n                { field: "BillableTime.DisplayName", title: localization.Analyst, width: "300px", attributes: { "class": "grid-highlight-column" } },\r\n                { field: "BaseId", title: localization.BaseId, width: "30px", hidden: true },\r\n                { field: "LastUpdatedDisplay", title: localization.LastUpdated, width: "100px" },\r\n                { field: "TimeInMinutes", title: localization.TimeInMinutes, width: "100px", attributes: { "class": "pull-right" } },\r\n                <% if ( !Disabled ){ %>\r\n                 { width: "100px", command: [{ name: "destroy", buttonType: "ImageAndText", text: localization.Remove}]}\r\n                <% } %>\r\n            ]\'>\r\n            </div>\r\n            <div class="pull-right">\r\n                <label data-bind="html: view.billableTimeController.btTotalTimeInString"></label>\r\n            </div>\r\n        </div>\r\n        </div>\r\n</div>\r\n</div>'}),profileMainBuilder.define("forms/predefined/billableTime/controller",["require","text!forms/predefined/billableTime/view.html"],function(e){var t=e("text!forms/predefined/billableTime/view.html");return{template:t,build:function(e,i,n){var a=_.template(t),r={Disabled:i.disabled,PropertyName:"AppliesToWorkItem"};$.extend(!0,r,i);var o=r.PropertyName,l=_.isUndefined(boundObj[o])?boundObj[o]=new kendo.data.ObservableArray([]):boundObj[o];l.LastUpdatedDisplay="",e.view.billableTimeController=new kendo.observable({btHour:0,btMinute:0,btTotalTime:0,btTotalTimeInString:"",onHourSpin:function(t){e.view.billableTimeController.set("btHour",t.sender.value())},onMinuteSpin:function(t){e.view.billableTimeController.set("btMinute",t.sender.value())},dataSource:new kendo.data.DataSource({schema:{data:"Data",total:"Total",errors:"Errors",model:{id:"BaseId"}},data:{Data:l,Total:l.length}}),onDataBinding:function(e){$.each(l,function(e,t){_.isUndefined(t.BillableTime)&&(t.BillableTime={BasedId:null,DisplayName:null}),t.LastUpdatedDisplay=_.isUndefined(t.LastUpdated)?null:kendo.toString(new Date(t.LastUpdated),"g")})},onDataBound:function(e){for(var t in e.sender._data){var i=e.sender._data[t];if(_.isNull(i.BillableTime.BasedId)){e.sender.tbody.find("tr[data-uid='"+i.uid+"']").hide()}}},onAddClick:function(t){var i=e.view.billableTimeController.btHour,n=e.view.billableTimeController.btMinute,a=(e.view.billableTimeController.btTotalTime,!1);if($.each(l,function(e,t){if(t.BillableTime.BaseId===session.user.Id)return t.set("LastUpdated",(new Date).toISOString()),t.set("TimeInMinutes",parseInt(t.get("TimeInMinutes"))+60*i+n),a=!0,!1}),!a){var r={BillableTime:{BaseId:session.user.Id,DisplayName:session.user.Name},LastUpdated:(new Date).toISOString(),LastModified:(new Date).toISOString(),TimeInMinutes:60*i+n,BasedId:app.lib.newGUID(),Image:app.config.iconPath+app.config.icons.comment,EnteredDate:(new Date).toISOString(),ClassTypeId:"6645cdbe-78a3-ab81-7de9-638b733214fe",EnteredBy:session.user.Name,Title:null,Description:null};l.push(r)}e.view.billableTimeController.computeTotalTime(),e.view.billableTimeController.resetTime()},onSubtractClick:function(t){var i=e.view.billableTimeController.btHour,n=e.view.billableTimeController.btMinute,a=e.view.billableTimeController.btTotalTime;a<60*i||a<n?kendo.ui.ExtAlertDialog.show({title:localization.SubtractTimeTitle,message:localization.SubtractTimeMessage}):($.each(l,function(e,t){t.BillableTime.BaseId===session.user.Id&&(t.set("LastUpdated",(new Date).toISOString()),t.set("TimeInMinutes",parseInt(t.get("TimeInMinutes"))-60*i-n),isExisting=!0)}),e.view.billableTimeController.computeTotalTime(),e.view.billableTimeController.resetTime())},computeTotalTime:function(t){var i=0;$.each(l,function(e,t){"6645cdbe-78a3-ab81-7de9-638b733214fe"===t.get("ClassTypeId")&&(i+=parseInt(t.get("TimeInMinutes")))}),l.length>1&&null!=e.view.billableTimeController.get("btTotalTime")&&(i+=parseInt(e.view.billableTimeController.get("btTotalTime"))),e.view.billableTimeController.btTotalTime=i,e.view.billableTimeController.btTotalTimeInString="{0} : {1} {2}".replace("{0}",localization.Totaltime).replace("{1}",e.view.billableTimeController.btTotalTime).replace("{2}",localization.minutes)},resetTime:function(){$("#hourNumeric").data("kendoNumericTextBox").value(0),e.view.billableTimeController.set("btHour",0),$("#minuteNumeric").data("kendoNumericTextBox").value(0),e.view.billableTimeController.set("btMinute",0)},isVisible:!e.isDisabled}),e.view.billableTimeController.computeTotalTime(),n(new kendo.View(a(r),{wrap:!1,model:e}).render())}}}),profileMainBuilder.define("text!forms/predefined/knowledgeArticle/view.html",[],function(){return'<div data-bind="templateResources:\'resources\'" style="display:none">\r\n    <div data-template-name="mobileHTMLGridTemplate" class="mobile-grid">\r\n        \x3c!-- repeated template content here --\x3e\r\n        <div class="gridcard gridcard--form">\r\n            <p class="gridcard__title">${KnowledgeArticleID}: ${Title}</p>\r\n            <div class="gridcard__detailblock">\r\n                # if ( Category && Category.length > 0 ){ #\r\n                <p>#: localizationHelper.localize("Category") #: #: Category # </p>\r\n                # } #\r\n                # if ( Type && Type.length > 0 ){ #\r\n                <p>#: localizationHelper.localize("Type") #: #: Type # </p>\r\n                # } #\r\n            </div>\r\n            <div class="gridcard__detailblock">\r\n                <a class="k-delete-button">#: localization.Remove #</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="row">\r\n    <div class="col-md-12 file-attachments"\r\n        <% if ( Disabled ){ %>\r\n        disabled\r\n        <% } %>>\r\n    <div>\r\n        <button class="btn btn-primary" data-role="button" data-bind="events:{click: view.knowledgeArticleModel.addClick}"><%= localization.Add %> </button>\r\n    </div>\r\n    \r\n    <% if ( IsMobileView == false ){ %>\r\n        <div data-role="grid"\r\n            data-bind="source: RelatedHTMLKB, events:{remove: view.knowledgeArticleModel.removeRelatedKB}"\r\n            data-selectable="true"\r\n            data-sortable="true"\r\n            data-filterable="true"\r\n            data-scrollable="false"\r\n            data-column-menu="true"\r\n            data-pageable="false"\r\n            data-editable="{mode: \'incell\', create: false, update: false}"\r\n            data-columns=\'[\r\n                { field: "KnowledgeArticleID", title: localization.Id, width: "10%", attributes:{class:"grid-highlight-column"}},\r\n                { field: "Title", title: localization.Title, width: "50%", attributes:{class:"grid-highlight-column"}},\r\n                { field: "Category", title: localization.Category, width: "20%" },\r\n                { field: "Type", title: localization.Type, width: "20%" },\r\n                { width: "4%", command: [{ name: "destroy", buttonType: "ImageAndText", text: localization.Remove }] }\r\n                ]\'>\r\n        </div>\r\n    <% } %>\r\n    <% if ( IsMobileView ){ %>\r\n        <div data-role="listview" data-template="mobileHTMLGridTemplate" data-bind="source: RelatedHTMLKB, events: {remove: view.knowledgeArticleModel.removeRelatedKB}" class="mobile-grid-parent"></div>\r\n    <% } %>\r\n</div>\r\n'}),profileMainBuilder.define("text!forms/predefined/knowledgeArticle/popup.html",[],function(){return'<div class="cireson-window defined-form task-window hide">\r\n    <div class="cireson-window--wrapper">\r\n        <div class="cireson-window--body">\r\n            <div class="row">\r\n                <div class="col-md-5">\r\n                    <div class="form-group">\r\n                        <label><%= localization.SearchText %></label>\r\n                        <span class="k-textbox k-space-right">\r\n                            <input type="text" data-bind="value: searchText" />\r\n                            <span data-bind="events:{click: search}" class="fa fa-search cursor-pointer">&nbsp;</span>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <label><%= localization.SelectObjects %></label>\r\n\r\n            <div class="objectPicker-container">\r\n                <div class="k-widget k-grid k-secondary"\r\n                     data-role="grid"\r\n                     data-bind="source: dataSource"\r\n                     data-selectable="multiple, row"\r\n                     data-sortable="true"\r\n                     data-filterable="true"\r\n                     data-scrollable="false"\r\n                     data-column-menu="true"\r\n                     data-pageable="true"\r\n                     data-editable="{mode: \'incell\', create: false, update: false}"\r\n                     data-columns=\'[\r\n                { field: "ArticleId", title: localization.Id, width: "10%"},\r\n                { field: "Title", title: localization.Title, width: "90%"}\r\n                ]\'>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="objectPicker-actions">\r\n                <button data-role="button" data-bind="events:{click: add}" class="btn btn-primary k-button"><%= localization.Add %> </button>\r\n                <button data-role="button" data-bind="events:{click: remove}" class="btn btn-danger k-button"><%= localization.Remove %> </button>\r\n            </div>\r\n\r\n            <div class="k-widget k-grid k-secondary objectPicker-grid2-container"\r\n                 data-role="grid"\r\n                 data-bind="source: selectedItems"\r\n                 data-selectable="multiple, row"\r\n                 data-sortable="true"\r\n                 data-filterable="true"\r\n                 data-scrollable="false"\r\n                 data-column-menu="true"\r\n                 data-pageable="true"\r\n                 data-editable="{mode: \'incell\', create: false, update: false}"\r\n                 data-columns=\'[\r\n                { field: "ArticleId", title: localization.Id, width: "10%"},\r\n                { field: "Title", title: localization.Title, width: "90%"}\r\n                ]\'>\r\n            </div>\r\n\r\n        </div>\r\n        <div class="cireson-window--footer window-buttons">\r\n            <button data-role="button"\r\n                    class="btn btn-primary"\r\n                    data-bind="events: { click: save }">\r\n                <%= localization.OK %>\r\n            </button>\r\n            <button data-role="button"\r\n                    class="btn btn-default"\r\n                    data-bind="events: { click: cancel }">\r\n                <%= localization.Cancel %>\r\n            </button>\r\n        </div>\r\n    </div>\r\n    \r\n</div>\r\n'}),profileMainBuilder.define("forms/predefined/knowledgeArticle/controller",["require","text!forms/predefined/knowledgeArticle/view.html","text!forms/predefined/knowledgeArticle/popup.html"],function(e){var t=e("text!forms/predefined/knowledgeArticle/view.html"),i=e("text!forms/predefined/knowledgeArticle/popup.html");return{template:t,build:function(e,n,a){var r={Disabled:!1,IsMobileView:app.isMobileDevice()};$.extend(!0,r,n);var o=_.template(i),l=new kendo.View(o(r),{wrap:!1});a(l.render()),e.view.knowledgeArticleModel=kendo.observable({addClick:function(t){var i=l.element;win=i.kendoCiresonWindow({title:localization.SelectObject,width:750,height:710,actions:[]}).data("kendoWindow");var n=new kendo.observable({dataSource:new kendo.data.DataSource({transport:{read:{url:"/api/V3/KnowledgeBase/GetHTMLArticles",dataType:"json",data:{userId:session.user.Id},cache:!1}},schema:{model:{fields:{ArticleId:{type:"string"},Title:{type:"string"},Category:{type:"string"},Type:{type:"string"}}}},pageSize:5}),selectedItems:new kendo.data.ObservableArray([]),searchText:"",search:function(e){var t=this.get("searchText");this.dataSource.read(),this.dataSource.filter({logic:"or",filters:[{field:"ArticleId",operator:"contains",value:t},{field:"Title",operator:"contains",value:t},{field:"Category",operator:"contains",value:t},{field:"Type",operator:"contains",value:t}]})},add:function(e){for(var t=i.find('[data-role="grid"]').first(),n=t.data("kendoGrid"),a=n.select(),r=0;r<a.length;r++){var o=n.dataItem(a[r]);if(o){var l=_.pluck(this.selectedItems,"ArticleId");_.contains(l,o.ArticleId)||this.selectedItems.push(o)}}i.find('[data-role="grid"]').last().data("kendoGrid").dataSource.query({page:1,pageSize:5})},remove:function(e){for(var t=i.find('[data-role="grid"]').last(),n=t.data("kendoGrid"),a=n.select(),r=0;r<a.length;r++){var o=n.dataItem(a[r]);this.selectedItems.pop(o)}},save:function(t){var i=_.isUndefined(e.get("RelatedHTMLKB"))?[]:e.get("RelatedHTMLKB");_.each(this.selectedItems,function(t){i.push({KnowledgeArticleID:t.ArticleId,WorkItemID:-1!=e.ClassName.indexOf("WorkItem")?e.BaseId:null,WorkItemId:-1!=e.ClassName.indexOf("WorkItem")?e.Id:null,AssetID:-1!=e.ClassName.indexOf("AssetManagement")?e.BaseId:null,AssetId:-1!=e.ClassName.indexOf("AssetManagement")?e.Id:null,Title:t.Title,Category:t.Category,Type:t.Type})}),e.set("RelatedHTMLKB",i),win.close()},cancel:function(e){win.close()}});kendo.bind(i,n),i.removeClass("hide"),i.show(),win.open()},bindRowClick:function(e){var t=s.element.find('[data-role="grid"]').first();if(t.on("click","td",function(e){if($(e.currentTarget).hasClass("grid-highlight-column")){var i=t.data("kendoGrid"),n=i.dataItem($(e.currentTarget).closest("tr"));window.open("/KnowledgeBase/View/"+n.KnowledgeArticleID,"_blank")}}),!app.isMobile()){var i=t.data("kendoGrid");i.dataSource.originalFilter=i.dataSource.filter,i.dataSource.filter=function(){var e=i.dataSource.originalFilter.apply(this,arguments);return arguments.length>0&&this.trigger("filterApplied",arguments),e},i.dataSource.bind("filterApplied",function(){if($.each($(t).find("th a.k-header-column-menu i"),function(){$(this).remove()}),i.dataSource.filter()){var e=i.dataSource.filter().filters||[],n=[];for(var a in e)if(e[a].filters){var r=e[a].filters;for(var o in r)n.push(r[o])}else n.push(e[a]);n=_.uniq(n,function(e){return e.field});for(var a in n)$(t).find("th[data-field="+n[a].field+"] a.k-header-column-menu").append('<i class="fa fa-filter"></i>')}})}},getAllRelatedWorkItems:function(t){var i=_.isUndefined(e.get("RelatedHTMLKB"))?new kendo.data.ObservableArray([]):e.get("RelatedHTMLKB"),n="";-1!=e.ClassName.indexOf("WorkItem")?n=app.lib.addUrlParam("/api/V3/Article/GetArticlesRelatedToWorkItem","workItemId",e.BaseId):-1!=e.ClassName.indexOf("AssetManagement")&&(n=app.lib.addUrlParam("/api/V3/Article/GetArticlesRelatedToAsset","assetId",e.BaseId)),$.ajax({url:n,dataType:"json",type:"POST",success:function(t){_.each(t,function(t){i.push({KnowledgeArticleID:t.ArticleID,WorkItemID:-1!=e.ClassName.indexOf("WorkItem")?e.BaseId:null,WorkItemId:-1!=e.ClassName.indexOf("WorkItem")?e.Id:null,AssetID:-1!=e.ClassName.indexOf("AssetManagement")?e.BaseId:null,AssetId:-1!=e.ClassName.indexOf("AssetManagement")?e.Id:null,Title:t.Title,Category:t.CategoryName,Type:t.TypeName})}),i.length>0&&e.set("RelatedHTMLKB",i)},error:function(e){app.lib.log(e.errorThrown+" - When retrieving data from /api/V3/Article/GetArticlesRelatedToWorkItem")}})},removeRelatedKB:function(t){var i=_.isUndefined(e.get("RemoveRelatedHTMLKB"))?new kendo.data.ObservableArray([]):e.get("RemoveRelatedHTMLKB");i.push(t.model),e.set("RemoveRelatedHTMLKB",i)}});var o=_.template(t),s=new kendo.View(o(r),{wrap:!1,model:e.view.knowledgeArticleModel});a(s.render()),e.view.knowledgeArticleModel.getAllRelatedWorkItems(),e.view.knowledgeArticleModel.bindRowClick()}}}),profileMainBuilder.define("text!forms/predefined/fileAttachmentsDragDrop/view.html",[],function(){return'<div class="form-group">\r\n    <div class="drop-zone-element">\r\n        <div class="text-wrapper">\r\n            <span class="drag-image-text">\r\n                <img data-bind="visible:isDesktop" src="/Content/Images/Icons/FileUpload/upload_to_cloud.svg" />\r\n                <span data-bind="visible:isDesktop"><b><%= localization.DragAndDrop %> </b> <%= localization.YourFilesOr %> <a class="browse-file"><b><%= localization.Browse %></b></a></span>\r\n                <a  data-bind="visible:isMobile" class="browse-file"><b><%= localization.Browse %></b></a>\r\n                <div style="display:none"><input name="files" id="files" type="file"/></div>\r\n            </span>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div>\r\n    <div class="fileattachment-list"></div>\r\n    <div class="fileattachment-img-modal"></div>\r\n</div>\r\n\r\n<script type="text/x-kendo-template" id="fileTemplate">\r\n    <div class="thumbnail-file">\r\n        <div class="cursor-pointer thumbnail-img">\r\n            # if (DisplayName.toLowerCase().match(/\\.(jpg|jpeg|png|gif)$/)) { #\r\n            <img src="data:image/png;base64,#= Content.data #" onerror="this.onerror = null; this.src = \'/Content/Images/Icons/FileUpload/document.svg\';" alt="#: DisplayName # image" />\r\n            # } else{ #\r\n            <img class="default-icon" src="/Content/Images/Icons/FileUpload/document.svg" onerror="this.onerror = null; this.src = \'/Content/Images/Icons/FileUpload/document.svg\'">\r\n            # } #\r\n        </div>\r\n        <div class="thumbnail-caption">\r\n            <span>#: DisplayName #</span>\r\n            <div class="overlay">\r\n                # if (DisplayName.toLowerCase().match(/\\.(jpg|jpeg|png|gif)$/)) { #\r\n                <span class="label">\r\n                    <a class="icon custom-click view" view-image title="View Image">\r\n                        <i class="fa fa-eye"></i>\r\n                    </a>\r\n                </span>\r\n                <span class="label">\r\n                    <a class="icon custom-click opennewtab" title="Open in New Tab">\r\n                        <i class="fa fa-external-link"></i>\r\n                    </a>\r\n                </span>\r\n                # } #\r\n                # if (BaseId!=null) { #\r\n                <span class="label">\r\n                    <a class="icon custom-click download" title="Download">\r\n                        <i class="fa fa-download"></i>\r\n                    </a>\r\n                </span>\r\n                # } #\r\n                <span class="label">\r\n                    <a class="k-delete-button icon" href="\\\\#"  title="<%= localization.Remove %>"><i class="fa fa-trash"></i></a>\r\n                </span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n<\/script>\r\n<style>\r\n\r\n</style>'}),
profileMainBuilder.define("forms/predefined/fileAttachmentsDragDrop/controller",["require","text!forms/predefined/fileAttachmentsDragDrop/view.html"],function(e){var t=e("text!forms/predefined/fileAttachmentsDragDrop/view.html");return{template:t,build:function(e,i,n){var a=_.template(t);!_.isUndefined(localization[i.name])&&[i.name].length>0&&(i.name=localization[i.name]),!_.isUndefined(e.FileAttachment)&&e.FileAttachment.length>0&&_.each(e.FileAttachment,function(e){e.DisplayName.toLowerCase().match(/\.(jpg|jpeg|png|gif)$/)&&$.ajax({type:"GET",async:!1,url:"/FileAttachment/GetFileContent/",data:{id:e.BaseId}}).then(function(t){e.Content.data=t})});var r={Required:i.Required,BaseId:e.BaseId,AcceptExtension:_.isUndefined(i.AcceptExtension)?"":e.AcceptExtension,ClassName:e.Clas};$.extend(!0,r,i);var o=$(a(r)),l=new kendo.observable({isDesktop:!app.isMobile(),isMobile:app.isMobile(),isEnabled:!0,isVisible:!0,onSelect:function(e){o.find(".k-file-error").remove(),$.each(e.files,function(t,n){_.isUndefined(i.AcceptExtension)||""==i.AcceptExtension||i.AcceptExtension.toLowerCase().indexOf(n.extension.toLowerCase())>-1||(kendo.ui.ExtAlertDialog.show({title:localization.ErrorDescription,message:localization.FileExtensionInvalid+i.AcceptExtension,icon:"fa fa-exclamation"}),e.preventDefault())})},onUploadSuccess:function(t){var i=(_.isUndefined(e.FileAttachment)||e.FileAttachment,t.response);if("upload"==t.operation)for(var n=0;n<t.files.length;n++){var a=t.files[n].rawFile;a&&(_.isUndefined(i.FileAttachment)?_.isUndefined(i.success)||0!=i.success||kendo.ui.ExtAlertDialog.show({title:localization.ErrorDescription,message:i.message,icon:"fa fa-exclamation"}):e.FileAttachment.push(i.FileAttachment))}},onUploadError:function(e){$.parseJSON(e.XMLHttpRequest.responseText);$.map(e.files,function(e){console.warn("Could not upload "+e.name)})},onRemove:function(t){$.get("/FileAttachment/RemoveFileUpload/",{BaseId:e.BaseId,fieldName:i.PropertyName},function(t){o.find(".k-file").parent().remove(),o.find("#div"+i.PropertyName).hide(),e[i.PropertyName]=null})},onOpenFile:function(e){if(e.hasClass("opennewtab")){var t=window.open("about:blank");setTimeout(function(){t.document.body.appendChild(t.document.createElement("img")).src=e.closest(".thumbnail-file").find(".thumbnail-img img")[0].src,t.href=e.closest(".thumbnail-file").find(".thumbnail-img img")[0].src,t.focus()},0)}else{var i=$(".fileattachment-img-modal"),n=app.config.rootURL+"FileAttachment/ViewFile/",a=o.find(".fileattachment-list").data("kendoListView"),r=e.closest("[role='option']"),l=a.dataSource.getByUid(r.data("uid"));if(l.DisplayName.toLowerCase().match(/\.(jpg|jpeg|png|gif)$/)&&!e.hasClass("download"))i.kendoDialog({modal:!0,title:l.DisplayName,content:"<div class='file-img-container'><img src=\"data:image/png;base64,"+l.Content.data+'" onerror="this.onerror = null; this.src = \'/Content/Images/Icons/FileUpload/document.svg\';" alt="'+l.DisplayName+'" /></div>',animation:{open:{effects:"fade:in"}}}),$(".k-window.k-widget").addClass("acivity-popup-window"),i.data("kendoDialog").open(),i.parent().css("position","fixed");else if(l.Content.data&&!l.DisplayName.toLowerCase().match(/\.(jpg|jpeg|png|gif)$/)){var s=new Blob([l.Content.data]),d=window.URL.createObjectURL(s),c=l.DisplayName;if(navigator.msSaveOrOpenBlob)return void navigator.msSaveOrOpenBlob(s,c);if(window.navigator.msSaveBlob)return void window.navigator.msSaveBlob(s,c);var u=document.createElement("a");document.body.appendChild(u),u.style="display: none",u.href=d,u.download=c,u.click(),window.URL.revokeObjectURL(d),document.body.removeChild(u)}else l.BaseId&&null!=l.BaseId&&(location.href=n+l.BaseId)}}});_.defer(function(){kendo.bind(o,l),o.find(".fileattachment-list").kendoListView({dataSource:e.FileAttachment,template:kendo.template($("#fileTemplate").html()),selectable:"single",dataBound:function(){o.find(".custom-click").on("click",function(){l.onOpenFile($(this))}),app.isMobile()||(o.find("a[view-image]").parent().hide(),o.find(".thumbnail-img img").on("click",function(){l.onOpenFile($(this))}))}}),$("#files").kendoUpload({async:{saveUrl:"/FileAttachment/UploadAttachment/"+e.BaseId+"?className="+e.ClassName,removeUrl:"remove",autoUpload:!0},success:l.onUploadSuccess,error:l.onUploadError,showFileList:!1,dropZone:".drop-zone-element"}),$(".browse-file").click(function(e){$("#files").trigger("click")})}),n(o)}}}),profileMainBuilder.define("text!forms/fields/string/view.html",[],function(){return'<div class="form-group">\r\n    <label class="control-label" for="<%= PropertyName %>" data-localize="<%= PropertyDisplayName %>">\r\n        <span><% if ( Required ){ %> <%= \'(\' + localization.Required + \')\' %><% } %></span>\r\n    </label>\r\n    <input type="text"\r\n           name="<%= PropertyName %>"\r\n           class="k-textbox form-control input-sm"\r\n           data-bind="value: <%= PropertyName %><% if ( LimitLength ){ %>, events : { blur: view.stringController.CheckLength }<% } %>"\r\n\r\n\r\n    <% if ( LimitLength ){ %>\r\n    maxlength="<%= MaxLength %>"\r\n    <% } %>\r\n\r\n    <% if ( Disabled ){ %>\r\n    disabled\r\n    <% } %>\r\n\r\n    <% if ( Required ){ %>\r\n    required\r\n    <% } %>\r\n\r\n    />\r\n\r\n    <% if ( LimitLength ){ %>\r\n    <p class="help-block validation-summary-errors" style="display: none;"><%= localization.MaxLengthError.replace("{0}", MaxLength) %></p>\r\n    <% } %>\r\n\r\n</div>'}),profileMainBuilder.define("forms/fields/string/controller",["require","text!forms/fields/string/view.html"],function(e){var t=e("text!forms/fields/string/view.html");return{template:t,build:function(e,i,n){var a=i.vm,r=new kendo.View;_.isUndefined(a.view)&&(a.view=[]),a.view.stringController={CheckLength:function(e){setTimeout(function(){var t=$(e.currentTarget),i=t.next(),n=t.attr("maxlength");t.val().length>n?(t.attr("data-invalid",""),i.show()):(i.hide(),t.removeAttr("data-invalid"),t.data("prevent",!1))},100)}},a.view.buildStringView=function(){var e=_.template(t),o=!1;_.isUndefined(i.MinLength)&&_.isUndefined(i.MaxLength)||(o=!0);var l={Required:i.Required,Disabled:i.disabled,MinLength:i.MinLength,MaxLength:i.MaxLength,LimitLength:o};$.extend(!0,l,i),r=new kendo.View(e(l),{wrap:!1,model:a}),n(r.render())},a.view.buildStringView()}}}),profileMainBuilder.define("text!forms/fields/longstring/view.html",[],function(){return'<div class="form-group <%= visible %>" style="">\r\n\r\n    <label class="control-label" for="<%= PropertyName %>" data-localize="<%= PropertyDisplayName %>">\r\n        <span><% if ( Required ){ %> <%= \'(\' + localization.Required + \')\' %><% } %></span>\r\n    </label>\r\n    <textarea name="<%= PropertyName %>"\r\n              class="k-textbox form-control input-sm"\r\n              rows="<%= Rows %>"\r\n              data-bind="value: <%= PropertyName %><% if ( LimitLength ){ %>, events : { blur: view.longStringController.CheckLength }<% } %>"\r\n        <% if ( LimitLength ){ %>\r\n        maxlength="<%= MaxLength %>"\r\n        <% } %>\r\n\r\n        <% if ( Disabled ){ %>\r\n        disabled\r\n        <% } %>\r\n\r\n        <% if ( Required ){ %>\r\n        required\r\n        <% } %>\r\n\r\n        >\r\n    </textarea>\r\n    <% if ( LimitLength ){ %>\r\n    <p class="help-block validation-summary-errors" style="display: none;"><%= localization.MaxLengthError.replace("{0}", MaxLength) %></p>\r\n    <% } %>\r\n</div>\r\n<script>\r\n    $(\'textarea[name=ResolutionDescription]\').removeClass(\'form-control\');\r\n<\/script>\r\n'}),profileMainBuilder.define("forms/fields/longstring/controller",["require","text!forms/fields/longstring/view.html"],function(e){var t=e("text!forms/fields/longstring/view.html");return{template:t,build:function(e,i,n){var a=i.vm,r=new kendo.View;_.isUndefined(a.view)&&(a.view=[]),a.view.longStringController={CheckLength:function(e){setTimeout(function(){var t=$(e.currentTarget),i=t.next(),n=t.attr("maxlength");t.val().length>n?(t.attr("data-invalid",""),i.show()):(i.hide(),t.removeAttr("data-invalid"),t.data("prevent",!1))},100)}},a.view.buildLongStringView=function(){var e=_.template(t),o=!1;_.isUndefined(i.MinLength)&&_.isUndefined(i.MaxLength)||(o=!0);var l={Required:i.Required,Disabled:i.disabled,MinLength:i.MinLength,MaxLength:i.MaxLength,LimitLength:o,Rows:10,visible:_.isUndefined(i.IsVisible)||0!=i.IsVisible?"":"hidden"};$.extend(!0,l,i),r=new kendo.View(e(l),{wrap:!1,model:a}),n(r.render())},a.view.buildLongStringView()}}}),profileMainBuilder.define("text!forms/fields/boolean/view.html",[],function(){return'<div class="form-group <%= visible %>">\r\n    <% if ( !Inline ){ %>\r\n    <label class="control-label" data-localize="<%= PropertyDisplayName %>"><span><% if ( Required ){ %> <%= \'(\' + localization.Required + \')\' %><% } %></span></label>\r\n    <% } %>\r\n\r\n    <div class="checkbox <% if ( Inline ){ %> checkbox-inline <% } else { %> checkbox-block <% } %>">\r\n        <input type="checkbox"\r\n               name="<%= PropertyName %>"\r\n               id="<%= PropertyName %>"\r\n               data-bind="checked: <%= PropertyName %>"<% if ( Disabled ){ %>\r\n        disabled\r\n        <% } %>\r\n\r\n        />\r\n\r\n\r\n        <label class="control-label" for="<%= PropertyName %>">\r\n            <% if ( Inline ){ %>\r\n            <span data-localize="<%= PropertyDisplayName %>"></span>\r\n            <% } %>\r\n        </label>\r\n\r\n    </div>\r\n</div>'}),profileMainBuilder.define("forms/fields/boolean/controller",["require","text!forms/fields/boolean/view.html"],function(e){var t=e("text!forms/fields/boolean/view.html");return{template:t,build:function(e,i,n){var a=_.template(t),r={Disabled:i.disabled,Required:i.Required,Inline:i.Inline||!1,visible:_.isUndefined(i.IsVisible)||0!=i.IsVisible?"":"hidden"};$.extend(!0,r,i),n(a(r))}}}),profileMainBuilder.define("text!forms/fields/display/view.html",[],function(){return'<div class="form-group">\r\n    <% if ( !HideLabel ){ %>\r\n    <label class="control-label" for="<%= PropertyName %>" data-localize="<%= PropertyDisplayName %>"></label>\r\n    <% } %>\r\n    <div class="display-field" data-bind="text: <%= PropertyName %>"></div>\r\n</div>'}),profileMainBuilder.define("forms/fields/display/controller",["require","text!forms/fields/display/view.html"],function(e){var t=e("text!forms/fields/display/view.html");return{template:t,build:function(e,i,n){var a=_.template(t),r={HideLabel:!1};$.extend(!0,r,i),n(a(r))}}}),profileMainBuilder.define("text!forms/fields/spacer/view.html",[],function(){return'<div class="form-group">\r\n\r\n</div>'}),profileMainBuilder.define("forms/fields/spacer/controller",["require","text!forms/fields/spacer/view.html"],function(e){var t=e("text!forms/fields/spacer/view.html");return{template:t,build:function(e,i,n){var a=_.template(t),r={};$.extend(!0,r,i),n(a(r))}}}),profileMainBuilder.define("text!forms/fields/numeric/view.html",[],function(){return'<div data-cid="NumericControl" data-cid-propname="<%= PropertyName %>" class="form-group">\r\n    <label class="control-label" for="<%= PropertyName %>" data-localize="<%= PropertyDisplayName %>">\r\n        <span><% if ( Required ){ %> <%= \'(\' + localization.Required + \')\' %><% } %></span>\r\n    </label>\r\n    <input type="number"\r\n           name="<%= PropertyName %>"\r\n           class="form-control form-control-picker input-sm"\r\n           data-control="numericTextBox"\r\n           data-bind="value: <%= PropertyName %>"\r\n           data-control-decimals="<%= DecimalPlaces %>"\r\n           data-control-min="<%= MinValue%>"\r\n           data-control-max="<%= MaxValue %>"\r\n           data-step="<%= StepIncrement %>"\r\n           data-format="<%= Format%>"\r\n\r\n            <% if ( Disabled ){ %>\r\n                disabled\r\n            <% } %>\r\n\r\n            <% if ( Required ){ %>\r\n            required\r\n            <% } %>\r\n\r\n    />\r\n</div>'}),profileMainBuilder.define("forms/fields/numeric/controller",["require","text!forms/fields/numeric/view.html"],function(e){var t=e("text!forms/fields/numeric/view.html");return{template:t,build:function(e,i,n){var a=_.template(t),r={Required:i.Required,DecimalPlaces:2,MinValue:0,MaxValue:100,StepIncrement:1,Disabled:i.disabled,Format:""};$.extend(!0,r,i),n(a(r))}}}),profileMainBuilder.define("forms/fields/int/controller",["require","text!forms/fields/numeric/view.html"],function(e){var t=e("text!forms/fields/numeric/view.html"),i=function(e,t,i){if(app.isMobile()){e.data();setTimeout(function(){var n=e.parent().find("input[type='number']");n.change(function(){t.set(i.PropertyName,n.val())})},100)}};return{template:t,build:function(e,n,a){var r=_.template(t),o=n.vm,l={Required:n.Required,DecimalPlaces:0,MinValue:-2147483648,MaxValue:2147483648,StepIncrement:1,Disabled:n.disabled,Format:""};$.extend(!0,l,n);var s=$(r(l));new i(s.find("[data-control='numericTextBox']"),o,n),a(s)}}}),profileMainBuilder.define("forms/fields/decimal/controller",["require","text!forms/fields/numeric/view.html"],function(e){var t=e("text!forms/fields/numeric/view.html");return{template:t,build:function(e,i,n){var a=_.template(t),r={DecimalPlaces:20,MinValue:"",MaxValue:"",StepIncrement:1,Disabled:i.disabled,Required:i.Required,Format:""};$.extend(!0,r,i),n(a(r))}}}),profileMainBuilder.define("forms/fields/double/controller",["require","text!forms/fields/numeric/view.html"],function(e){var t=e("text!forms/fields/numeric/view.html");return{template:t,build:function(e,i,n){var a=_.template(t),r={DecimalPlaces:19,MinValue:"",MaxValue:"",StepIncrement:1,Disabled:i.disabled,Required:i.Required,Format:""};$.extend(!0,r,i),n(a(r))}}}),profileMainBuilder.define("text!forms/fields/date/view.html",[],function(){return'<div class="form-group"\r\n    <% if ( Required ){ %>\r\n    required\r\n    <% } %>\r\n    >\r\n    <label class="control-label" for="<%= PropertyName %>" data-localize="<%= PropertyDisplayName %>">\r\n        <span><% if ( Required ){ %> <%= \'(\' + localization.Required + \')\' %><% } %></span>\r\n    </label>\r\n    <input name="<%= PropertyName %>"\r\n           data-control="datePicker"\r\n           data-control-bind="<%= PropertyName %>"\r\n           data-control-from="<%= FromFilter %>"\r\n           data-control-to="<%= ToFilter %>"\r\n           data-control-from-relative="<%= FromRelative %>"\r\n           data-control-to-relative="<%= ToRelative %>"\r\n    <% if ( Disabled ){ %>\r\n    disabled\r\n    <% } %>\r\n\r\n     />\r\n</div>'}),profileMainBuilder.define("forms/fields/date/controller",["require","text!forms/fields/date/view.html"],function(e){var t=e("text!forms/fields/date/view.html");return{template:t,build:function(e,i,n){var a=_.template(t),r={FromFilter:"",ToFilter:"",FromRelative:"",ToRelative:"",Disabled:i.disabled,Required:i.Required};void 0!=i.MinValue&&(-1!=i.MinValue.indexOf(":")?r.FromRelative=i.MinValue:"string"==typeof i.MinValue&&(r.FromFilter=i.MinValue)),void 0!=i.MaxValue&&(-1!=i.MaxValue.indexOf(":")?r.ToRelative=i.MaxValue:"string"==typeof i.MaxValue&&(r.ToFilter=i.MaxValue)),$.extend(!0,r,i),n(a(r))}}}),profileMainBuilder.define("text!forms/fields/datetime/view.html",[],function(){return'<div class="form-group">\r\n    <label class="control-label" for="<%= PropertyName %>" data-localize="<%= PropertyDisplayName %>">\r\n        <span><% if ( Required ){ %> <%= \'(\' + localization.Required + \')\' %><% } %></span>\r\n    </label>\r\n\r\n    <input name="<%= PropertyName %>"\r\n           data-control="dateTimePicker"\r\n           data-control-bind="<%= PropertyName %>"\r\n           data-control-from="<%= FromFilter %>"\r\n           data-control-to="<%= ToFilter %>"\r\n           data-control-from-relative="<%= FromRelative %>"\r\n           data-control-to-relative="<%= ToRelative %>"\r\n    \r\n    <% if ( Disabled ){ %>\r\n    disabled\r\n    <% } %>\r\n\r\n    <% if ( Required ){ %>\r\n    required\r\n    <% } %>\r\n\r\n    >\r\n</div>'}),profileMainBuilder.define("forms/fields/datetime/controller",["require","text!forms/fields/datetime/view.html"],function(e){var t=e("text!forms/fields/datetime/view.html");return{template:t,build:function(e,i,n){var a=_.template(t),r={FromFilter:"",ToFilter:"",FromRelative:"",ToRelative:"",Disabled:i.disabled,Required:i.Required};"string"==typeof i.MinValue&&(-1!=i.MinValue.indexOf(":")?r.FromRelative=i.MinValue:r.FromFilter=i.MinValue),"string"==typeof i.MaxValue&&(-1!=i.MaxValue.indexOf(":")?r.ToRelative=i.MaxValue:r.ToFilter=i.MaxValue),$.extend(!0,r,i),n(a(r))}}}),profileMainBuilder.define("text!forms/fields/enum/view.html",[],function(){return'<div class="form-group">\r\n    <label class="control-label" for="<%= PropertyName %>" data-localize="<%= PropertyDisplayName %>">\r\n        <span><% if ( Required ){ %> <%= \'(\' + localization.Required + \')\' %><% } %></span>\r\n    </label>\r\n\r\n    <div class="form-control form-control-picker input-sm"\r\n         data-url="/api/V3/Enum/GetList"\r\n         data-combourl="/api/V3/Enum/GetFlatList/"\r\n         data-showpath="<%= ShowPath %>"\r\n         data-mustselectleafnode="<%= LeafNodeOnly %>"\r\n         data-bind="ciresonDropDownTree: \'<%= EnumId %>\', value: <%= PropertyName %>"\r\n         data-disabled="<%= Disabled %>"\r\n         data-role="<%= PropertyName %>"\r\n         data-filter="<%= FilterIds%>"\r\n        <% if ( Required ){ %>\r\n        required\r\n        <% } %>\r\n        >\r\n\r\n    </div>\r\n\r\n</div>'}),profileMainBuilder.define("forms/fields/enum/controller",["require","text!forms/fields/enum/view.html"],function(e){var t=e("text!forms/fields/enum/view.html");return{template:t,build:function(e,i,n){var a=_.template(t),r={EnumId:"",Required:i.Required,Disabled:i.disabled,LeafNodeOnly:!1,ShowPath:!1,FilterIds:""};$.extend(!0,r,i),n(a(r))}}}),profileMainBuilder.define("text!forms/fields/userPicker/view.html",[],function(){return'<div class="form-group" data-cid="userpicker" data-cid-propname="<%= PropertyName %>"\r\n            <% if ( Required ){ %>\r\n            required\r\n            <% } %>>\r\n    <label class="control-label" for="<%= PropertyName %>" data-localize="<%= PropertyDisplayName %>">\r\n        <span><% if ( Required ){ %> <%= \'(\' + localization.Required + \')\' %><% } %></span>\r\n    </label>\r\n    <input class="input-userpicker"\r\n           data-control="userPicker"\r\n           data-control-bind="<%= PropertyName %>"\r\n           data-control-extra="<%= ExtraProps %>"\r\n           data-control-delay="<%= Delay %>"\r\n           data-control-minlength="<%= MinLength %>"\r\n           data-control-filterbyanalyst="<%= FilterByAnalyst%>"\r\n           data-control-maxnumberofresults="<%= MaxNumberOfResults%>"\r\n           type="text"\r\n           name="<%= PropertyName %>"\r\n            <% if ( Disabled ){ %>\r\n            disabled\r\n            <% } %>\r\n\r\n    />\r\n</div>'}),profileMainBuilder.define("text!forms/popups/userPickerPopup/view.html",[],function(){return'<div id="UserPickerPopupWindow" class="cireson-window defined-form task-window">\r\n    <div class="cireson-window--wrapper">\r\n        <div class="cireson-window--body">\r\n            <div class="row">\r\n                <div class="col-md-6">\r\n                    <div class="form-group popup-search-box">\r\n                        <input type="text" data-value-update="keyup" placeholder="<%= localization.SearchText %>" data-bind="value: searchValue, events: { keypress: searchOnEnter }" class="search-input">\r\n                        <span data-bind="events:{click: search}" class="search-icon">\r\n                            <i class="fa fa-search"></i>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div data-bind="visible: isDesktopView">\r\n                <div data-control-grid="userPickerGrid"></div>\r\n\r\n            </div>\r\n\r\n            <div class="row" data-bind="visible: isMobileView">\r\n                <div class="col-md-4">\r\n                    <div data-role="listview"\r\n                         data-bind="source: userDataSource, events:{change: onListViewChanged}"\r\n                         data-template="user-grid-mobile-template"\r\n                         data-selectable="true"\r\n                         class="user-listBox"></div>\r\n                    <div data-role="pager"\r\n                         data-bind="source: userDataSource"\r\n                         data-numeric="false"></div>\r\n                    <script type="text/x-kendo-template" id="user-grid-mobile-template">\r\n                        <div class="user-info">\r\n                            <dl>\r\n                                <dt>#: FirstName # #: LastName #</dt>\r\n                                <dd>#: UserName # &middot; #: Title #</dd>\r\n                                <dd>#: Domain # &middot; #: Company #</dd>\r\n                            </dl>\r\n                        </div>\r\n\r\n                    <\/script>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="cireson-window--footer window-buttons objectPicker-single-grid">\r\n            <button data-role="button"\r\n                    class="btn btn-primary"\r\n                    data-bind="events: { click: save }">\r\n                <%= localization.OK %>\r\n            </button>\r\n            <button data-role="button"\r\n                    class="btn btn-default"\r\n                    data-bind="events: { click: cancel }">\r\n                <%= localization.Cancel %>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n'});var __userPickerPopupSingleton;profileMainBuilder.define("forms/popups/userPickerPopup/controller",["require","text!forms/popups/userPickerPopup/view.html"],function(e){var t=e("text!forms/popups/userPickerPopup/view.html"),i=function(e,t){var i=this;this.serverNameProp=e,this.serverIdProp=t;var n={};n[i.serverNameProp],n[i.serverIdProp],this.set={name:function(e){n[i.serverNameProp]=e},id:function(e){n[i.serverIdProp]=e}},this.setObj=function(e,t){i.set.name(e),i.set.id(t)},this.setFromObj=function(e){i.setObj(e[i.serverNameProp],e[i.serverIdProp])},this.get={name:function(){return n[i.serverNameProp]},id:function(){return n[i.serverIdProp]}},this.getFromObj=function(e){return i.setFromObj(e),n},this.getObj=function(e,t){return void 0!==e&&void 0!==t&&i.setObj(e,t),n},this.getGenericFromObj=function(e){return this.setFromObj(e),{name:i.get.name(),id:i.get.id()}}},n=function(e,t){var n,a,r,o=this,l=e,s=e.find("[data-control-grid]"),d=t?"/User/GetUserSearchResults?groupsOnly=true":"/User/GetUserSearchResults",c=new i("Name","Id");this.setSaveCallback=function(e){$(o).unbind("save").bind("save",function(t,i){e(i)})},this.setCancelCallback=function(e){$(o).unbind("cancel").bind("cancel",function(t,i){e(i)})};var u=function(){},p=function(){n.search(r.searchValue)},f=function(e){if(app.isMobileDevice()){if(!_.isNull(r.selectedUser)){var t=c.getGenericFromObj(r.selectedUser);$(o).trigger("save",t),b()}}else{var i=n.kendoGrid.select();if(i){var a=c.getGenericFromObj(n.kendoGrid.dataItem(i));$(o).trigger("save",a),b()}}},m=function(){$(o).trigger("cancel"),b()},v=function(){o.vm.set("searchValue",""),n.kendoDataSource.data([]),a.kendoWindow.open()},b=function(){a.kendoWindow.close()},h=function(){a=new w(t)},g=function(){n=new y({html:s,url:d})},w=function(e){var t,i=this,n=function(){t=l.kendoCiresonWindow({title:e?localization.SelectGroup:localization.SelectUser,content:null,width:680,height:420,actions:["Close"]}).data("kendoWindow")};!function(){n(),i.kendoWindow=t}()},y=function(e){var t,i,n,a=this,o=e.html,l=e.url,s=function(){t.bind("dataBound",function(e){t.pager.element.show()}),t.element.on("dblclick","tbody>tr",d)},d=function(){t.select($(this)),f()},c=function(e){n=e,i.read(),i.page(1),r.set("userDataSource",i)},u=function(){i=new kendo.data.DataSource({transport:{prefix:"",read:{url:l,data:function(){return{userFilter:function(){return n},filterByAnalyst:r.filterByAnalyst}},type:"GET"}},pageSize:app.isMobileDevice?3:15,serverPaging:!0,serverSorting:!0,serverFiltering:!0,serverGrouping:!0,total:0,type:"aspnetmvc-ajax",schema:{data:"Data",total:"Total",errors:"Errors",model:{fields:{Id:{type:"string"},Name:{type:"string"},PrincipalName:{type:"string"},UserName:{type:"string"},Domain:{type:"string"},Company:{type:"string"},Title:{type:"string"},FirstName:{type:"string"},LastName:{type:"string"},EmployeeId:{type:"string"},Analyst:{type:"number"}}}}})},p=function(){t=o.kendoGrid({height:200,dataSource:i,selectable:"Single,Row",sortable:{mode:"multiple"},pageable:!0,filterable:{extra:!1,operators:{string:{startswith:localization.Startswith,contains:localization.Contains,eq:localization.Isequalto,neq:localization.Isnotequalto}}},autoBind:!1,columns:[{title:localization.id,hidden:!0,field:"Id",filterable:{},encoded:!0},{title:localization.FirstName,attributes:{class:"grid-highlight-column"},width:"110px",field:"FirstName",filterable:{},encoded:!0},{title:localization.LastName,attributes:{class:"grid-highlight-column"},width:"110px",field:"LastName",filterable:{},encoded:!0},{title:localization.Title,field:"Title",filterable:{},encoded:!0},{title:localization.UserName,field:"UserName",filterable:{},encoded:!0},{title:localization.Domain,field:"Domain",filterable:{},encoded:!0},{title:localization.Company,field:"Company",filterable:{},encoded:!0}]}).data("kendoGrid")};!function(){u(),p(),t.pager.element.hide(),s(),a.kendoGrid=t,a.kendoDataSource=i,a.search=c}()};!function(){r=kendo.observable({searchText:localization.SearchText,selectUserText:t?localization.SelectGroup:localization.SelectUser,searchValue:"",search:p,searchOnEnter:function(e){13==e.which&&(e.preventDefault(),p())},save:f,cancel:m,userDataSource:new kendo.data.DataSource,onListViewChanged:function(e){var t=e.sender.select().index(),i=e.sender.dataSource.view()[t];this.set("selectedUser",i)},selectedUser:null,isDesktopView:!app.isMobileDevice(),isMobileView:app.isMobileDevice()}),kendo.bind(l,r),h(),g(),u(),o.open=v,o.close=b,o.vm=r}()};return{template:t,getPopup:function(e){if(__userPickerPopupSingleton)return __userPickerPopupSingleton;var i=_.template(t),a=$(i());return $("body").append(a),__userPickerPopupSingleton=new n(a,e)}}}),profileMainBuilder.define("forms/fields/userPicker/controller",["require","text!forms/fields/userPicker/view.html","forms/popups/userPickerPopup/controller"],function(e){var t=e("text!forms/fields/userPicker/view.html"),i=e("forms/popups/userPickerPopup/controller"),n={template:t,build:function(e,n,a){_.isUndefined(n.vm)?(boundObj=n,name=n.PropertyName):(boundObj=n.vm,name=n.PropertyName);var o={Required:n.Required,Disabled:n.disabled,ExtraProps:!1,Delay:200,MinLength:3,FilterByAnalyst:!1,MaxNumberOfResults:10};$.extend(!0,o,n);var l=_.template(t),s=$(l(o)),d=i.getPopup();new r(s.find("[data-control='userPicker']"),boundObj,name,d);s.find("[data-control='userPicker']").attr("data-control","userPickerBound"),a(s)}},a=function(e,t){var i=this;this.serverNameProp=e,this.serverIdProp=t;var n={};n[i.serverNameProp],n[i.serverIdProp],this.set={name:function(e){n[i.serverNameProp]=e},id:function(e){n[i.serverIdProp]=e}},this.setObj=function(e,t){i.set.name(e),i.set.id(t)},this.setFromObj=function(e){i.setObj(e[i.serverNameProp],e[i.serverIdProp])},this.get={name:function(){return n[i.serverNameProp]},id:function(){return n[i.serverIdProp]}},this.getFromObj=function(e){return i.setFromObj(e),n},this.getObj=function(e,t){return void 0!==e&&void 0!==t&&i.setObj(e,t),n},this.getGenericFromObj=function(e){return this.setFromObj(e),{name:i.get.name(),id:i.get.id()}}},r=function(e,t,i,n){var e=e,r=e.attr("data-control-extra"),o=e.attr("data-control-delay"),l=e.attr("data-control-minlength"),s=e.attr("data-control-filterByAnalyst"),d=e.attr("data-control-maxNumberOfResults"),t=t,c=i,n=n,u=new a("DisplayName","BaseId");app.lib.forceKendoProp(t,c,kendo.observable(u.getObj(null,null)));var p,f,m={obj:function(){return t[c]},name:function(){return t[c].DisplayName},id:function(){return t[c].BaseId}},v={obj:function(e,i){t[c].set("BaseId",i),t[c].set("DisplayName",e)}},b=function(){t[i].bind("change",function(){C()})},h=function(e){e?v.obj(e.name,e.id):v.obj(null,null)},g=function(){n.setSaveCallback(function(e){v.obj(e.name,e.id)}),n.vm.filterByAnalyst=s,n.open()},w=function(){return!!(t&&t[i]&&m.name()&&m.id())},y=function(){return!!(t&&t[i]&&_.isNull(m.name())&&_.isNull(m.id()))},x=function(){return r&&"false"!=r},k=function(){x()&&(p=new M({url:"/Search/GetObjectPropertiesByProjection?projectionId=490ab845-b14c-1d91-c39f-bb9e8a350933&id=",container:e.parent(),props:r.split(",")}))},I=function(){f=new S({url:"/api/V3/User/GetUserList",detailsUrl:"/Search/ObjectViewer",targetEle:e,delay:o,minLength:l,callback:h,maxNumberOfResults:d})},C=function(){w()?(p&&p.setDisplay(m.id()),f&&f.setValue(m.name(),m.id())):y()&&f&&f.setValue("",null)},M=function(e){var t,i,n=this,a=e.container,r=e.url,o=e.props,l=function(){i.bind("change",function(e){"extraPropText"==e.field?i.set("isVisible",i.extraPropText.length>0):"data"==e.field&&p()})},s=function(){t=$("<span>",{class:"help-block","data-bind":"text: extraPropText, visible: isVisible"}),setTimeout(function(){a.append(t)},100)},d=function(){i=kendo.observable({isVisible:!1,extraPropText:"",data:{},getUserObjectData:c}),kendo.bind(t,i)},c=function(e){$.get(r+e,function(e){e&&e[0]&&(e=e[0]),i.set("data",e),p()})},u=function(e){var t="";return _.isUndefined(e.Name)||_.isNull(e.Name)||(t=e.Name),_.isUndefined(e.DisplayName)||_.isNull(e.DisplayName)||(t=e.DisplayName),t},p=function(){var e="";$.each(o,function(t,n){var a=i.data[n];a&&(e+=(_.isObject(a)?u(a):a)+", ")}),i.set("extraPropText",e.substring(0,e.length-2))};!function(){s(),d(),l(),n.setDisplay=i.getUserObjectData}()},S=function(e){var t,i,n,r,o,l,d=this,c=e.targetEle,u=e.url,p=e.detailsUrl,f=e.callback,m=e.delay,v=e.minLength,b=c.attr("disabled")?"":localization.SearchButton,h=!1,w=new a("Name","Id"),y=!_.isNull(session.consoleSetting.TrueControlCenterURL)&&""!=session.consoleSetting.TrueControlCenterURL,x=function(){t.bind("select",function(e){var t=this.dataItem(e.item.index());f(w.getGenericFromObj(t))}),t.bind("change",function(e){B(),f(w.getGenericFromObj(A(t.value())))}),t.bind("dataBound",function(e){e.sender.ul.find("li").first().addClass("k-state-hover")}),c.on("keyup",function(e){40!=e.which||t.ul.is(":visible")?13!=e.which&&9!=e.which&&(h=z(),B()):(t.search(t.value()),B())}),c.on("keydown",function(e){if(13==e.which){if(t.ul.children().length&&t.ul.is(":visible")){var i=!1!==h?h:0;t.select(t.ul.children().eq(i)),B()}else t.search(t.value())}}),c.on("blur",function(e){h=z(),B(!0)}),c.on("input propertychange",function(e){""!=e.currentTarget.value&&(t.search(e.currentTarget.value),B())}),l.bind("close",function(){o.find(".k-content").html("")}),n.click(g),r.click(k)},k=function(e){y?e.stopPropagation():C()},I=function(e){var t={BaseId:w.get.id(),Name:w.get.name()},i=app.slideOutNav.getTCCSourceURL(t,"user"),n={url:i,tooltip:localization.UserManagement};app.slideOutNav.show(n)},C=function(e){l.refresh({url:p,data:{id:w.get.id()}}),o.find(".k-content").html("<div style='padding: 55px'>Loading...</div>"),l.title(w.get.name()).center().open()},M=function(){n=$("<div>",{class:"searchIcon","data-control-action":"userPickerWindow"});var e=c.attr("disabled")?"":"text-primary",t=$("<i>",{class:"fa fa-search cursor-pointer "+e});n.append(t),c.attr("disabled")&&!app.isMobileDevice()||n.insertAfter(c)},S=function(){var e=c.attr("disabled")?"":"text-primary";r=$("<i>",{class:"fa fa-info-circle cursor-pointer info-icon "+e}),r.insertBefore(c),r.hide()},P=function(){c.attr("disabled");r=$("<ul>",{class:"menu-usr-mgt"}),r.insertBefore(c),r.hide(),r.kendoMenu({dataSource:[{
text:"<i class='fa fa-info-circle cursor-pointer'></i>",encoded:!1,items:[{text:localization.UserManagement,imageUrl:"/Content/Images/Icons/Other/control-center-launcher.png",imageAttr:{height:"16px",width:"16px"},attr:{custom:"tcc"}},{text:"<i class='fa fa-info-circle cursor-pointer' style='margin: -2px 7px 0 -3px;'></i>"+localization.AdditionalDetails,encoded:!1,attr:{custom:"info"}}]}],select:function(e){if(!_.isUndefined(e.item.attributes.custom)){"tcc"==e.item.attributes.custom.value?I():C()}},openOnClick:!0})},D=function(){i=new kendo.data.DataSource({transport:{read:{url:u,data:{userFilter:function(){return t.value()},filterByAnalyst:s,maxNumberOfResults:e.maxNumberOfResults}}},serverFiltering:!0})},T=function(){t=c.kendoAutoComplete({dataTextField:"Name",suggest:!0,placeholder:b+"...",valuePrimitive:!1,dataSource:i,delay:m,minLength:v,enable:!c.attr("disabled"),clearButton:!1}).data("kendoAutoComplete")},N=function(){o=$("<div>"),o.appendTo("body"),l=o.kendoCiresonWindow({title:"",width:550,height:500,actions:["Close"]}).data("kendoWindow")},B=function(e){A(t.value())||""==t.value()?(c.removeAttr("data-invalid",""),""===t.value()?r.hide():(r.show(),c.css({"text-decoration":"underline"})),c.css({"background-color":c.attr("disabled")?"#eee":"#fff"})):(r.hide(),c.is(":focus")&&!e?c.css({"text-decoration":"none","background-color":c.attr("disabled")?"#a1a1a1":"#fff"}):(c.css({"text-decoration":"none","background-color":"#FBE3E4"}),c.attr("data-invalid","")))},A=function(e){var t=_.clone(i),n=t.view(),a=!1;return $.each(n,function(t,i){i.Name.toLowerCase()==e.toLowerCase()&&(a=i)}),a},j=function(e,n){i.add(w.getObj(e,n)),t.value(e),B()},z=function(){var e=t.ul.find(".k-state-focused");return!!e.length&&e.index()};!function(){D(),T(),M(),y?P():S(),N(),x(),d.setValue=j}()};!function(){k(),I(),C(),b()}()};return n}),profileMainBuilder.define("text!forms/fields/objectPicker/view.html",[],function(){return'<div class="form-group" data-cid="objectpicker" data-cid-propname="<%= PropertyName %>">\r\n    <label class="control-label" for="<%= PropertyName %>" data-localize="<%= PropertyDisplayName %>">\r\n        <span><% if ( Required ){ %> <%= \'(\' + localization.Required + \')\' %><% } %></span>\r\n    </label>\r\n    <input class="input-userpicker"\r\n           data-control="objectPicker"\r\n           data-control-bind="<%= PropertyName %>"\r\n           data-control-extra="<%= ExtraProps %>"\r\n           type="text"\r\n           name="<%= PropertyName %>"\r\n            <% if ( Disabled ){ %>\r\n            disabled\r\n            <% } %>\r\n\r\n            <% if ( Required ){ %>\r\n            required\r\n            <% } %>\r\n    />\r\n</div>'}),profileMainBuilder.define("text!forms/popups/objectPickerPopup/view.html",[],function(){return'<div id="ObjectPickerPopupWindow" class="cireson-window defined-form task-window">\r\n    <div class="cireson-window--wrapper">\r\n        <div class="cireson-window--body">\r\n            <div class="col-group">\r\n                <div class="c2">\r\n                    <label data-bind="text: searchText"></label>\r\n                    <span class="k-textbox">\r\n                        <input class="textbox-padding-right" type="text" data-value-update="keyup" data-bind="value: searchValue, events: { keypress: searchOnEnter }">\r\n                        <a data-bind="click: search" class="cursor-pointer fa fa-search"></a>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <label data-bind="text: selectObjectText"></label>\r\n                <div data-control-grid="userPickerGrid"></div>\r\n            </div>\r\n        </div>\r\n        \r\n        <div class="cireson-window--footer window-buttons objectPicker-single-grid">\r\n            <button data-role="button"\r\n                    class="btn btn-primary"\r\n                    data-bind="events: { click: save }">\r\n                <%= localization.OK %>\r\n            </button>\r\n            <button data-role="button"\r\n                    class="btn btn-default"\r\n                    data-bind="events: { click: cancel }">\r\n                <%= localization.Cancel %>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>'});var __objectPickerPopupSingleton;profileMainBuilder.define("forms/popups/objectPickerPopup/controller",["require","text!forms/popups/objectPickerPopup/view.html"],function(e){var t=e("text!forms/popups/objectPickerPopup/view.html"),i=function(e,t){var i=this;this.serverNameProp=e,this.serverIdProp=t;var n={};n[i.serverNameProp],n[i.serverIdProp],this.set={name:function(e){n[i.serverNameProp]=e},id:function(e){n[i.serverIdProp]=e}},this.setObj=function(e,t){i.set.name(e),i.set.id(t)},this.setFromObj=function(e){i.setObj(e[i.serverNameProp],e[i.serverIdProp])},this.get={name:function(){return n[i.serverNameProp]},id:function(){return n[i.serverIdProp]}},this.getFromObj=function(e){return i.setFromObj(e),n},this.getObj=function(e,t){return void 0!==e&&void 0!==t&&i.setObj(e,t),n},this.getGenericFromObj=function(e){return this.setFromObj(e),{name:i.get.name(),id:i.get.id()}}},n=function(e,t,n){var a,r,o,l=this,s=e,t=t,d=e.find("[data-control-grid]"),c=new i("DisplayName","Id");this.setSaveCallback=function(e){$(l).unbind("save").bind("save",function(t,i){e(i)})},this.setCancelCallback=function(e){$(l).unbind("cancel").bind("cancel",function(t,i){e(i)})};var u=function(){},p=function(){a.search(o.searchValue)},f=function(){var e=a.kendoGrid.select();if(e){var t=c.getGenericFromObj(a.kendoGrid.dataItem(e));$(l).trigger("save",t),b()}},m=function(){$(l).trigger("cancel"),b()},v=function(){l.vm.set("searchValue",""),a.kendoDataSource.data([]),r.kendoWindow.open()},b=function(){r.kendoWindow.close()},h=function(){r=new w},g=function(){a=new y({html:d,url:"/ConfigItems/GetObjectSearchResults"})},w=function(){var e,t=this,i=function(){e=s.kendoCiresonWindow({title:localization.SelectObject,content:null,width:680,height:400,actions:["Close"]}).data("kendoWindow")};!function(){i(),t.kendoWindow=e}()},y=function(e){var i,a,r,o=this,l=e.html,s=e.url,d=function(){i.bind("dataBound",function(e){i.pager.element.show()}),i.element.on("dblclick","tbody>tr",c)},c=function(){i.select($(this)),f()},u=function(e){r=e,a.read(),_.isUndefined(n)&&""==n||i.dataSource.filter([{field:"Id",operator:"neq",value:n}]),a.page(1)},p=function(){a=new kendo.data.DataSource({transport:{prefix:"",read:{url:s,data:function(){return{searchFilter:function(){return r},classId:function(){return t},groupFilter:""}},type:"GET"}},pageSize:15,page:1,total:0,type:"aspnetmvc-ajax",schema:{data:"Data",total:"Total",errors:"Errors",model:{fields:{Id:{type:"string"},ObjectClassId:{type:"number"},ObjectClassName:{type:"string"},DisplayName:{type:"string"},Path:{type:"string"},Hosted:{type:"number"},LastModified:{type:"date"},Status:{type:"string"}}}}})},m=function(){i=l.kendoGrid({height:150,dataSource:a,selectable:"Single,Row",sortable:{mode:"multiple"},pageable:!0,filterable:{extra:!1,operators:{string:{startswith:localization.Startswith,contains:localization.Contains,eq:localization.Isequalto,neq:localization.Isnotequalto}}},autoBind:!1,columns:[{title:"Id",hidden:!0,field:"Id",filterable:{},encoded:!0},{title:localization.DisplayName,attributes:{class:"grid-highlight-column"},field:"DisplayName",filterable:{},encoded:!0},{title:localization.Class,field:"ObjectClassName",filterable:{},encoded:!0},{title:localization.Path,field:"Path",filterable:{},encoded:!0}]}).data("kendoGrid")};!function(){p(),m(),i.pager.element.hide(),d(),o.kendoGrid=i,o.kendoDataSource=a,o.search=u}()};!function(){o=kendo.observable({searchText:localization.SearchText,selectObjectText:localization.SelectObject,searchValue:"",okText:localization.OK,cancelText:localization.Cancel,search:p,searchOnEnter:function(e){13==e.which&&(e.preventDefault(),p())},save:f,cancel:m}),kendo.bind(s,o),h(),g(),u(),l.open=v,l.close=b,l.vm=o}()};return{template:t,getPopup:function(e,i){if(__objectPickerPopupSingleton&&__objectPickerPopupSingleton[e])return __objectPickerPopupSingleton[e];var a=_.template(t),r=$(a()),e=e;r.data("objectPickerPopup");return $("body").append(r),__objectPickerPopupSingleton=new n(r,e,i)}}}),profileMainBuilder.define("forms/fields/objectPicker/controller",["require","text!forms/fields/objectPicker/view.html","forms/popups/objectPickerPopup/controller"],function(e){var t=e("text!forms/fields/objectPicker/view.html"),i=e("forms/popups/objectPickerPopup/controller"),n={template:t,build:function(e,n,a){boundObj=n.vm,name=n.PropertyName;var o={Required:n.Required,Disabled:n.disabled,ExtraProps:!1,ClassId:!1};$.extend(!0,o,n);var l=_.template(t),s=$(l(o)),d=i.getPopup(o.ClassId,boundObj.BaseId);new r(s.find("[data-control='objectPicker']"),boundObj,name,d,o.ClassId,a);s.find("[data-control='objectPicker']").attr("data-control","objectPickerBound"),a(s)}},a=function(e,t){var i=this;this.serverNameProp=e,this.serverIdProp=t;var n={};n[i.serverNameProp],n[i.serverIdProp],this.set={name:function(e){n[i.serverNameProp]=e},id:function(e){n[i.serverIdProp]=e}},this.setObj=function(e,t){i.set.name(e),i.set.id(t)},this.setFromObj=function(e){i.setObj(e[i.serverNameProp],e[i.serverIdProp])},this.get={name:function(){return n[i.serverNameProp]},id:function(){return n[i.serverIdProp]}},this.getFromObj=function(e){return i.setFromObj(e),n},this.getObj=function(e,t){return void 0!==e&&void 0!==t&&i.setObj(e,t),n},this.getGenericFromObj=function(e){return this.setFromObj(e),{name:i.get.name(),id:i.get.id()}}},r=function(e,t,i,n,r,o){var e=e,l=e.attr("data-control-extra"),t=t,s=i,n=n,r=r,d=new a("DisplayName","BaseId");app.lib.forceKendoProp(t,s,kendo.observable(d.getObj(null,null)));var c,u,p={obj:function(){return t[s].length>0?m(t[s],null):t[s]},name:function(){return t[s].length>0?m(t[s],"DisplayName"):t[s].DisplayName},id:function(){return t[s].length>0?m(t[s],"BaseId"):t[s].BaseId}},f={obj:function(e,i){t[s].length>0?(t[s][0].set("BaseId",i),t[s][0].set("DisplayName",e)):(t[s].set("BaseId",i),t[s].set("DisplayName",e))}},m=function(e,t){var i=e[0];return r.toLowerCase()==i.ClassTypeId.toLowerCase()?null!=t?i[t]:i:null},v=function(){t[i].bind("change",function(){k()})},b=function(e){e?f.obj(e.name,e.id):f.obj(null,null)},h=function(){n.setSaveCallback(function(e){t.BaseId!=e.id&&f.obj(e.name,e.id)}),n.open()},g=function(){return!!(t&&t[i]&&p.name()&&p.id())},w=function(){return l&&"false"!=l},y=function(){w()&&(c=new I({url:"/Search/GetObjectPropertiesByProjection?projectionId=490ab845-b14c-1d91-c39f-bb9e8a350933&id=",container:e.parent(),props:l.split(",")}))},x=function(){u=new C({url:"/ConfigItems/GetObjectSearchResults",detailsUrl:"/Search/ObjectViewer",targetEle:e,callback:b})},k=function(){g()&&(c&&c.setDisplay(p.id()),u&&u.setValue(p.name(),p.id()))},I=function(e){var t,i,n=this,a=e.container,r=e.url,o=e.props,l=function(){i.bind("change",function(e){"extraPropText"==e.field?i.set("isVisible",i.extraPropText.length>0):"data"==e.field&&u()})},s=function(){t=$("<span>",{class:"help-block","data-bind":"text: extraPropText, visible: isVisible"}),setTimeout(function(){a.append(t)},100)},d=function(){i=kendo.observable({isVisible:!1,extraPropText:"",data:{},getUserObjectData:c}),kendo.bind(t,i)},c=function(e){$.get(r+e,function(e){e&&e[0]&&(e=e[0]),i.set("data",e),u()})},u=function(){var e="";$.each(o,function(t,n){i.data[n]&&(e+=i.data[n]+", ")}),i.set("extraPropText",e.substring(0,e.length-2))};!function(){s(),d(),l(),n.setDisplay=i.getUserObjectData}()},C=function(e){var t,i,n,o,l,s,d=this,c=e.targetEle,u=e.url,p=e.detailsUrl,f=c.attr("disabled")?"":localization.SearchPlaceholder,m=e.callback,v=!1,b=new a("DisplayName","Id"),g=function(){t.bind("select",function(e){var t=this.dataItem(e.item.index());m(b.getGenericFromObj(t))}),t.bind("change",function(e){S(),m(b.getGenericFromObj(P(t.value())))}),t.bind("dataBound",function(e){e.sender.ul.find("li").first().addClass("k-state-hover")}),c.on("keyup",function(e){40!=e.which||t.ul.is(":visible")?13!=e.which&&(v=T(),S()):(t.search(t.value()),S())}),c.on("keydown",function(e){if(13==e.which){if(t.ul.children().length){var i=!1!==v?v:0;t.select(t.ul.children().eq(i)),S()}}}),c.on("input propertychange",function(e){t.search(e.currentTarget.value),S()}),s.bind("close",function(){l.find(".k-content").html("")}),n.click(h),o.click(w)},w=function(){s.refresh({url:p,data:{id:b.get.id()}}),l.find(".k-content").html("<div style='padding: 55px'>Loading...</div>"),s.title(b.get.name()).center().open()},y=function(){n=$("<div>",{class:"searchIcon","data-control-action":"userPickerWindow"});var e=c.attr("disabled")?"":"text-primary",t=app.isMobileDevice()?$("<i>",{class:"fa fa-search cursor-pointer "+e}):$("<div>",{class:"search fa fa-search cursor-pointer "+e});n.append(t),n.insertAfter(c)},x=function(){var e=c.attr("disabled")?"":"text-primary";o=app.isMobileDevice()?$("<i>",{class:"fa fa-info-circle cursor-pointer info-icon "+e}):$("<div>",{class:"open-modal fa fa-info-circle"}),o.insertBefore(c),o.hide()},k=function(){i=new kendo.data.DataSource({transport:{read:{url:u,data:{searchFilter:function(){return t.value()},classId:r},type:"GET"}},schema:{data:"Data",total:"Total",errors:"Errors"},serverFiltering:!0})},I="init",C=function(){t=c.kendoAutoComplete({dataTextField:"DisplayName",suggest:!1,placeholder:f,valuePrimitive:!1,dataSource:i,close:function(e){$(window).scrollTop()+$(window).height()==$(document).height()&&"open"==I&&(e.preventDefault(),I="close")},change:function(e){I="change",e.sender.close()},open:function(e){I="open"},enable:!c.attr("disabled"),clearButton:!1}).data("kendoAutoComplete")},M=function(){l=$("<div>"),l.appendTo("body"),s=l.kendoCiresonWindow({title:"",width:550,height:400,actions:["Close"]}).data("kendoWindow")},S=function(){P(t.value())?(o.show(),c.css({"text-decoration":"underline","background-color":"#fff"})):(o.hide(),c.is(":focus")?c.css({"text-decoration":"none","background-color":"#fff"}):c.css({"text-decoration":"none","background-color":"#FBE3E4"}))},P=function(e){var t=_.clone(i),n=t.view(),a=!1;return $.each(n,function(t,i){i.DisplayName.toLowerCase()==e.toLowerCase()&&(a=i)}),a},D=function(e,n){i.add(b.getObj(e,n)),t.value(e),S()},T=function(){var e=t.ul.find(".k-state-focused");return!!e.length&&e.index()};!function(){k(),C(),y(),x(),M(),g(),d.setValue=D}()};!function(){y(),x(),k(),v()}()};return n}),profileMainBuilder.define("text!forms/fields/button/view.html",[],function(){return'<div class="form-group">\r\n    <input type="button"\r\n           name="<%= PropertyName %>"\r\n           class="button btn btn-<%= ButtonType %> btn-<%= ButtonSize %>"\r\n           value="<%= PropertyDisplayName %>"\r\n           data-bind="click: <%= Action %>"\r\n\r\n            <% if ( Disabled ){ %>\r\n            disabled\r\n            <% } %>\r\n\r\n    />\r\n</div>'}),profileMainBuilder.define("forms/fields/button/controller",["require","text!forms/fields/button/view.html"],function(e){var t=e("text!forms/fields/button/view.html");return{template:t,build:function(e,i,n){var a=_.template(t),r={PropertyName:"defaultButton",ButtonType:i.ButtonType?i.ButtonType:"default",ButtonSize:i.ButtonSize?i.ButtonSize:"sm",Disabled:i.disabled};$.extend(!0,r,i),n(a(r))}}}),profileMainBuilder.define("text!forms/fields/editor/view.html",[],function(){return'<div class="form-group">\r\n    <label class="control-label" for="<%= PropertyName %>" data-localize="<%= PropertyDisplayName %>">\r\n        <span><% if ( Required ){ %> <%= \'(\' + localization.Required + \')\' %><% } %></span>\r\n    </label>\r\n    <textarea class="form-editor" data-control="editor" style="height:<%= Height %>px" name="<%= PropertyName %>">\r\n        <%= Content %>\r\n    </textarea>\r\n</div>\r\n\r\n\r\n'}),profileMainBuilder.define("forms/fields/editor/controller",["require","text!forms/fields/editor/view.html"],function(e){var t=e("text!forms/fields/editor/view.html"),i=function(e,t,i){if(null==i.Options){var n=["bold","italic","underline","strikethrough","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","indent","outdent","createLink","unlink","insertImage","superscript","subscript","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","viewHtml","formatting","foreColor","backColor"],a=["formatting","createLink","unlink","insertImage","viewHtml","bold","italic","underline","insertUnorderedList","insertOrderedList","indent","outdent","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"];i.Options=app.isMobileDevice()?a:n}var t=t;setTimeout(function(){e.kendoEditor({change:function(n){t.set(i.PropertyName,e.val())},tools:i.Options,encoded:!1,stylesheets:["/Content/Styles/cireson.main.min.css?v="+session.staticFileVersion]});var n=e.data("kendoEditor");t.bind("change",function(e){n.value(t[i.PropertyName])}),$(n.body).addClass("k-editor-content-body")},100)};return{template:t,build:function(e,n,a){var r=_.template(t);boundObj=n.vm;var o={Required:n.Required,Disabled:n.disabled,Content:boundObj[n.PropertyName]?$("<div/>").text(boundObj[n.PropertyName]).html():boundObj[n.PropertyName],Height:null==n.Height?440:n.Height};$.extend(!0,o,n);var l=$(r(o));new i(l.find("[data-control='editor']"),boundObj,n),a(l)}}}),profileMainBuilder.define("text!forms/fields/combo/view.html",[],function(){return'<div class="form-group" data-bind="ciresonCombo: ControlObject"\r\n\r\n<% if ( Required ){ %>\r\n    required\r\n<% } %>\r\n    >\r\n    <label data-template-part="labelPart" class="control-label" for="<%= PropertyName %>">\r\n    </label>\r\n\r\n    <input class="form-control form-control-picker input-sm" data-template-part="inputControlPart" data-control-bind="<%= PropertyName %>"\r\n        <% if ( Required ){ %>\r\n        required\r\n        <% } %>\r\n         >\r\n    </input>\r\n</div>\r\n'}),profileMainBuilder.define("forms/fields/combo/controller",["require","text!forms/fields/combo/view.html"],function(e){var t=e("text!forms/fields/combo/view.html");return{template:t,build:function(e,i,n){var a=_.template(t);!_.isUndefined(localization[i.name])&&[i.name].length>0&&(i.name=localization[i.name]);var r={PropertyName:i.PropertyName,PropertyDisplayName:i.PropertyDisplayName,DataSource:{},IsCascading:!_.isUndefined(i.IsCascading)&&i.IsCascading,Cascade:{},Required:!_.isUndefined(i.Required)&&i.Required,Disabled:!_.isUndefined(i.Disabled)&&i.Disabled,ControlObject:null,serverFiltering:!_.isUndefined(i.serverFiltering)&&i.serverFiltering,pageSize:_.isUndefined(i.pageSize)?1e3:i.pageSize};$.extend(!0,r,i),n(new kendo.View(a(r),{wrap:!1,model:kendo.observable(r)}).render())}}}),profileMainBuilder.define("text!forms/fields/dropDownList/view.html",[],function(){return'<div class="form-group" data-bind="ciresonDropDownList: ControlObject"\r\n\r\n<% if ( Required ){ %>\r\n    required\r\n<% } %>\r\n    >\r\n    <label data-template-part="labelPart" class="control-label" for="<%= PropertyName %>">\r\n    </label>\r\n\r\n    <input class="form-control form-control-picker input-sm" data-template-part="inputControlPart" data-control-bind="<%= PropertyName %>"\r\n        <% if ( Required ){ %>\r\n        required\r\n        <% } %>\r\n         >\r\n    </input>\r\n</div>\r\n'}),profileMainBuilder.define("forms/fields/dropDownList/controller",["require","text!forms/fields/dropDownList/view.html"],function(e){var t=e("text!forms/fields/dropDownList/view.html");return{template:t,build:function(e,i,n){var a=_.template(t);!_.isUndefined(localization[i.name])&&[i.name].length>0&&(i.name=localization[i.name]);var r={PropertyName:i.PropertyName,PropertyDisplayName:i.PropertyDisplayName,DataSource:{},Required:!_.isUndefined(i.Required)&&i.Required,Disabled:!_.isUndefined(i.Disabled)&&i.Disabled,ControlObject:null};$.extend(!0,r,i),n(new kendo.View(a(r),{wrap:!1,model:kendo.observable(r)}).render())}}}),profileMainBuilder.define("text!forms/fields/bundle/view.html",[],function(){return'<div class="form-group">\r\n\r\n    <button data-role="button"\r\n            class="btn btn-primary"\r\n            data-sprite-css-class="k-icon k-edit"\r\n            data-bind="events: { click: view.onClick }">\r\n        <%= localization.Bundle %>\r\n    </button>\r\n\r\n    <div id="Bundle" class="cireson-window defined-form hide">\r\n        <div class="cireson-window--wrapper">\r\n            <div class="cireson-window--body">\r\n\r\n\r\n                <div id="bundleGrid">\r\n                    <div style="width: 800px; height: 200px"\r\n                         data-role="grid"\r\n                         data-bind="source: products,\r\n                                visible: isVisible,\r\n                                events: {\r\n                                  save: onSave\r\n                                }"\r\n                         date-scrollable="true"\r\n                         data-editable="{mode:\'inline\', confirmation:false}"\r\n                         data-toolbar="[{name:\'create\', text:\'<%= localization.Create %>\'}]"\r\n                         data-columns="[\r\n                            { \'field\': \'SoftwarePatternName\', title: \'<%= localization.SoftwarePatternName %>\', \'width\': 150 },\r\n                            { \'field\': \'SoftwarePattern\', title: \'<%= localization.SoftwarePattern %>\', \'width\': 150 },\r\n                            { \'field\': \'VersionPattern\', title: \'<%= localization.VersionPattern %>\', \'width\': 150 },\r\n                            { \'field\': \'ExclusionPattern\', title: \'<%= localization.ExclusionPattern %>\', \'width\': 150 },\r\n                            { command:[{name:\'edit\', text:\'<%= localization.Edit %>\'}, {name:\'destroy\', text:\'<%= localization.Delete %>\'}], title: \' \', width: \'150\'}\r\n                        ]">\r\n                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="cireson-window--footer window-buttons">\r\n                <div id="changeStatusErrorWin" class="error"></div>\r\n                <button data-role="button"\r\n                        class="btn btn-primary"\r\n                        data-bind="enabled: okEnabled, events: { click: okClick }">\r\n                    <%= localization.OK %>\r\n                </button>\r\n                <button data-role="button"\r\n                        class="btn btn-default"\r\n                        data-bind="events: { click: cancelClick }">\r\n                    <%= localization.Cancel %>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n</div>\r\n\r\n\r\n'}),profileMainBuilder.define("forms/fields/bundle/controller",["require","text!forms/fields/bundle/view.html"],function(e){var t=e("text!forms/fields/bundle/view.html");return{template:t,build:function(e,i,n){var a=_.template(t);!_.isUndefined(localization[i.name])&&[i.name].length>0&&(i.name=localization[i.name]);var r={Disabled:i.disabled};$.extend(!0,r,i);var o,l=$(a(r)),s=[],d=l.find("#Bundle").clone(),c=d.kendoCiresonWindow({title:localization.createOrEditSoftwareBundle,width:850,height:375,actions:[],activate:function(){}}).data("kendoWindow"),u=new kendo.observable({okClick:function(){for(var t=o.products._data,i="",n="",a="",r=0;r<t.length;r++)""!=t[r].SoftwarePatternName&&(t.length-1==r?(i=i+t[r].SoftwarePatternName+"__"+t[r].SoftwarePattern,n+=t[r].ExclusionPattern,a+=t[r].VersionPattern):(i=i+t[r].SoftwarePatternName+"__"+t[r].SoftwarePattern+"|",n=n+t[r].ExclusionPattern+"|",a=a+t[r].VersionPattern+"|"));e.set("SoftwarePattern",i),e.set("ExclusionPattern",n),e.set("VersionPattern",a);var l=$("input[name='SoftwarePattern']"),s=$("input[name='ExclusionPattern']"),d=$("input[name='VersionPattern']");""!=e.SoftwarePattern?(e.set("IsBundle",!0),p(l,!1),p(s,!1),p(d,!1)):(e.set("IsBundle",!1),p(l,!0),p(s,!0),p(d,!0)),c.close()},cancelClick:function(){c.close()}});kendo.bind(d,u);var p=function(e,t){t?e.prop("disabled",!1).removeClass("k-state-disabled"):e.prop("disabled",!0).addClass("k-state-disabled").closest(".has-error").removeClass("has-error")};e.view.onClick=function(){s=[];var t=new Array,i=new Array,n=new Array;if(_.isNull(e.SoftwarePattern)||""==e.SoftwarePattern||(t=""==e.SoftwarePattern?"":e.SoftwarePattern.split("|")),_.isNull(e.ExclusionPattern)||""==e.ExclusionPattern||(i=""==e.ExclusionPattern?"":e.ExclusionPattern.split("|")),_.isNull(e.VersionPattern)||""==e.VersionPattern||(n=""==e.VersionPattern?"":e.VersionPattern.split("|")),e.IsBundle)for(var a in t){var r=t[a].split("__");s.push({SoftwarePatternName:r[0],SoftwarePattern:r[1],VersionPattern:n[a],ExclusionPattern:i[a]})}o=kendo.observable({isVisible:!0,onSave:function(e){},products:new kendo.data.DataSource({schema:{model:{id:"SoftwarePatternName",fields:{SoftwarePatternName:{editable:!0,validation:{SoftwarePatternNamevalidation:function(e){return!e.is("[name='SoftwarePatternName']")||""!=e.val()||(e.attr("data-SoftwarePatternNamevalidation-msg",localization.EnterRequiredFields),!1)}}},SoftwarePattern:{editable:!0,type:"string",validation:{SoftwarePatternvalidation:function(e){return!e.is("[name='SoftwarePattern']")||""!=e.val()||(e.attr("data-SoftwarePatternvalidation-msg",localization.EnterRequiredFields),!1)}}},VersionPattern:{editable:!0,type:"string",validation:{required:!1}},ExclusionPattern:{editable:!0,type:"string",validation:{required:!1}}}}},batch:!1,data:s})}),kendo.bind(d.find("#bundleGrid"),o),d.removeClass("hide"),d.show(),c.open()},n(l)}}}),profileMainBuilder.define("text!forms/fields/fileUpload/view.html",[],function(){return'<div class="form-group">\r\n    <label class="control-label" for="<%= PropertyName %>" data-localize="<%= PropertyDisplayName %>">\r\n        <span><% if ( Required ){ %> <%= \'(\' + localization.Required + \')\' %><% } %></span>\r\n    </label>\r\n\r\n    <input id="<%= PropertyName %>" type="file"\r\n           accept="<%= AcceptExtension %>"\r\n           data-role="upload"\r\n           name="files"\r\n           data-async="{ saveUrl: \'/FileAttachment/FileUpload/?BaseId=<%= BaseId %>&fieldName=<%= PropertyName %>\', autoUpload: true }"\r\n           class="k-textbox form-control input-sm"\r\n           data-bind="events: { select: onSelect, complete:complete, success:success }" />\r\n    <br />\r\n    <div id="div<%= PropertyName %>">\r\n        <div data-role="button"\r\n                data-sprite-css-class="k-icon k-edit"\r\n                data-bind="events: { click: onRemove }">\r\n            <i class="fa fa-close"></i>\r\n        </div>\r\n        <div>\r\n        <img />\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n\r\n'}),profileMainBuilder.define("forms/fields/fileUpload/controller",["require","text!forms/fields/fileUpload/view.html"],function(e){var t=e("text!forms/fields/fileUpload/view.html");return{template:t,build:function(e,i,n){var a=i.vm;new kendo.View;_.isUndefined(a.view)&&(a.view=[]);var r=_.template(t),o={Required:i.Required,BaseId:a.BaseId,AcceptExtension:_.isUndefined(i.AcceptExtension)?"":a.AcceptExtension};$.extend(!0,o,i);var l=$(r(o)),e=new kendo.observable({isEnabled:!0,isVisible:!0,onSelect:function(e){l.find(".k-file-error").remove(),$.each(e.files,function(t,n){_.isUndefined(i.AcceptExtension)||""==i.AcceptExtension||i.AcceptExtension.toLowerCase().indexOf(n.extension.toLowerCase())>-1||(kendo.ui.ExtAlertDialog.show({title:localization.ErrorDescription,message:localization.FileExtensionInvalid+i.AcceptExtension,icon:"fa fa-exclamation"}),e.preventDefault())})},complete:function(e){l.find(".k-file").length>1&&l.find(".k-file:first").remove()},success:function(e){l.find("img").attr("src","data:image/png;base64,"+e.response),a[i.PropertyName]={streamId:null,data:"stream",bufferedMode:!0,streamLength:0},l.find("#div"+i.PropertyName).show()},onRemove:function(e){$.get("/FileAttachment/RemoveFileUpload/",{BaseId:a.BaseId,fieldName:i.PropertyName},function(e){l.find(".k-file").parent().remove(),l.find("#div"+i.PropertyName).hide(),a[i.PropertyName]=null})}});$.get("/api/V3/Projection/GetBase64String",{BaseId:a.BaseId,PropertyName:i.PropertyName},function(e){var t=l.find("#div"+i.PropertyName);""!=e?(l.find("img").attr("src","data:image/png;base64,"+e),t.show()):t.hide()}),_.defer(function(){kendo.bind(l,e)}),n(l)}}}),profileMainBuilder.define("text!forms/fields/urlTextbox/view.html",[],function(){return'<div class="form-group">\r\n    <label class="control-label" for="<%= PropertyName %>" data-localize="<%= PropertyDisplayName %>">\r\n        <span><% if ( Required ){ %> <%= \'(\' + localization.Required + \')\' %><% } %></span>\r\n    </label>\r\n    <input type="text"\r\n           name="<%= PropertyName %>"\r\n           class="k-textbox form-control input-sm"\r\n           data-bind="value: <%= PropertyName %>, events:{change:textChange}" <% if ( Disabled ){ %>\r\n        disabled\r\n        <% } %>\r\n\r\n        <% if ( Required ){ %>\r\n        required\r\n        <% } %>\r\n\r\n        />\r\n    <div data-role="button"\r\n         data-sprite-css-class="k-icon k-edit"\r\n         class="urlTextboxIcon"\r\n         data-bind="events: { click: openURL }">\r\n        <i class="fa fa-external-link nav-icon-color"></i>\r\n    </div>\r\n</div>'}),profileMainBuilder.define("forms/fields/urlTextbox/controller",["require","text!forms/fields/urlTextbox/view.html"],function(e){var t=e("text!forms/fields/urlTextbox/view.html");return{template:t,build:function(e,i,n){var a=i.vm,r=new kendo.View;_.isUndefined(a.view)&&(a.view=[]),a.view.buildURLTextbox=function(){var e=_.template(t),o=new RegExp(/^((ftp|http|https?):\/\/)?([w|W]{3}\.)*?[a-zA-Z0-9\-\.]{3,}\.[a-zA-Z]{2,}(\.[a-zA-Z]{2,})?$/),l="urlTextboxButtonDisabled",s=a.get(i.PropertyName),d={Required:i.Required,Disabled:i.disabled};$.extend(!0,d,i);var c=$(e(d)),u=c.find("input"),p=c.find(".urlTextboxIcon"),f=function(){var e=!0;return s=a.get(i.PropertyName),p.removeClass(l),u.removeClass("input-error"),""==s||_.isNull(s)?(e=!1,p.addClass(l)):o.test(s)||(p.addClass(l),u.addClass("input-error"),e=!1),e};f(),a.textChange=function(e){f()},a.openURL=function(e){if(f()){s.match(/^ftp|http([s]?):\/\/.*/)||(s="http://"+s);window.open(s,"_blank").focus()}},r=new kendo.View(c,{wrap:!1,model:a}),n(r.render())},a.view.buildURLTextbox()}}}),profileMainBuilder.define("forms/fields/percentage/controller",["require","text!forms/fields/numeric/view.html"],function(e){var t=e("text!forms/fields/numeric/view.html");return{template:t,build:function(e,i,n){var a=_.template(t),r={DecimalPlaces:2,MinValue:"",MaxValue:"",StepIncrement:.01,Disabled:i.disabled,Required:i.Required,Format:"P0"};$.extend(!0,r,i),n(a(r))}}}),
profileMainBuilder.define("forms/formBuilder",["forms/structure/formPanel/controller","forms/structure/formPanelFull/controller","forms/structure/customFieldGroup/controller","forms/structure/customFieldGroupRow/controller","forms/structure/columnField/controller","forms/structure/tab/controller","forms/structure/tabPane/controller","forms/structure/tabNavigation/controller","forms/structure/tabData/controller","forms/predefined/actionLog/controller","forms/predefined/fileAttachments/controller","forms/predefined/affectedItems/controller","forms/predefined/relatedItems/controller","forms/predefined/childWorkItems/controller","forms/predefined/userInput/controller","forms/predefined/activities/controller","forms/predefined/multipleObjectPicker/controller","forms/predefined/history/controller","forms/predefined/billableTime/controller","forms/predefined/knowledgeArticle/controller","forms/predefined/fileAttachmentsDragDrop/controller","forms/fields/string/controller","forms/fields/longstring/controller","forms/fields/boolean/controller","forms/fields/display/controller","forms/fields/spacer/controller","forms/fields/numeric/controller","forms/fields/int/controller","forms/fields/decimal/controller","forms/fields/double/controller","forms/fields/date/controller","forms/fields/datetime/controller","forms/fields/enum/controller","forms/fields/userPicker/controller","forms/fields/objectPicker/controller","forms/fields/button/controller","forms/fields/editor/controller","forms/fields/combo/controller","forms/fields/dropDownList/controller","forms/fields/bundle/controller","forms/fields/fileUpload/controller","forms/fields/urlTextbox/controller","forms/fields/percentage/controller"],function(formPanel,formPanelFull,customFieldGroup,customFieldGroupRow,columnField,tab,tabPane,tabNavigation,tabData,actionLog,fileAttachments,affectedItems,relatedItems,childWorkItems,userInput,activities,multipleObjectPicker,history,billableTime,knowledgeArticle,fileAttachmentsDragDrop,String,LongString,Boolean,Display,Spacer,Numeric,Int32,Decimal,Double,Date,DateTime,Enum,UserPicker,ObjectPicker,Button,Editor,Combo,DropDownList,Bundle,FileUpload,UrlTextbox,Percentage){var mainContainer,jsonTemplate,viewModel,definition={build:function(vm,callback){viewModel=vm.viewModel,jsonTemplate=vm.formTemplate,eval("var _obj = "+jsonTemplate.layoutType+";"),_obj||(_obj=formPanel),_obj.build(function(e){mainContainer=$(e)}),readTemplate(mainContainer,jsonTemplate),callback(mainContainer),$("a[selected='selected']").tab("show")}},readTemplate=function(e,t,i){var i=void 0!=i&&!1!==i&&i;$.each(t,function(t,n){"layoutType"!=t&&jsonDecision(e,t,n,i)})},mutationLogic={all:function(e){e.vm=viewModel},tabList:function(e){jsonTemplate.tabNavigation={nodeCount:e.length,tabData:[]},tabNavigation.build(viewModel,jsonTemplate,function(t){var i=$(t),n=!1;$.each(e,function(e,t){var a=app.getParameterByName("tab").toLowerCase(),r=t.name;t.tabId=app.lib.newGUID(),t.active=0==e?"active":"",t.content.tabId=t.tabId,t.content.active=t.active,tabData.build(viewModel,t,function(e){var o=$(e);if(app.isMobile()?i.children(".nav-dropdown-content").find("ul").append(o):i.append(o),!app.isMobile()&&!n&&a.length>0)switch(r.toLowerCase()===a&&(o.find("a").attr("selected","true"),n=!0),a){case"activity":$.each(t.content,function(e,t){$.each(t.customFieldGroupList,function(e,t){"activities"===t.type&&(o.find("a").attr("selected","true"),n=!0)})})}})}),mainContainer.append(i)})},columnFieldList:function(e){app.lib.setColumnSizes(e)}},getContainer=function(e){return"string"==typeof e?$(e):e},chooseNextAction=function(e,t,i,n){t.content?jsonDecision(e,i+"Pane",t.content):t.rows?jsonDecision(e,i+"Row",t.rows):t.DataType?jsonDecision(e,t.DataType,t):t.type?jsonDecision(e,t.type,t):readTemplate(e,t,n)},jsonDecision=function(propContainer,propName,propValue,columns){var objectName=propName,list=!1,row=!1,pane=!1,columnCount=void 0!=columns&&columns;if(mutationLogic[propName]&&mutationLogic[propName](propValue),mutationLogic.all(propValue),propValue.push&&(propName.indexOf("List")>-1?(list=!0,objectName=propName.split("List")[0]):propName.indexOf("Row")>-1?(row=!0,columnCount=propValue.length):propName.indexOf("Pane")>-1&&(pane=!0)),eval("var _obj = "+objectName+";"),!_obj)throw Exception(objectName+" is not part of the templating system");list||row||pane?_obj==tab?_obj.build(viewModel,propValue,function(e){var t=getContainer(e);propContainer.append(t),$.each(propValue,function(e,i){chooseNextAction(t,i,objectName)})}):$.each(propValue,function(e,t){"columnField"==objectName&&(t.columnCount=columnCount),_obj==tabPane?_obj.build(viewModel,propValue,function(e){var i=getContainer(e);propContainer.append(i),readTemplate(i,t,columnCount)}):_obj.build(viewModel,t,function(e){var i=getContainer(e);propContainer.append(i),0!=i.find(".append-here").length?chooseNextAction(i.find(".append-here"),t,objectName,columnCount):chooseNextAction(i,t,objectName,columnCount)})}):(!_.isUndefined(viewModel)&&viewModel.isDisabled&&(propValue.disabled=!0),_obj.build(viewModel,propValue,function(e){var t=getContainer(e);propContainer.append(t)}))};return definition}),profileMainBuilder.define("forms/formHelper",[],function(){return{manageDirty:function(e){e.set("isDirty",!1),e.bind("change",function(t){"isDirty"!==t.field&&"HistoryButton"!==t.field&&e.set("isDirty",!0)}),window.onbeforeunload=function(){if(e.get("isDirty"))return localization.UnsavedDataMessage}},mobileDrawerTaskButton:function(e){function t(){app.isMobile()?i.show():i.hide()}var i=drawermenu.addButton(localization.Tasks,"fa fa-tasks",function(){});app.lib.makeDrawer("bottom",e,i,!0),$(window).resize(function(){t()}),t()}}}),profileMainBuilder.require.config({waitSeconds:0,urlArgs:"v="+session.staticFileVersion,baseUrl:"/Scripts/",paths:{text:"require/text"},shim:{}}),app.lib.mask.apply(),$("body").css("cursor","wait"),$(document).ajaxStop(function(){$("body").css("cursor","auto")}),profileMainBuilder.require(["forms/headerBuilder","forms/formBuilder","forms/formHelper"],function(headerBuilder,formBuilder,formHelper){var saveUrl=pageForm.saveUrl,mainContainer=$(pageForm.container),headerContainer=$(".page_bar").empty(),formContainer=$("<div/>").addClass("page-form"),dataVM=pageForm.viewModel;"userRelatedInfo"==pageForm.type?pageForm.headerTemplate={rows:[{columns:[{View:"status",Class:"col-md-5 col-xs-12"},{View:"spacer",ColSpan:4}]}]}:pageForm.headerTemplate={rows:[{columns:[{View:"title",ColSpan:8},{View:"spacer",ColSpan:4}]}]};var init=function(){"userRelatedInfo"==pageForm.type?dataVM.hasAsset?pageForm.formTemplate=pageForm.formTemplate.Default:pageForm.formTemplate=pageForm.formTemplate.withOutAsset:pageForm.formTemplate=pageForm.formTemplate.Default,mainContainer.append(formContainer),headerBuilder.build(pageForm,function(e){headerContainer.append(e)}),formBuilder.build(pageForm,function(e){formContainer.append(e),app.controls.apply(formContainer,{localize:!0,vm:dataVM,bind:!0}),formContainer.show(),"userRelatedInfo"!=pageForm.type&&("undefined"!=typeof drawermenu?createButtons():app.events.subscribe("drawerCreated",function(){createButtons()})),app.lib.handleMessages(),formHelper.manageDirty(dataVM)}),app.lib.mask.remove()},createButtons=function(){var saveFailure=function(e){e==localization.RequiredFieldsErrorMessage?app.lib.message.add(e,"danger"):app.lib.message.add(localization.PleaseCorrectErrors,"danger"),app.lib.message.show()};drawermenu.addButton(localization.Save,"fa fa-check",function(){save(function(data){data=eval("("+data+")"),app.lib.message.add(data.data,"success"),location="/Settings/User/UserProfile/",app.clearAllLocalStorage(),app.sessionTimeout.hideWarningPopup(),store.set("cireson_last_read_announcement",(new Date).toISOString())},saveFailure)}),drawermenu.addButton(localization.Apply,"fa fa-pencil",function(){save(function(e){refreshButtons(),$(".k-overlay").hide(),app.lib.message.show(),setTimeout(function(){$("html, body").animate({scrollTop:0},300),app.lib.mask.remove(),location="/Settings/User/UserProfile/",app.clearAllLocalStorage(),app.sessionTimeout.hideWarningPopup(),store.set("cireson_last_read_announcement",(new Date).toISOString())},100)},saveFailure)}),drawermenu.addButton(localization.Cancel,"fa fa-times",function(){dataVM.get("isDirty")?$.when(kendo.ui.ExtOkCancelDialog.show({title:localization.Warning,message:localization.UnsavedDataMessage,icon:"fa fa-exclamation"})).done(function(e){"ok"===e.button&&(dataVM.set("isDirty",!1),location.href="/Settings/User/UserProfile/")}):location.href="/Settings/User/UserProfile/"})},refreshButtons=function(){pageForm.viewModel.IsNew&&($("#drawer-taskbar").html(""),pageForm.viewModel.IsNew=!1,createButtons())},save=function(e,t){$(".page_content *").blur();var i=!0;if(formContainer.find(".form-group").removeClass("has-error"),formContainer.find("[required]").each(function(){var e=$(this),t=e[0].nodeName.toLowerCase();"input"!=t&&"textarea"!=t&&(e=e.find("input")),""==e.val()&&(i=!1,e.parents(".form-group").addClass("has-error"))}),!i)return void t(localization.RequiredFieldsErrorMessage);app.lib.mask.apply();var n=encodeURIComponent(JSON.stringify({isDirty:!0,current:dataVM.toJSON(),original:pageForm.jsonRaw}));$.ajax({type:"POST",dataType:"text",url:saveUrl,data:"formJson="+n,success:function(t,i,n){dataVM.set("isDirty",!1),t.search("loginForm")<0?e(t):window.location="/Login/Login?ReturnUrl="+window.location.pathname},error:function(e,i,n){t(),console&&app.lib.log(localization.RequestFailed),app.lib.log(n);var a=e.responseText;app.lib.log(a);var r=localization.RequestFailed;a.exception&&a.exception.length>0&&(r=a.exception),kendo.ui.ExtAlertDialog.show({title:localization.ErrorDescription,message:r,icon:"fa fa-exclamation"})},processData:!1,async:!1})};init()}),profileMainBuilder.define("forms/profileMain",function(){});